<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>jena-geo: DerbySqlScriptRunner Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">jena-geo
   &#160;<span id="projectnumber">Version 0.1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a07239.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pac-methods">Package Functions</a> &#124;
<a href="a07236.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">DerbySqlScriptRunner Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>An sql script runner replacing the boolean used in postgres by small Interger used by derby.  
 <a href="a07239.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for DerbySqlScriptRunner:</div>
<div class="dyncontent">
<div class="center"><img src="a07238.png" border="0" usemap="#DerbySqlScriptRunner_inherit__map" alt="Inheritance graph"/></div>
<map name="DerbySqlScriptRunner_inherit__map" id="DerbySqlScriptRunner_inherit__map">
<area shape="rect" id="node2" href="a07251.html" title="Run SQL scripts. " alt="" coords="32,80,131,107"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for DerbySqlScriptRunner:</div>
<div class="dyncontent">
<div class="center"><img src="a07237.png" border="0" usemap="#DerbySqlScriptRunner_coll__map" alt="Collaboration graph"/></div>
<map name="DerbySqlScriptRunner_coll__map" id="DerbySqlScriptRunner_coll__map">
<area shape="rect" id="node2" href="a07251.html" title="Run SQL scripts. " alt="" coords="552,316,651,343"/>
<area shape="rect" id="node13" href="a07243.html" title="The SQL dialect used by a connection. " alt="" coords="257,216,319,243"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aca2d6500401883c1cd33c9eea8532f85"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07239.html#aca2d6500401883c1cd33c9eea8532f85">DerbySqlScriptRunner</a> (final Connection c)  throws SQLException </td></tr>
<tr class="separator:aca2d6500401883c1cd33c9eea8532f85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3f7068c7ccd4c7bb1873b752cf24486"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07251.html#ad3f7068c7ccd4c7bb1873b752cf24486">getEncoding</a> ()</td></tr>
<tr class="memdesc:ad3f7068c7ccd4c7bb1873b752cf24486"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the encoding of SQL scripts, or.  <a href="#ad3f7068c7ccd4c7bb1873b752cf24486">More...</a><br /></td></tr>
<tr class="separator:ad3f7068c7ccd4c7bb1873b752cf24486"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09247462099dcfca65bce64059374ad3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07251.html#a09247462099dcfca65bce64059374ad3">setEncoding</a> (final String <a class="el" href="a07251.html#a5f709a89d356e1ebbab5325f22368f38">encoding</a>)</td></tr>
<tr class="memdesc:a09247462099dcfca65bce64059374ad3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the encoding of SQL scripts.  <a href="#a09247462099dcfca65bce64059374ad3">More...</a><br /></td></tr>
<tr class="separator:a09247462099dcfca65bce64059374ad3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a838ed6f0e3e1ad09e78e1e37229d744e"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07251.html#a838ed6f0e3e1ad09e78e1e37229d744e">accept</a> (final File directory, final String name)</td></tr>
<tr class="memdesc:a838ed6f0e3e1ad09e78e1e37229d744e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns.  <a href="#a838ed6f0e3e1ad09e78e1e37229d744e">More...</a><br /></td></tr>
<tr class="separator:a838ed6f0e3e1ad09e78e1e37229d744e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92338667c69a471901b2617e638b7655"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07251.html#a92338667c69a471901b2617e638b7655">run</a> (final File file)  throws IOException, SQLException </td></tr>
<tr class="memdesc:a92338667c69a471901b2617e638b7655"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the SQL script read from the given file or directory.  <a href="#a92338667c69a471901b2617e638b7655">More...</a><br /></td></tr>
<tr class="separator:a92338667c69a471901b2617e638b7655"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13a94624b21179dd03fde73b6f3be2bf"><td class="memItemLeft" align="right" valign="top">final int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07251.html#a13a94624b21179dd03fde73b6f3be2bf">run</a> (final InputStream in)  throws IOException, SQLException </td></tr>
<tr class="memdesc:a13a94624b21179dd03fde73b6f3be2bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the script from the given input stream.  <a href="#a13a94624b21179dd03fde73b6f3be2bf">More...</a><br /></td></tr>
<tr class="separator:a13a94624b21179dd03fde73b6f3be2bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f24d985af73b36eb53b6018059bf122"><td class="memItemLeft" align="right" valign="top">final int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07251.html#a4f24d985af73b36eb53b6018059bf122">run</a> (final LineNumberReader in)  throws IOException, SQLException </td></tr>
<tr class="memdesc:a4f24d985af73b36eb53b6018059bf122"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the script from the given reader.  <a href="#a4f24d985af73b36eb53b6018059bf122">More...</a><br /></td></tr>
<tr class="separator:a4f24d985af73b36eb53b6018059bf122"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64101d48a20710b0780be23ea3f36492"><td class="memItemLeft" align="right" valign="top">final int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07251.html#a64101d48a20710b0780be23ea3f36492">run</a> (final String <a class="el" href="a07251.html#ac4eabe349c40424717d7746855d667c7">statement</a>)  throws IOException, SQLException </td></tr>
<tr class="memdesc:a64101d48a20710b0780be23ea3f36492"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convenience method invoking <a class="el" href="a07251.html#a4f24d985af73b36eb53b6018059bf122">run(LineNumberReader)</a> for the given SQL statement.  <a href="#a64101d48a20710b0780be23ea3f36492">More...</a><br /></td></tr>
<tr class="separator:a64101d48a20710b0780be23ea3f36492"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a2a810d6b1e96f8037d6ce5a637ac99"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07251.html#a8a2a810d6b1e96f8037d6ce5a637ac99">close</a> (final boolean vacuum)  throws SQLException </td></tr>
<tr class="memdesc:a8a2a810d6b1e96f8037d6ce5a637ac99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes the statement used by this runner.  <a href="#a8a2a810d6b1e96f8037d6ce5a637ac99">More...</a><br /></td></tr>
<tr class="separator:a8a2a810d6b1e96f8037d6ce5a637ac99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08e1a85198eaf6487c6f5f8919d2102f"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07251.html#a08e1a85198eaf6487c6f5f8919d2102f">getCurrentPosition</a> ()</td></tr>
<tr class="memdesc:a08e1a85198eaf6487c6f5f8919d2102f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current position (current file and current line in that file).  <a href="#a08e1a85198eaf6487c6f5f8919d2102f">More...</a><br /></td></tr>
<tr class="separator:a08e1a85198eaf6487c6f5f8919d2102f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad146fa8579a5f8a876c4688cc5a68520"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07251.html#ad146fa8579a5f8a876c4688cc5a68520">toString</a> ()</td></tr>
<tr class="memdesc:ad146fa8579a5f8a876c4688cc5a68520"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a string representation of this runner for debugging purpose.  <a href="#ad146fa8579a5f8a876c4688cc5a68520">More...</a><br /></td></tr>
<tr class="separator:ad146fa8579a5f8a876c4688cc5a68520"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a969fa1b1e9090bc9ef66fa246f5b7ac5"><td class="memItemLeft" align="right" valign="top">static final char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07251.html#a969fa1b1e9090bc9ef66fa246f5b7ac5">END_OF_STATEMENT</a> = ';'</td></tr>
<tr class="memdesc:a969fa1b1e9090bc9ef66fa246f5b7ac5"><td class="mdescLeft">&#160;</td><td class="mdescRight">The character at the end of statements.  <a href="#a969fa1b1e9090bc9ef66fa246f5b7ac5">More...</a><br /></td></tr>
<tr class="separator:a969fa1b1e9090bc9ef66fa246f5b7ac5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abda6dfa583d13a2de4723e1a42222318"><td class="memItemLeft" align="right" valign="top">static final char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07251.html#abda6dfa583d13a2de4723e1a42222318">QUOTE</a> = '\''</td></tr>
<tr class="memdesc:abda6dfa583d13a2de4723e1a42222318"><td class="mdescLeft">&#160;</td><td class="mdescRight">The quote character expected to be found in the SQL script.  <a href="#abda6dfa583d13a2de4723e1a42222318">More...</a><br /></td></tr>
<tr class="separator:abda6dfa583d13a2de4723e1a42222318"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96a992a14ce189a9b7de2e55b4db3ef2"><td class="memItemLeft" align="right" valign="top">static final char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07251.html#a96a992a14ce189a9b7de2e55b4db3ef2">IDENTIFIER_QUOTE</a> = '&quot;'</td></tr>
<tr class="memdesc:a96a992a14ce189a9b7de2e55b4db3ef2"><td class="mdescLeft">&#160;</td><td class="mdescRight">The quote character for identifiers expected to be found in the SQL script.  <a href="#a96a992a14ce189a9b7de2e55b4db3ef2">More...</a><br /></td></tr>
<tr class="separator:a96a992a14ce189a9b7de2e55b4db3ef2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a2e1ffb65aa740ea03dd611cd2898c728"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07239.html#a2e1ffb65aa740ea03dd611cd2898c728">execute</a> (final StringBuilder sb)  throws SQLException, IOException </td></tr>
<tr class="memdesc:a2e1ffb65aa740ea03dd611cd2898c728"><td class="mdescLeft">&#160;</td><td class="mdescRight">execute SQL code.  <a href="#a2e1ffb65aa740ea03dd611cd2898c728">More...</a><br /></td></tr>
<tr class="separator:a2e1ffb65aa740ea03dd611cd2898c728"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe00cdf87aed55bbe5ef191c248b62b1"><td class="memItemLeft" align="right" valign="top">Connection&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07251.html#abe00cdf87aed55bbe5ef191c248b62b1">getConnection</a> ()  throws SQLException </td></tr>
<tr class="memdesc:abe00cdf87aed55bbe5ef191c248b62b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the connection.  <a href="#abe00cdf87aed55bbe5ef191c248b62b1">More...</a><br /></td></tr>
<tr class="separator:abe00cdf87aed55bbe5ef191c248b62b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cc0e8ba536dbb6ca74b7dfae2ec8863"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07251.html#a5cc0e8ba536dbb6ca74b7dfae2ec8863">selectVersion</a> (final String[] versions)</td></tr>
<tr class="memdesc:a5cc0e8ba536dbb6ca74b7dfae2ec8863"><td class="mdescLeft">&#160;</td><td class="mdescRight">If there is many versions of the SQL script, select the version to run.  <a href="#a5cc0e8ba536dbb6ca74b7dfae2ec8863">More...</a><br /></td></tr>
<tr class="separator:a5cc0e8ba536dbb6ca74b7dfae2ec8863"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a3dce6165371128e8b36d23d1065cc63e"><td class="memItemLeft" align="right" valign="top">final String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07251.html#a3dce6165371128e8b36d23d1065cc63e">identifierQuote</a></td></tr>
<tr class="memdesc:a3dce6165371128e8b36d23d1065cc63e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The quote character for identifiers actually used in the database.  <a href="#a3dce6165371128e8b36d23d1065cc63e">More...</a><br /></td></tr>
<tr class="separator:a3dce6165371128e8b36d23d1065cc63e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34f194361f67b4fb08bca6fea2776312"><td class="memItemLeft" align="right" valign="top">final List&lt; String &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07251.html#a34f194361f67b4fb08bca6fea2776312">suffixes</a> = new ArrayList&lt;&gt;()</td></tr>
<tr class="memdesc:a34f194361f67b4fb08bca6fea2776312"><td class="mdescLeft">&#160;</td><td class="mdescRight">The expected variable part of suffixes in files, in the order to be run.  <a href="#a34f194361f67b4fb08bca6fea2776312">More...</a><br /></td></tr>
<tr class="separator:a34f194361f67b4fb08bca6fea2776312"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21a78630e73fdc5217cc5f91ad526605"><td class="memItemLeft" align="right" valign="top">final <a class="el" href="a07243.html">Dialect</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07251.html#a21a78630e73fdc5217cc5f91ad526605">dialect</a></td></tr>
<tr class="memdesc:a21a78630e73fdc5217cc5f91ad526605"><td class="mdescLeft">&#160;</td><td class="mdescRight">The presumed dialect spoken by the database.  <a href="#a21a78630e73fdc5217cc5f91ad526605">More...</a><br /></td></tr>
<tr class="separator:a21a78630e73fdc5217cc5f91ad526605"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dbc68fcb6d181e6821ddfdc5faa1e1c"><td class="memItemLeft" align="right" valign="top">final Map&lt; String, String &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07251.html#a2dbc68fcb6d181e6821ddfdc5faa1e1c">replacements</a> = new HashMap&lt;&gt;()</td></tr>
<tr class="memdesc:a2dbc68fcb6d181e6821ddfdc5faa1e1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">A mapping of words to replace.  <a href="#a2dbc68fcb6d181e6821ddfdc5faa1e1c">More...</a><br /></td></tr>
<tr class="separator:a2dbc68fcb6d181e6821ddfdc5faa1e1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pac-methods"></a>
Package Functions</h2></td></tr>
<tr class="memitem:a77d33783552b0eace1bff508290d2b2e"><td class="memItemLeft" align="right" valign="top">final int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07251.html#a77d33783552b0eace1bff508290d2b2e">run</a> (final File directory, String[] files)  throws IOException, SQLException </td></tr>
<tr class="memdesc:a77d33783552b0eace1bff508290d2b2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runs the SQL scripts read from the given files in the given directory.  <a href="#a77d33783552b0eace1bff508290d2b2e">More...</a><br /></td></tr>
<tr class="separator:a77d33783552b0eace1bff508290d2b2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb4f09c4ed9eede81436829d3852c307"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07251.html#acb4f09c4ed9eede81436829d3852c307">runFile</a> (final File file)  throws IOException, SQLException </td></tr>
<tr class="memdesc:acb4f09c4ed9eede81436829d3852c307"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the SQL script from a single file.  <a href="#acb4f09c4ed9eede81436829d3852c307">More...</a><br /></td></tr>
<tr class="separator:acb4f09c4ed9eede81436829d3852c307"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>An sql script runner replacing the boolean used in postgres by small Interger used by derby. </p>
<dl class="section author"><dt>Author</dt><dd>Guilhem Legal (Geomatys) </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aca2d6500401883c1cd33c9eea8532f85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca2d6500401883c1cd33c9eea8532f85">&#9670;&nbsp;</a></span>DerbySqlScriptRunner()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a07239.html">DerbySqlScriptRunner</a> </td>
          <td>(</td>
          <td class="paramtype">final Connection&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td> throws SQLException</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;                                                                        {</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        super(c);</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a838ed6f0e3e1ad09e78e1e37229d744e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a838ed6f0e3e1ad09e78e1e37229d744e">&#9670;&nbsp;</a></span>accept()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boolean accept </td>
          <td>(</td>
          <td class="paramtype">final File&#160;</td>
          <td class="paramname"><em>directory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final String&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns. </p>
<div class="fragment"><div class="line"><span class="keyword">true</span> </div></div><!-- fragment --><p> if the file of the given name is a SQL script. The default implementation returns</p><div class="fragment"><div class="line"><span class="keyword">true</span> </div></div><!-- fragment --><p> if the filename ends with the</p><div class="fragment"><div class="line"><span class="stringliteral">&quot;.sql&quot;</span> </div></div><!-- fragment --><p> extension and if it does not start with</p><div class="fragment"><div class="line"><span class="stringliteral">&quot;.&quot;</span> </div></div><!-- fragment --><p> (which is for hidden files on Unix system). </p>
<p>Subclasses can override this method if they need to filter the files differently.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">directory</td><td>The directory that contains the file, or<div class="fragment"><div class="line">null </div></div><!-- fragment --> if none (for example if the file is an entry in a ZIP file). </td></tr>
    <tr><td class="paramname">name</td><td>The name of the file to test. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><div class="fragment"><div class="line"><span class="keyword">true</span> </div></div><!-- fragment --> if a file of the given name is likely to be a SQL script. </dd></dl>
<div class="fragment"><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                                                                   {</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">int</span> e = name.lastIndexOf(<span class="charliteral">&#39;.&#39;</span>);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <span class="keywordflow">return</span> (e &gt; 0) &amp;&amp; (name.charAt(0) != <span class="charliteral">&#39;.&#39;</span>) &amp;&amp; name.regionMatches(<span class="keyword">true</span>, e+1, <span class="stringliteral">&quot;sql&quot;</span>, 0, 3);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="a8a2a810d6b1e96f8037d6ce5a637ac99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a2a810d6b1e96f8037d6ce5a637ac99">&#9670;&nbsp;</a></span>close()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void close </td>
          <td>(</td>
          <td class="paramtype">final boolean&#160;</td>
          <td class="paramname"><em>vacuum</em></td><td>)</td>
          <td> throws SQLException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Closes the statement used by this runner. </p>
<p>Note that this method does not close the connection given to the constructor; this connection still needs to be closed explicitly by the caller. </p>
<p>This method does not shutdown the database. For database shutdown, see driver-specific methods like <a class="el" href="">HSQL#shutdown(Connection, boolean)</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vacuum</td><td></td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                                                                {</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="a07251.html#ac4eabe349c40424717d7746855d667c7">statement</a> != null) {</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            <span class="keywordflow">switch</span> (<a class="code" href="a07251.html#a21a78630e73fdc5217cc5f91ad526605">dialect</a>) {</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                <span class="keywordflow">case</span> POSTGRESQL: {</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                    <span class="keywordflow">if</span> (vacuum) {</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                        <a class="code" href="a07251.html#ac4eabe349c40424717d7746855d667c7">statement</a>.executeUpdate(<span class="stringliteral">&quot;VACUUM FULL ANALYZE&quot;</span>);</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                    }</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                }</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            }</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            <a class="code" href="a07251.html#ac4eabe349c40424717d7746855d667c7">statement</a>.close();</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        }</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    }</div><div class="ttc" id="a07251_html_a21a78630e73fdc5217cc5f91ad526605"><div class="ttname"><a href="a07251.html#a21a78630e73fdc5217cc5f91ad526605">org.geotoolkit.internal.sql.ScriptRunner.dialect</a></div><div class="ttdeci">final Dialect dialect</div><div class="ttdoc">The presumed dialect spoken by the database. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:125</div></div>
<div class="ttc" id="a07251_html_ac4eabe349c40424717d7746855d667c7"><div class="ttname"><a href="a07251.html#ac4eabe349c40424717d7746855d667c7">org.geotoolkit.internal.sql.ScriptRunner.statement</a></div><div class="ttdeci">final Statement statement</div><div class="ttdoc">The statement created from a connection to the database. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:143</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2e1ffb65aa740ea03dd611cd2898c728"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e1ffb65aa740ea03dd611cd2898c728">&#9670;&nbsp;</a></span>execute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int execute </td>
          <td>(</td>
          <td class="paramtype">final StringBuilder&#160;</td>
          <td class="paramname"><em>sb</em></td><td>)</td>
          <td> throws SQLException, IOException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>execute SQL code. </p>
<p>escape the postgres specific operation and replace the boolean by small int.</p>
<p>the code of this method must be review.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sb</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">SQLException</td><td></td></tr>
    <tr><td class="paramname">IOException</td><td></td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                                                                                   {</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        String query = sb.toString();</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">         * we transform the boolean value in smallint value</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        query        = query.replace(<span class="stringliteral">&quot;&#39;false&#39;&quot;</span>, <span class="stringliteral">&quot;&#39;FALSE&#39;&quot;</span>);</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        query        = query.replace(<span class="stringliteral">&quot;&#39;true&#39;&quot;</span>, <span class="stringliteral">&quot;&#39;TRUE&#39;&quot;</span>);</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <span class="comment">// use a regex to replace the 2 line above</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        query        = query.replace(<span class="stringliteral">&quot;false&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        query        = query.replace(<span class="stringliteral">&quot;true&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        <span class="comment">// remove the 2 line under</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        query        = query.replace(<span class="stringliteral">&quot;&#39;FALSE&#39;&quot;</span>, <span class="stringliteral">&quot;&#39;false&#39;&quot;</span>);</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        query        = query.replace(<span class="stringliteral">&quot;&#39;TRUE&#39;&quot;</span>, <span class="stringliteral">&quot;&#39;true&#39;&quot;</span>);</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">         * we transform the boolean column in smallint one</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        query        = query.replace(<span class="stringliteral">&quot;boolean&quot;</span>, <span class="stringliteral">&quot;smallint&quot;</span>);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">         * we remove the sequence part in column</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="keywordflow">if</span> (query.contains(<span class="stringliteral">&quot;nextval(&quot;</span>)) {</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            query = query.replaceAll(<span class="stringliteral">&quot;DEFAULT nextval\\(.*regclass\\)&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        }</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">         * timestamp type can not be without timezone</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        query = query.replace(<span class="stringliteral">&quot;timestamp without time zone&quot;</span>, <span class="stringliteral">&quot;timestamp&quot;</span>);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">         * Postgis type does not work with derby</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">         * This is a dirty hack</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        query = query.replace(<span class="stringliteral">&quot;postgis.geometry&quot;</span>, <span class="stringliteral">&quot;character varying(40)&quot;</span>);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="keywordflow">if</span> (!query.startsWith(<span class="stringliteral">&quot;SET check_function_bodies&quot;</span>)</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                &amp;&amp; !query.startsWith(<span class="stringliteral">&quot;SET client_min_messages&quot;</span>)</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                &amp;&amp; !query.startsWith(<span class="stringliteral">&quot;SET search_path&quot;</span>)</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                &amp;&amp; !query.startsWith(<span class="stringliteral">&quot;SET client_encoding&quot;</span>)</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                &amp;&amp; !query.startsWith(<span class="stringliteral">&quot;SET standard_conforming_strings&quot;</span>)</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                &amp;&amp; !query.startsWith(<span class="stringliteral">&quot;SET escape_string_warning&quot;</span>)</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                &amp;&amp; !query.startsWith(<span class="stringliteral">&quot;SET default_tablespace&quot;</span>)</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                &amp;&amp; !query.startsWith(<span class="stringliteral">&quot;SET default_with_oids&quot;</span>)</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                &amp;&amp; !query.startsWith(<span class="stringliteral">&quot;CREATE INDEX&quot;</span>)</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                &amp;&amp; !query.startsWith(<span class="stringliteral">&quot;SELECT pg_catalog.setval&quot;</span>)</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                &amp;&amp; !<span class="stringliteral">&quot;&quot;</span>.equals(query)) {</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            <span class="keywordflow">try</span> {</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                <span class="keywordflow">return</span> super.execute(<span class="keyword">new</span> StringBuilder(query));</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            } <span class="keywordflow">catch</span> (SQLException ex) {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                Logger.getAnonymousLogger().warning(<span class="stringliteral">&quot;SQL exception while executing:&quot;</span> + query);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                <span class="keywordflow">throw</span> ex;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            }</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        }</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="abe00cdf87aed55bbe5ef191c248b62b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe00cdf87aed55bbe5ef191c248b62b1">&#9670;&nbsp;</a></span>getConnection()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Connection getConnection </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws SQLException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the connection. </p>
<dl class="section return"><dt>Returns</dt><dd>The connection, or<div class="fragment"><div class="line">null </div></div><!-- fragment --> if none. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">SQLException</td><td>If the connection can not be obtained.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>3.11 </dd></dl>
<div class="fragment"><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                                                             {</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordflow">return</span> (<a class="code" href="a07251.html#ac4eabe349c40424717d7746855d667c7">statement</a> != null) ? <a class="code" href="a07251.html#ac4eabe349c40424717d7746855d667c7">statement</a>.getConnection() : null;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    }</div><div class="ttc" id="a07251_html_ac4eabe349c40424717d7746855d667c7"><div class="ttname"><a href="a07251.html#ac4eabe349c40424717d7746855d667c7">org.geotoolkit.internal.sql.ScriptRunner.statement</a></div><div class="ttdeci">final Statement statement</div><div class="ttdoc">The statement created from a connection to the database. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:143</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a08e1a85198eaf6487c6f5f8919d2102f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08e1a85198eaf6487c6f5f8919d2102f">&#9670;&nbsp;</a></span>getCurrentPosition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">String getCurrentPosition </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the current position (current file and current line in that file). </p>
<p>The returned string may also contains the SQL statement under execution. The main purpose of this method is to provides informations on the position where an exception occurred.</p>
<dl class="section return"><dt>Returns</dt><dd>A string representation of the current position. </dd></dl>

<p class="reference">References <a class="el" href="a07847.html#af16a7f1fb8bc237e818fa41eb3819638">Vocabulary.Keys.FilePosition_2</a>, and <a class="el" href="a07843.html#a6a28bf4ed15b946061619d84a67eefdc">Vocabulary.format()</a>.</p>
<div class="fragment"><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                                       {</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        String position = null;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="a07251.html#aa10ee8e0b4a350bef1841cf2b66178c1">currentFile</a> != null) {</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;            position = Vocabulary.format(Vocabulary.Keys.FilePosition_2, <a class="code" href="a07251.html#aa10ee8e0b4a350bef1841cf2b66178c1">currentFile</a>, <a class="code" href="a07251.html#a163792de4399a947d8e9d3bb15f7af41">currentLine</a>);</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        }</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="a07251.html#ad1a94c63f40e1fa0aca253ba6b578535">currentSQL</a> != null) {</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            <span class="keyword">final</span> StringBuilder buffer = <span class="keyword">new</span> StringBuilder();</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            <span class="keywordflow">if</span> (position != null) {</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                buffer.append(position).append(<span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            }</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            position = buffer.append(<span class="stringliteral">&quot;SQL: &quot;</span>).append(<a class="code" href="a07251.html#ad1a94c63f40e1fa0aca253ba6b578535">currentSQL</a>).toString();</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        }</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <span class="keywordflow">return</span> position;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    }</div><div class="ttc" id="a07251_html_ad1a94c63f40e1fa0aca253ba6b578535"><div class="ttname"><a href="a07251.html#ad1a94c63f40e1fa0aca253ba6b578535">org.geotoolkit.internal.sql.ScriptRunner.currentSQL</a></div><div class="ttdeci">String currentSQL</div><div class="ttdoc">The SQL statement being executed. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:159</div></div>
<div class="ttc" id="a07251_html_a163792de4399a947d8e9d3bb15f7af41"><div class="ttname"><a href="a07251.html#a163792de4399a947d8e9d3bb15f7af41">org.geotoolkit.internal.sql.ScriptRunner.currentLine</a></div><div class="ttdeci">int currentLine</div><div class="ttdoc">The line number being executed. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:154</div></div>
<div class="ttc" id="a07251_html_aa10ee8e0b4a350bef1841cf2b66178c1"><div class="ttname"><a href="a07251.html#aa10ee8e0b4a350bef1841cf2b66178c1">org.geotoolkit.internal.sql.ScriptRunner.currentFile</a></div><div class="ttdeci">File currentFile</div><div class="ttdoc">The file being read. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:148</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad3f7068c7ccd4c7bb1873b752cf24486"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3f7068c7ccd4c7bb1873b752cf24486">&#9670;&nbsp;</a></span>getEncoding()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">String getEncoding </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the encoding of SQL scripts, or. </p>
<div class="fragment"><div class="line">null </div></div><!-- fragment --><p> for the platform default. The default value is</p><div class="fragment"><div class="line">null </div></div><!-- fragment --><p> .</p>
<dl class="section return"><dt>Returns</dt><dd>The encoding of SQL scripts. </dd></dl>

<p class="reference">References <a class="el" href="a07251.html#a5f709a89d356e1ebbab5325f22368f38">ScriptRunner.encoding</a>.</p>
<div class="fragment"><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                                {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="a07251.html#a5f709a89d356e1ebbab5325f22368f38">encoding</a>;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    }</div><div class="ttc" id="a07251_html_a5f709a89d356e1ebbab5325f22368f38"><div class="ttname"><a href="a07251.html#a5f709a89d356e1ebbab5325f22368f38">org.geotoolkit.internal.sql.ScriptRunner.encoding</a></div><div class="ttdeci">String encoding</div><div class="ttdoc">The encoding of SQL scripts, or. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:104</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a92338667c69a471901b2617e638b7655"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92338667c69a471901b2617e638b7655">&#9670;&nbsp;</a></span>run() <span class="overload">[1/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int run </td>
          <td>(</td>
          <td class="paramtype">final File&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td> throws IOException, SQLException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Run the SQL script read from the given file or directory. </p>
<p>If the argument is a file, then it is read directly using the  <a class="el" href="a07251.html#ad3f7068c7ccd4c7bb1873b752cf24486" title="Returns the encoding of SQL scripts, or. ">getEncoding()</a> current encoding}. Otherwise if it is a directory, then the directory content is read and filtered by the <a class="el" href="a07251.html#a838ed6f0e3e1ad09e78e1e37229d744e">accept</a> method.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>The file or directory of the script(s) to run. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of rows added or modified as a result of the script(s) execution. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IOException</td><td>If an error occurred while reading the input. </td></tr>
    <tr><td class="paramname">SQLException</td><td>If an error occurred while executing a SQL statement. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="a07251.html#acb4f09c4ed9eede81436829d3852c307">ScriptRunner.runFile()</a>.</p>

<p class="reference">Referenced by <a class="el" href="a07251.html#a13a94624b21179dd03fde73b6f3be2bf">ScriptRunner.run()</a>, and <a class="el" href="a07251.html#acb4f09c4ed9eede81436829d3852c307">ScriptRunner.runFile()</a>.</p>
<div class="fragment"><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                                                                     {</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keywordflow">if</span> (file.isDirectory()) {</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="a07251.html#a92338667c69a471901b2617e638b7655">run</a>(file, file.list(<span class="keyword">this</span>));</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="a07251.html#acb4f09c4ed9eede81436829d3852c307">runFile</a>(file);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        }</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    }</div><div class="ttc" id="a07251_html_a92338667c69a471901b2617e638b7655"><div class="ttname"><a href="a07251.html#a92338667c69a471901b2617e638b7655">org.geotoolkit.internal.sql.ScriptRunner.run</a></div><div class="ttdeci">int run(final File file)</div><div class="ttdoc">Run the SQL script read from the given file or directory. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:243</div></div>
<div class="ttc" id="a07251_html_acb4f09c4ed9eede81436829d3852c307"><div class="ttname"><a href="a07251.html#acb4f09c4ed9eede81436829d3852c307">org.geotoolkit.internal.sql.ScriptRunner.runFile</a></div><div class="ttdeci">int runFile(final File file)</div><div class="ttdoc">Run the SQL script from a single file. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:336</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a77d33783552b0eace1bff508290d2b2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77d33783552b0eace1bff508290d2b2e">&#9670;&nbsp;</a></span>run() <span class="overload">[2/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final int run </td>
          <td>(</td>
          <td class="paramtype">final File&#160;</td>
          <td class="paramname"><em>directory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String []&#160;</td>
          <td class="paramname"><em>files</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws IOException, SQLException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">package</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Runs the SQL scripts read from the given files in the given directory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">directory</td><td>The directory of the script(s) to run. </td></tr>
    <tr><td class="paramname">files</td><td>The filename of the script(s) to run in the above directory. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of rows added or modified as a result of the script(s) execution. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IOException</td><td>If an error occurred while reading the input. </td></tr>
    <tr><td class="paramname">SQLException</td><td>If an error occurred while executing a SQL statement. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="a07251.html#acb4f09c4ed9eede81436829d3852c307">ScriptRunner.runFile()</a>, and <a class="el" href="a07251.html#a5cc0e8ba536dbb6ca74b7dfae2ec8863">ScriptRunner.selectVersion()</a>.</p>
<div class="fragment"><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                                                                                         {</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="keywordflow">if</span> (files.length == 0) {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        }</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">         * Find the prefix and suffix that are common to every files.</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        String prefix = null, suffix = null;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">final</span> String file : files) {</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            prefix = CharSequences.commonPrefix(prefix, file).toString();</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            suffix = CharSequences.commonSuffix(suffix, file).toString();</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        }</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">int</span> pl = prefix.length();</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">int</span> sl = suffix.length();</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">         * Assuming that the part between the prefix and suffix contains the version number,</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">         * get the version of every files. We will then select one version, by default the</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">         * one having the highest major/minor version numbers.</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keyword">final</span> Set&lt;String&gt; uniques = <span class="keyword">new</span> LinkedHashSet&lt;&gt;();</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="keyword">final</span> Map&lt;String,Integer&gt; order = <span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="keyword">final</span> String[] versions = <span class="keyword">new</span> String[files.length];</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;files.length; i++) {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            <span class="keyword">final</span> String file = files[i];</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            String version = file.substring(pl, file.length() - sl);</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            <span class="keyword">final</span> <span class="keywordtype">int</span> size = <a class="code" href="a07251.html#a34f194361f67b4fb08bca6fea2776312">suffixes</a>.size();</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;size; j++) {</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                <span class="keyword">final</span> String s = <a class="code" href="a07251.html#a34f194361f67b4fb08bca6fea2776312">suffixes</a>.get(j);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                <span class="keywordflow">if</span> (version.endsWith(s)) {</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                    version = version.substring(0, version.length() - s.length());</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                    order.put(file, j);</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                }</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            }</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            versions[i] = version;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            uniques.add(version);</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        }</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="keyword">final</span> String select = <a class="code" href="a07251.html#a5cc0e8ba536dbb6ca74b7dfae2ec8863">selectVersion</a>(uniques.toArray(<span class="keyword">new</span> String[uniques.size()]));</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">         * Filters the files, keeping only those having the expected version number.</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">         * Then sorts those files in the order declared in the suffixes list.</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="keywordtype">int</span> count = 0;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;files.length; i++) {</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            <span class="keywordflow">if</span> (select.equals(versions[i])) {</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                files[count++] = files[i];</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            }</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        }</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        files = ArraysExt.resize(files, count);</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        Arrays.sort(files, <span class="keyword">new</span> Comparator&lt;String&gt;() {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            @Override <span class="keyword">public</span> <span class="keywordtype">int</span> compare(<span class="keyword">final</span> String o1, <span class="keyword">final</span> String o2) {</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                <span class="keyword">final</span> Integer i1 = order.get(o1);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                <span class="keyword">final</span> Integer i2 = order.get(o2);</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                <span class="keywordflow">if</span> (i1 == null) <span class="keywordflow">return</span> +1;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                <span class="keywordflow">if</span> (i2 == null) <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                <span class="keywordflow">return</span> i1 - i2;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            }</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        });</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment">         * Now run the selected files.</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        count = 0;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">final</span> String file : files) {</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            count += <a class="code" href="a07251.html#acb4f09c4ed9eede81436829d3852c307">runFile</a>(<span class="keyword">new</span> File(directory, file));</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        }</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="keywordflow">return</span> count;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    }</div><div class="ttc" id="a07251_html_a34f194361f67b4fb08bca6fea2776312"><div class="ttname"><a href="a07251.html#a34f194361f67b4fb08bca6fea2776312">org.geotoolkit.internal.sql.ScriptRunner.suffixes</a></div><div class="ttdeci">final List&lt; String &gt; suffixes</div><div class="ttdoc">The expected variable part of suffixes in files, in the order to be run. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:120</div></div>
<div class="ttc" id="a07251_html_a5cc0e8ba536dbb6ca74b7dfae2ec8863"><div class="ttname"><a href="a07251.html#a5cc0e8ba536dbb6ca74b7dfae2ec8863">org.geotoolkit.internal.sql.ScriptRunner.selectVersion</a></div><div class="ttdeci">String selectVersion(final String[] versions)</div><div class="ttdoc">If there is many versions of the SQL script, select the version to run. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:552</div></div>
<div class="ttc" id="a07251_html_acb4f09c4ed9eede81436829d3852c307"><div class="ttname"><a href="a07251.html#acb4f09c4ed9eede81436829d3852c307">org.geotoolkit.internal.sql.ScriptRunner.runFile</a></div><div class="ttdeci">int runFile(final File file)</div><div class="ttdoc">Run the SQL script from a single file. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:336</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a13a94624b21179dd03fde73b6f3be2bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13a94624b21179dd03fde73b6f3be2bf">&#9670;&nbsp;</a></span>run() <span class="overload">[3/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final int run </td>
          <td>(</td>
          <td class="paramtype">final InputStream&#160;</td>
          <td class="paramname"><em>in</em></td><td>)</td>
          <td> throws IOException, SQLException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Run the script from the given input stream. </p>
<p>Lines are read and grouped up to the terminal { <a class="el" href="a07251.html#a969fa1b1e9090bc9ef66fa246f5b7ac5" title="The character at the end of statements. ">END_OF_STATEMENT</a>} character, then sent to the database.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in</td><td>The stream to read. <b>This stream will be closed</b> at the end. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of rows added or modified as a result of the script execution. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IOException</td><td>If an error occurred while reading the input. </td></tr>
    <tr><td class="paramname">SQLException</td><td>If an error occurred while executing a SQL statement. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="a07251.html#a92338667c69a471901b2617e638b7655">ScriptRunner.run()</a>.</p>
<div class="fragment"><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                                                                                {</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <span class="keyword">final</span> Reader reader;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="a07251.html#a5f709a89d356e1ebbab5325f22368f38">encoding</a> == null) {</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            reader = <span class="keyword">new</span> InputStreamReader(in);</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            reader = <span class="keyword">new</span> InputStreamReader(in, <a class="code" href="a07251.html#a5f709a89d356e1ebbab5325f22368f38">encoding</a>);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        }</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="keywordflow">try</span> (LineNumberReader lr = <span class="keyword">new</span> LineNumberReader(reader)) {</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="a07251.html#a92338667c69a471901b2617e638b7655">run</a>(lr);</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        }</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    }</div><div class="ttc" id="a07251_html_a92338667c69a471901b2617e638b7655"><div class="ttname"><a href="a07251.html#a92338667c69a471901b2617e638b7655">org.geotoolkit.internal.sql.ScriptRunner.run</a></div><div class="ttdeci">int run(final File file)</div><div class="ttdoc">Run the SQL script read from the given file or directory. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:243</div></div>
<div class="ttc" id="a07251_html_a5f709a89d356e1ebbab5325f22368f38"><div class="ttname"><a href="a07251.html#a5f709a89d356e1ebbab5325f22368f38">org.geotoolkit.internal.sql.ScriptRunner.encoding</a></div><div class="ttdeci">String encoding</div><div class="ttdoc">The encoding of SQL scripts, or. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:104</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4f24d985af73b36eb53b6018059bf122"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f24d985af73b36eb53b6018059bf122">&#9670;&nbsp;</a></span>run() <span class="overload">[4/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final int run </td>
          <td>(</td>
          <td class="paramtype">final LineNumberReader&#160;</td>
          <td class="paramname"><em>in</em></td><td>)</td>
          <td> throws IOException, SQLException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Run the script from the given reader. </p>
<p>Lines are read and grouped up to the terminal { <a class="el" href="a07251.html#a969fa1b1e9090bc9ef66fa246f5b7ac5" title="The character at the end of statements. ">END_OF_STATEMENT</a>} character, then sent to the database.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in</td><td>The stream to read. <b>This stream will be closed</b> at the end. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of rows added or modified as a result of the script execution. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IOException</td><td>If an error occurred while reading the input. </td></tr>
    <tr><td class="paramname">SQLException</td><td>If an error occurred while executing a SQL statement. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="a07251.html#a969fa1b1e9090bc9ef66fa246f5b7ac5">ScriptRunner.END_OF_STATEMENT</a>, <a class="el" href="a07251.html#a10fcdb0c062149a3af8ec005dea56e21">ScriptRunner.execute()</a>, <a class="el" href="a07823.html#a6a28bf4ed15b946061619d84a67eefdc">Errors.format()</a>, <a class="el" href="a07251.html#a96a992a14ce189a9b7de2e55b4db3ef2">ScriptRunner.IDENTIFIER_QUOTE</a>, <a class="el" href="a07827.html#ab743acbdab27da634083b2cbeb225fb2">Errors.Keys.MissingCharacter_1</a>, and <a class="el" href="a07251.html#abda6dfa583d13a2de4723e1a42222318">ScriptRunner.QUOTE</a>.</p>
<div class="fragment"><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                                                                                     {</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="comment">// Determine once for ever if it is worth to look for SQL keyword replacements,</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="comment">// and if we need to take the trouble to look two words ahead (e.g. &quot;CREATE TABLE&quot;).</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">boolean</span> noReplace = <a class="code" href="a07251.html#a2dbc68fcb6d181e6821ddfdc5faa1e1c">replacements</a>.isEmpty();</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="keywordtype">boolean</span> replaceTwoWords = <span class="keyword">false</span>;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">final</span> String replace : <a class="code" href="a07251.html#a2dbc68fcb6d181e6821ddfdc5faa1e1c">replacements</a>.keySet()) {</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            <span class="keywordflow">if</span> (replace.indexOf(<span class="charliteral">&#39; &#39;</span>) &gt;= 0) {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                replaceTwoWords = <span class="keyword">true</span>;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            }</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        }</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="comment">// Variables which will change during the iterations.</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="keywordtype">int</span> count = 0;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <span class="keyword">final</span> StringBuilder buffer = <span class="keyword">new</span> StringBuilder();</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        String line;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <span class="keywordtype">boolean</span> insideText = <span class="keyword">false</span>;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="keywordtype">boolean</span> insideIdentifier = <span class="keyword">false</span>;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <span class="keywordflow">while</span> ((line = in.readLine()) != null) {</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            <span class="keywordtype">int</span> i = buffer.length();</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            <span class="keywordflow">if</span> (i == 0) {</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                <span class="keyword">final</span> String trimed = line.trim();</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                <span class="keywordflow">if</span> (trimed.isEmpty() || trimed.startsWith(<a class="code" href="a07251.html#a8b20b63ad84ba7f8d079f37497704092">COMMENT</a>)) {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                    <span class="comment">// Ignore empty lines and comment lines, but only if they appear before any</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                    <span class="comment">// other kind of line (i.e. before the begining of the real SQL statement).</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                    <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                }</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                <a class="code" href="a07251.html#a163792de4399a947d8e9d3bb15f7af41">currentLine</a> = in.getLineNumber();</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                i++;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                buffer.append(<span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            }</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment">             * If we find the &quot;$$&quot; string, copy verbatism (without any attempt to parse the</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment">             * lines) until the next occurrence of &quot;$$&quot;. This simple algorithm does not allow</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">             * more than one block of &quot;$$ ... $$&quot; on the same line.</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">final</span> String escape : <a class="code" href="a07251.html#ab41997020d34e2068f478a899fd7c2df">ESCAPES</a>) {</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                <span class="keywordtype">int</span> pos = line.indexOf(escape);</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                <span class="keywordflow">if</span> (pos &gt;= 0) {</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                    pos += escape.length();</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                    <span class="keywordflow">while</span> ((pos = line.indexOf(escape, pos)) &lt; 0) {</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                        buffer.append(line).append(<span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                        line = in.readLine();</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                        <span class="keywordflow">if</span> (line == null) {</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                            <span class="keywordflow">throw</span> <span class="keyword">new</span> EOFException();</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                        }</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                        pos = 0;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                    }</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                    pos += escape.length();</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                    buffer.append(line.substring(0, pos));</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                    i = buffer.length(); <span class="comment">// Will resume the parsing from that position.</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                    line = line.substring(pos);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                }</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            }</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            buffer.append(line);</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            <span class="keywordtype">int</span> length = buffer.length();</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;scanLine:   <span class="keywordflow">for</span> (; i&lt;length; i++) {</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                <span class="keyword">final</span> <span class="keywordtype">char</span> c = buffer.charAt(i);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                <span class="keywordflow">switch</span> (c) {</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                    <span class="comment">/*</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment">                     * Found a character for an identifier like &quot;Coordinate Operations&quot;.</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">                     * Check if we have found the opening or the closing character. Then</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">                     * replace the standard quote character by the database-specific one.</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">                     */</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="a07251.html#a96a992a14ce189a9b7de2e55b4db3ef2">IDENTIFIER_QUOTE</a>: {</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                        <span class="keywordflow">if</span> (!insideText) {</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                            insideIdentifier = !insideIdentifier;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                            buffer.replace(i, i+1, <a class="code" href="a07251.html#a3dce6165371128e8b36d23d1065cc63e">identifierQuote</a>);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                            i += <a class="code" href="a07251.html#a3dce6165371128e8b36d23d1065cc63e">identifierQuote</a>.length() - 1;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                        }</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                    }</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                    <span class="comment">/*</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment">                     * Found a character for a text like &#39;This is a value&#39;. Check if we have</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">                     * found the opening or closing character, ignoring the &#39;&#39; escape sequence.</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">                     */</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="a07251.html#abda6dfa583d13a2de4723e1a42222318">QUOTE</a>: {</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                        <span class="keywordflow">if</span> (!insideIdentifier) {</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                            <span class="keywordflow">if</span> (!insideText) {</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                                insideText = <span class="keyword">true</span>;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i+1 == length || buffer.charAt(i+1) != <a class="code" href="a07251.html#abda6dfa583d13a2de4723e1a42222318">QUOTE</a>) {</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                                insideText = <span class="keyword">false</span>;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                                <span class="comment">// Found a double &#39; character, which means to escape it.</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                                i++;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                            }</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                        }</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                    }</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                    <span class="comment">/*</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">                     * Found the end of statement. Remove that character if it is the last non-white</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">                     * character, since SQL statement in JDBC are not expected to contain it.</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">                     */</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="a07251.html#a969fa1b1e9090bc9ef66fa246f5b7ac5">END_OF_STATEMENT</a>: {</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                        <span class="keywordflow">if</span> (!insideText &amp;&amp; !insideIdentifier) {</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                            <span class="keywordtype">int</span> stop = i;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                            <span class="keywordflow">while</span> (++i &lt; length) {</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                                <span class="keywordflow">if</span> (!Character.isSpaceChar(buffer.charAt(i))) {</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                                    stop = length;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                                }</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                            }</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                            buffer.setLength(stop);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                            count += <a class="code" href="a07251.html#a10fcdb0c062149a3af8ec005dea56e21">execute</a>(buffer);</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                            buffer.setLength(0);</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                            <span class="keywordflow">break</span> scanLine;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                        }</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                    }</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                }</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                <span class="comment">/*</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment">                 * Any other kind of character. If we find the beginning of an identifier</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">                 * (arbitrarily assuming similar syntax than Java identifier rules), check</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">                 * for the end of the word and replace if needed.</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">                 */</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                <span class="keywordflow">if</span> (!noReplace &amp;&amp; !insideText &amp;&amp; !insideIdentifier &amp;&amp; Character.isJavaIdentifierStart(c)) {</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                    <span class="keyword">final</span> <span class="keywordtype">int</span> start = i;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                    <span class="keywordflow">while</span> (++i &lt; length &amp;&amp; Character.isJavaIdentifierPart(buffer.charAt(i)));</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                    String word = buffer.substring(start, i);</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                    String replace = <a class="code" href="a07251.html#a2dbc68fcb6d181e6821ddfdc5faa1e1c">replacements</a>.get(word);</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                    <span class="keywordflow">if</span> (replaceTwoWords &amp;&amp; replace == null &amp;&amp; i&lt;length &amp;&amp; Character.isSpaceChar(buffer.charAt(i))) {</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                        <span class="keyword">final</span> <span class="keywordtype">int</span> mark = i;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                        <span class="keywordflow">if</span> (++i &lt; length &amp;&amp; Character.isJavaIdentifierStart(buffer.charAt(i))) {</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                            <span class="keywordflow">while</span> (++i &lt; length &amp;&amp; Character.isJavaIdentifierPart(buffer.charAt(i)));</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                            word = buffer.substring(start, i);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                            replace = <a class="code" href="a07251.html#a2dbc68fcb6d181e6821ddfdc5faa1e1c">replacements</a>.get(word);</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                        }</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                        <span class="keywordflow">if</span> (replace == null) {</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                            i = mark;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                        }</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                    }</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                    <span class="keywordflow">if</span> (replace != null) {</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                        buffer.replace(start, i, replace);</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                        i = start + replace.length();</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                        length = buffer.length();</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                    }</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                    i--;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                }</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            }</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        }</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        in.close();</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        line = buffer.toString().trim();</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        <span class="keywordflow">if</span> (!line.isEmpty() &amp;&amp; !line.startsWith(<a class="code" href="a07251.html#a8b20b63ad84ba7f8d079f37497704092">COMMENT</a>)) {</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> EOFException(Errors.format(Errors.Keys.MissingCharacter_1, <a class="code" href="a07251.html#a969fa1b1e9090bc9ef66fa246f5b7ac5">END_OF_STATEMENT</a>));</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        }</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="keywordflow">return</span> count;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    }</div><div class="ttc" id="a07251_html_abda6dfa583d13a2de4723e1a42222318"><div class="ttname"><a href="a07251.html#abda6dfa583d13a2de4723e1a42222318">org.geotoolkit.internal.sql.ScriptRunner.QUOTE</a></div><div class="ttdeci">static final char QUOTE</div><div class="ttdoc">The quote character expected to be found in the SQL script. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:83</div></div>
<div class="ttc" id="a07251_html_a969fa1b1e9090bc9ef66fa246f5b7ac5"><div class="ttname"><a href="a07251.html#a969fa1b1e9090bc9ef66fa246f5b7ac5">org.geotoolkit.internal.sql.ScriptRunner.END_OF_STATEMENT</a></div><div class="ttdeci">static final char END_OF_STATEMENT</div><div class="ttdoc">The character at the end of statements. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:78</div></div>
<div class="ttc" id="a07251_html_a163792de4399a947d8e9d3bb15f7af41"><div class="ttname"><a href="a07251.html#a163792de4399a947d8e9d3bb15f7af41">org.geotoolkit.internal.sql.ScriptRunner.currentLine</a></div><div class="ttdeci">int currentLine</div><div class="ttdoc">The line number being executed. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:154</div></div>
<div class="ttc" id="a07251_html_a3dce6165371128e8b36d23d1065cc63e"><div class="ttname"><a href="a07251.html#a3dce6165371128e8b36d23d1065cc63e">org.geotoolkit.internal.sql.ScriptRunner.identifierQuote</a></div><div class="ttdeci">final String identifierQuote</div><div class="ttdoc">The quote character for identifiers actually used in the database. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:99</div></div>
<div class="ttc" id="a07251_html_a10fcdb0c062149a3af8ec005dea56e21"><div class="ttname"><a href="a07251.html#a10fcdb0c062149a3af8ec005dea56e21">org.geotoolkit.internal.sql.ScriptRunner.execute</a></div><div class="ttdeci">int execute(final StringBuilder sql)</div><div class="ttdoc">Executes the given SQL statement. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:589</div></div>
<div class="ttc" id="a07251_html_a96a992a14ce189a9b7de2e55b4db3ef2"><div class="ttname"><a href="a07251.html#a96a992a14ce189a9b7de2e55b4db3ef2">org.geotoolkit.internal.sql.ScriptRunner.IDENTIFIER_QUOTE</a></div><div class="ttdeci">static final char IDENTIFIER_QUOTE</div><div class="ttdoc">The quote character for identifiers expected to be found in the SQL script. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:88</div></div>
<div class="ttc" id="a07251_html_a8b20b63ad84ba7f8d079f37497704092"><div class="ttname"><a href="a07251.html#a8b20b63ad84ba7f8d079f37497704092">org.geotoolkit.internal.sql.ScriptRunner.COMMENT</a></div><div class="ttdeci">static final String COMMENT</div><div class="ttdoc">The sequence for SQL comments. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:73</div></div>
<div class="ttc" id="a07251_html_ab41997020d34e2068f478a899fd7c2df"><div class="ttname"><a href="a07251.html#ab41997020d34e2068f478a899fd7c2df">org.geotoolkit.internal.sql.ScriptRunner.ESCAPES</a></div><div class="ttdeci">static final String [] ESCAPES</div><div class="ttdoc">The character for escaping a portion of the SQL script. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:94</div></div>
<div class="ttc" id="a07251_html_a2dbc68fcb6d181e6821ddfdc5faa1e1c"><div class="ttname"><a href="a07251.html#a2dbc68fcb6d181e6821ddfdc5faa1e1c">org.geotoolkit.internal.sql.ScriptRunner.replacements</a></div><div class="ttdeci">final Map&lt; String, String &gt; replacements</div><div class="ttdoc">A mapping of words to replace. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:138</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a64101d48a20710b0780be23ea3f36492"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64101d48a20710b0780be23ea3f36492">&#9670;&nbsp;</a></span>run() <span class="overload">[5/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final int run </td>
          <td>(</td>
          <td class="paramtype">final String&#160;</td>
          <td class="paramname"><em>statement</em></td><td>)</td>
          <td> throws IOException, SQLException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convenience method invoking <a class="el" href="a07251.html#a4f24d985af73b36eb53b6018059bf122">run(LineNumberReader)</a> for the given SQL statement. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">statement</td><td>The SQL statement to execute. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of rows added or modified as a result of the statement execution. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IOException</td><td>If an error occurred while reading the input (should never happen). </td></tr>
    <tr><td class="paramname">SQLException</td><td>If an error occurred while executing a SQL statement.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>3.16 </dd></dl>

<p class="reference">References <a class="el" href="a07251.html#a92338667c69a471901b2617e638b7655">ScriptRunner.run()</a>.</p>
<div class="fragment"><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                                                                                  {</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="a07251.html#a92338667c69a471901b2617e638b7655">run</a>(<span class="keyword">new</span> LineNumberReader(<span class="keyword">new</span> StringReader(<a class="code" href="a07251.html#ac4eabe349c40424717d7746855d667c7">statement</a>)));</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    }</div><div class="ttc" id="a07251_html_a92338667c69a471901b2617e638b7655"><div class="ttname"><a href="a07251.html#a92338667c69a471901b2617e638b7655">org.geotoolkit.internal.sql.ScriptRunner.run</a></div><div class="ttdeci">int run(final File file)</div><div class="ttdoc">Run the SQL script read from the given file or directory. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:243</div></div>
<div class="ttc" id="a07251_html_ac4eabe349c40424717d7746855d667c7"><div class="ttname"><a href="a07251.html#ac4eabe349c40424717d7746855d667c7">org.geotoolkit.internal.sql.ScriptRunner.statement</a></div><div class="ttdeci">final Statement statement</div><div class="ttdoc">The statement created from a connection to the database. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:143</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acb4f09c4ed9eede81436829d3852c307"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb4f09c4ed9eede81436829d3852c307">&#9670;&nbsp;</a></span>runFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int runFile </td>
          <td>(</td>
          <td class="paramtype">final File&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td> throws IOException, SQLException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">package</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Run the SQL script from a single file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>The file of the script to run. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of rows added or modified as a result of the script execution. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">IOException</td><td>If an error occurred while reading the input. </td></tr>
    <tr><td class="paramname">SQLException</td><td>If an error occurred while executing a SQL statement. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="a07251.html#a5f709a89d356e1ebbab5325f22368f38">ScriptRunner.encoding</a>, and <a class="el" href="a07251.html#a92338667c69a471901b2617e638b7655">ScriptRunner.run()</a>.</p>

<p class="reference">Referenced by <a class="el" href="a07251.html#a92338667c69a471901b2617e638b7655">ScriptRunner.run()</a>.</p>
<div class="fragment"><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                                                                  {</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="keyword">final</span> String <a class="code" href="a07251.html#a5f709a89d356e1ebbab5325f22368f38">encoding</a> = this.<a class="code" href="a07251.html#a5f709a89d356e1ebbab5325f22368f38">encoding</a>;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="keyword">final</span> Reader reader;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keywordflow">if</span> (encoding == null) {</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            reader = <span class="keyword">new</span> FileReader(file);</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            reader = <span class="keyword">new</span> InputStreamReader(<span class="keyword">new</span> FileInputStream(file), encoding);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        }</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">int</span> count;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <span class="keywordflow">try</span> (LineNumberReader in = <span class="keyword">new</span> LineNumberReader(reader)) {</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            <a class="code" href="a07251.html#aa10ee8e0b4a350bef1841cf2b66178c1">currentFile</a> = file; count = <a class="code" href="a07251.html#a92338667c69a471901b2617e638b7655">run</a>(in);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            <a class="code" href="a07251.html#aa10ee8e0b4a350bef1841cf2b66178c1">currentFile</a> = null; <span class="comment">// Clear on success only.</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        }</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">return</span> count;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    }</div><div class="ttc" id="a07251_html_a92338667c69a471901b2617e638b7655"><div class="ttname"><a href="a07251.html#a92338667c69a471901b2617e638b7655">org.geotoolkit.internal.sql.ScriptRunner.run</a></div><div class="ttdeci">int run(final File file)</div><div class="ttdoc">Run the SQL script read from the given file or directory. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:243</div></div>
<div class="ttc" id="a07251_html_aa10ee8e0b4a350bef1841cf2b66178c1"><div class="ttname"><a href="a07251.html#aa10ee8e0b4a350bef1841cf2b66178c1">org.geotoolkit.internal.sql.ScriptRunner.currentFile</a></div><div class="ttdeci">File currentFile</div><div class="ttdoc">The file being read. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:148</div></div>
<div class="ttc" id="a07251_html_a5f709a89d356e1ebbab5325f22368f38"><div class="ttname"><a href="a07251.html#a5f709a89d356e1ebbab5325f22368f38">org.geotoolkit.internal.sql.ScriptRunner.encoding</a></div><div class="ttdeci">String encoding</div><div class="ttdoc">The encoding of SQL scripts, or. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:104</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5cc0e8ba536dbb6ca74b7dfae2ec8863"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cc0e8ba536dbb6ca74b7dfae2ec8863">&#9670;&nbsp;</a></span>selectVersion()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">String selectVersion </td>
          <td>(</td>
          <td class="paramtype">final String []&#160;</td>
          <td class="paramname"><em>versions</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If there is many versions of the SQL script, select the version to run. </p>
<p>The default implementation tries to parse the version number and to select the greatest one.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">versions</td><td>The version found in a directory. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The version to run. </dd></dl>

<p class="reference">Referenced by <a class="el" href="a07251.html#a77d33783552b0eace1bff508290d2b2e">ScriptRunner.run()</a>.</p>
<div class="fragment"><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                                                            {</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="keyword">final</span> StringBuilder buffer = <span class="keyword">new</span> StringBuilder();</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        Version max = null;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        String selected = versions[versions.length - 1];</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">final</span> String version : versions) {</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            <span class="keyword">final</span> <span class="keywordtype">int</span> length = version.length();</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;length; i++) {</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                <span class="keywordtype">char</span> c = version.charAt(i);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                <span class="keywordflow">if</span> (c &gt;= <span class="charliteral">&#39;0&#39;</span> &amp;&amp; c &lt;= <span class="charliteral">&#39;9&#39;</span>) {</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                    buffer.setLength(0);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                    <span class="keywordflow">while</span> (i &lt; length) {</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                        c = version.charAt(i++);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                        <span class="keywordflow">if</span> (!Character.isLetterOrDigit(c)) {</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                            c = <span class="charliteral">&#39;.&#39;</span>;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                        }</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                        buffer.append(c);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                    }</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                    Version candidate = <span class="keyword">new</span> Version(buffer.toString());</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                    <span class="keywordflow">if</span> (max == null || max.compareTo(candidate) &lt;= 0) {</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                        max = candidate;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                        selected = version;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                    }</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                }</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            }</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        }</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <span class="keywordflow">return</span> selected;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="a09247462099dcfca65bce64059374ad3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09247462099dcfca65bce64059374ad3">&#9670;&nbsp;</a></span>setEncoding()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void setEncoding </td>
          <td>(</td>
          <td class="paramtype">final String&#160;</td>
          <td class="paramname"><em>encoding</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the encoding of SQL scripts. </p>
<p>Typical values are</p><div class="fragment"><div class="line"><span class="stringliteral">&quot;UTF-8&quot;</span> </div></div><!-- fragment --><p> and </p><div class="fragment"><div class="line"><span class="stringliteral">&quot;ISO-8859-1&quot;</span> </div></div><!-- fragment --><p> . For SQL scripts provided by the EPSG, the encoding shall be</p><div class="fragment"><div class="line"><span class="stringliteral">&quot;ISO-8859-1&quot;</span> </div></div><!-- fragment --><p> .</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">encoding</td><td>The encoding of SQL scripts, or<div class="fragment"><div class="line">null </div></div><!-- fragment --> for the platform default. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="a07251.html#a5f709a89d356e1ebbab5325f22368f38">ScriptRunner.encoding</a>.</p>
<div class="fragment"><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                                                   {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        this.<a class="code" href="a07251.html#a5f709a89d356e1ebbab5325f22368f38">encoding</a> = <a class="code" href="a07251.html#a5f709a89d356e1ebbab5325f22368f38">encoding</a>;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    }</div><div class="ttc" id="a07251_html_a5f709a89d356e1ebbab5325f22368f38"><div class="ttname"><a href="a07251.html#a5f709a89d356e1ebbab5325f22368f38">org.geotoolkit.internal.sql.ScriptRunner.encoding</a></div><div class="ttdeci">String encoding</div><div class="ttdoc">The encoding of SQL scripts, or. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:104</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad146fa8579a5f8a876c4688cc5a68520"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad146fa8579a5f8a876c4688cc5a68520">&#9670;&nbsp;</a></span>toString()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">String toString </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a string representation of this runner for debugging purpose. </p>
<p>Current implementation returns the current position in the script being executed, and the SQL statement. This method may be invoked after a <a class="el" href="">SQLException</a> occurred in order to determine the line in the SQL script that caused the error.</p>
<dl class="section return"><dt>Returns</dt><dd>The current position in the script being executed. </dd></dl>
<div class="fragment"><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                             {</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <span class="keyword">final</span> StringBuilder buffer = <span class="keyword">new</span> StringBuilder(getClass().getSimpleName()).append(<span class="charliteral">&#39;[&#39;</span>);</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="a07251.html#aa10ee8e0b4a350bef1841cf2b66178c1">currentFile</a> != null) {</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            buffer.append(<a class="code" href="a07251.html#aa10ee8e0b4a350bef1841cf2b66178c1">currentFile</a>.getName()).append(<span class="stringliteral">&quot; : &quot;</span>).append(<a class="code" href="a07251.html#a163792de4399a947d8e9d3bb15f7af41">currentLine</a>);</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        }</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        buffer.append(<span class="charliteral">&#39;]&#39;</span>);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="a07251.html#ad1a94c63f40e1fa0aca253ba6b578535">currentSQL</a> != null) {</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            buffer.append(<span class="charliteral">&#39;\n&#39;</span>).append(<a class="code" href="a07251.html#ad1a94c63f40e1fa0aca253ba6b578535">currentSQL</a>);</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        }</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        <span class="keywordflow">return</span> buffer.toString();</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    }</div><div class="ttc" id="a07251_html_ad1a94c63f40e1fa0aca253ba6b578535"><div class="ttname"><a href="a07251.html#ad1a94c63f40e1fa0aca253ba6b578535">org.geotoolkit.internal.sql.ScriptRunner.currentSQL</a></div><div class="ttdeci">String currentSQL</div><div class="ttdoc">The SQL statement being executed. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:159</div></div>
<div class="ttc" id="a07251_html_a163792de4399a947d8e9d3bb15f7af41"><div class="ttname"><a href="a07251.html#a163792de4399a947d8e9d3bb15f7af41">org.geotoolkit.internal.sql.ScriptRunner.currentLine</a></div><div class="ttdeci">int currentLine</div><div class="ttdoc">The line number being executed. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:154</div></div>
<div class="ttc" id="a07251_html_aa10ee8e0b4a350bef1841cf2b66178c1"><div class="ttname"><a href="a07251.html#aa10ee8e0b4a350bef1841cf2b66178c1">org.geotoolkit.internal.sql.ScriptRunner.currentFile</a></div><div class="ttdeci">File currentFile</div><div class="ttdoc">The file being read. </div><div class="ttdef"><b>Definition:</b> ScriptRunner.java:148</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a21a78630e73fdc5217cc5f91ad526605"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21a78630e73fdc5217cc5f91ad526605">&#9670;&nbsp;</a></span>dialect</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final <a class="el" href="a07243.html">Dialect</a> dialect</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The presumed dialect spoken by the database. </p>

</div>
</div>
<a id="a969fa1b1e9090bc9ef66fa246f5b7ac5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a969fa1b1e9090bc9ef66fa246f5b7ac5">&#9670;&nbsp;</a></span>END_OF_STATEMENT</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final char END_OF_STATEMENT = ';'</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The character at the end of statements. </p>

<p class="reference">Referenced by <a class="el" href="a07251.html#a4f24d985af73b36eb53b6018059bf122">ScriptRunner.run()</a>.</p>

</div>
</div>
<a id="a96a992a14ce189a9b7de2e55b4db3ef2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96a992a14ce189a9b7de2e55b4db3ef2">&#9670;&nbsp;</a></span>IDENTIFIER_QUOTE</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final char IDENTIFIER_QUOTE = '&quot;'</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The quote character for identifiers expected to be found in the SQL script. </p>

<p class="reference">Referenced by <a class="el" href="a07251.html#a4f24d985af73b36eb53b6018059bf122">ScriptRunner.run()</a>.</p>

</div>
</div>
<a id="a3dce6165371128e8b36d23d1065cc63e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dce6165371128e8b36d23d1065cc63e">&#9670;&nbsp;</a></span>identifierQuote</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final String identifierQuote</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The quote character for identifiers actually used in the database. </p>

</div>
</div>
<a id="abda6dfa583d13a2de4723e1a42222318"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abda6dfa583d13a2de4723e1a42222318">&#9670;&nbsp;</a></span>QUOTE</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final char QUOTE = '\''</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The quote character expected to be found in the SQL script. </p>

<p class="reference">Referenced by <a class="el" href="a07251.html#a4f24d985af73b36eb53b6018059bf122">ScriptRunner.run()</a>.</p>

</div>
</div>
<a id="a2dbc68fcb6d181e6821ddfdc5faa1e1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2dbc68fcb6d181e6821ddfdc5faa1e1c">&#9670;&nbsp;</a></span>replacements</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final Map&lt;String,String&gt; replacements = new HashMap&lt;&gt;()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A mapping of words to replace. </p>
<p>The replacement is performed only if the word is not found in an identifier or a string. The default implementation let this map empty, but subclasses may fill it at construction time. </p>
<p>This is used for example in order to map the table names in the EPSG scripts to table names as they were in the MS-Access flavor of EPSG database. It may also contains the mapping between SQL keywords used in the SQL scripts to SQL keywords understood by the database (for example Derby does not support the</p><div class="fragment"><div class="line">TEXT </div></div><!-- fragment --><p> data type, which need to be replaced by</p><div class="fragment"><div class="line">VARCHAR </div></div><!-- fragment --><p> ). </p>

</div>
</div>
<a id="a34f194361f67b4fb08bca6fea2776312"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34f194361f67b4fb08bca6fea2776312">&#9670;&nbsp;</a></span>suffixes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final List&lt;String&gt; suffixes = new ArrayList&lt;&gt;()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The expected variable part of suffixes in files, in the order to be run. </p>
<p>For example the EPSG scripts are made of the following files:</p>
<p>{ text EPSG_v6_14.mdb_Data_PostgreSQL.sql EPSG_v6_14.mdb_FKeys_PostgreSQL.sql EPSG_v6_14.mdb_Tables_PostgreSQL.sql }</p>
<p>In such cases, the list shall contains</p><div class="fragment"><div class="line"><span class="stringliteral">&quot;Tables&quot;</span> </div></div><!-- fragment --><p> ,</p><div class="fragment"><div class="line"><span class="stringliteral">&quot;Data&quot;</span> </div></div><!-- fragment --><p> and </p><div class="fragment"><div class="line"><span class="stringliteral">&quot;FKeys&quot;</span> </div></div><!-- fragment --><p> in that order, because this is the order that the script files are expected to be run. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a03833.html">org</a></li><li class="navelem"><a class="el" href="a03842.html">geotoolkit</a></li><li class="navelem"><a class="el" href="a03860.html">internal</a></li><li class="navelem"><a class="el" href="a03868.html">sql</a></li><li class="navelem"><a class="el" href="a07239.html">DerbySqlScriptRunner</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
