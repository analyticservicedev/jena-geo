<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>jena-geo: XAffineTransform Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">jena-geo
   &#160;<span id="projectnumber">Version 0.1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a07527.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="a07524.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">XAffineTransform Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Utility methods for affine transforms.  
 <a href="a07527.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a36bddb00a4be752319c09f8e0f610d1e"><td class="memItemLeft" align="right" valign="top">static boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07527.html#a36bddb00a4be752319c09f8e0f610d1e">isIdentity</a> (final AffineTransform tr, double tolerance)</td></tr>
<tr class="memdesc:a36bddb00a4be752319c09f8e0f610d1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns.  <a href="#a36bddb00a4be752319c09f8e0f610d1e">More...</a><br /></td></tr>
<tr class="separator:a36bddb00a4be752319c09f8e0f610d1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acba8d2b73cf8dd267b9cbd9b7995e981"><td class="memItemLeft" align="right" valign="top">static double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07527.html#acba8d2b73cf8dd267b9cbd9b7995e981">getScale</a> (final AffineTransform tr)</td></tr>
<tr class="memdesc:acba8d2b73cf8dd267b9cbd9b7995e981"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a global scale factor for the specified affine transform.  <a href="#acba8d2b73cf8dd267b9cbd9b7995e981">More...</a><br /></td></tr>
<tr class="separator:acba8d2b73cf8dd267b9cbd9b7995e981"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4156f5f7098b2dc55d3434324e8e1fa"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07527.html#ad4156f5f7098b2dc55d3434324e8e1fa">roundIfAlmostInteger</a> (final AffineTransform tr, final double tolerance)</td></tr>
<tr class="memdesc:ad4156f5f7098b2dc55d3434324e8e1fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">If scale and shear coefficients are close to integers, replaces their current values by their rounded values.  <a href="#ad4156f5f7098b2dc55d3434324e8e1fa">More...</a><br /></td></tr>
<tr class="separator:ad4156f5f7098b2dc55d3434324e8e1fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a5220c8bb6f133614619c9cbedb0b1ca4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07527.html#a5220c8bb6f133614619c9cbedb0b1ca4">XAffineTransform</a> ()</td></tr>
<tr class="memdesc:a5220c8bb6f133614619c9cbedb0b1ca4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do not allow instantiation of this class.  <a href="#a5220c8bb6f133614619c9cbedb0b1ca4">More...</a><br /></td></tr>
<tr class="separator:a5220c8bb6f133614619c9cbedb0b1ca4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Utility methods for affine transforms. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a5220c8bb6f133614619c9cbedb0b1ca4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5220c8bb6f133614619c9cbedb0b1ca4">&#9670;&nbsp;</a></span>XAffineTransform()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a07527.html">XAffineTransform</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Do not allow instantiation of this class. </p>
<div class="fragment"><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                               {</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="acba8d2b73cf8dd267b9cbd9b7995e981"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acba8d2b73cf8dd267b9cbd9b7995e981">&#9670;&nbsp;</a></span>getScale()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static double getScale </td>
          <td>(</td>
          <td class="paramtype">final AffineTransform&#160;</td>
          <td class="paramname"><em>tr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a global scale factor for the specified affine transform. </p>
<p>This scale factor combines <a class="el" href="">getScaleX0(tr)</a> and <a class="el" href="">getScaleY0(tr)</a>. The way to compute such a "global" scale is somewhat arbitrary and may change in a future version.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tr</td><td>The affine transform to inspect. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The magnitude of scale factory. </dd></dl>
<div class="fragment"><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                                                            {</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keywordflow">return</span> 0.5 * (AffineTransforms2D.getScaleX0(tr) + AffineTransforms2D.getScaleY0(tr));</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="a36bddb00a4be752319c09f8e0f610d1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36bddb00a4be752319c09f8e0f610d1e">&#9670;&nbsp;</a></span>isIdentity()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static boolean isIdentity </td>
          <td>(</td>
          <td class="paramtype">final AffineTransform&#160;</td>
          <td class="paramname"><em>tr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>tolerance</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns. </p>
<div class="fragment"><div class="line"><span class="keyword">true</span> </div></div><!-- fragment --><p> if the specified affine transform is an identity transform up to the specified tolerance. This method is equivalent to computing the difference between this matrix and an identity matrix (as created by <a class="el" href="">new AffineTransform()</a>) and returning</p><div class="fragment"><div class="line"><span class="keyword">true</span> </div></div><!-- fragment --><p> if and only if all differences are smaller than or equal to</p><div class="fragment"><div class="line">tolerance </div></div><!-- fragment --><p> . </p>
<p>This method is used for working around rounding error in affine transforms resulting from a computation, as in the example below:</p>
<p>{ text ┌ ┐ │ 1.0000000000000000001 0.0 0.0 │ │ 0.0 0.999999999999999999999 0.0 │ │ 0.0 0.0 1.0 │ └ ┘ }</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tr</td><td>The affine transform to be checked for identity. </td></tr>
    <tr><td class="paramname">tolerance</td><td>The tolerance value to use when checking for identity. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><div class="fragment"><div class="line"><span class="keyword">true</span> </div></div><!-- fragment --> if this transformation is close enough to the identity,<div class="fragment"><div class="line"><span class="keyword">false</span> </div></div><!-- fragment --> otherwise.</dd></dl>
<dl class="section since"><dt>Since</dt><dd>2.3.1 </dd></dl>
<div class="fragment"><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                                                                                 {</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="keywordflow">if</span> (tr.isIdentity()) {</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        }</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        tolerance = abs(tolerance);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keywordflow">return</span> abs(tr.getScaleX() - 1) &lt;= tolerance &amp;&amp;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;               abs(tr.getScaleY() - 1) &lt;= tolerance &amp;&amp;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;               abs(tr.getShearX())     &lt;= tolerance &amp;&amp;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;               abs(tr.getShearY())     &lt;= tolerance &amp;&amp;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;               abs(tr.getTranslateX()) &lt;= tolerance &amp;&amp;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;               abs(tr.getTranslateY()) &lt;= tolerance;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="ad4156f5f7098b2dc55d3434324e8e1fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4156f5f7098b2dc55d3434324e8e1fa">&#9670;&nbsp;</a></span>roundIfAlmostInteger()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void roundIfAlmostInteger </td>
          <td>(</td>
          <td class="paramtype">final AffineTransform&#160;</td>
          <td class="paramname"><em>tr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final double&#160;</td>
          <td class="paramname"><em>tolerance</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If scale and shear coefficients are close to integers, replaces their current values by their rounded values. </p>
<p>The scale and shear coefficients are handled in a "all or nothing" way; either all of them are rounded, or either none of them. The translation terms are handled separately, provided that the scale and shear coefficients has been rounded. </p>
<p>This rounding up is useful for example in order to speedup image displays.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tr</td><td>The matrix to round. Rounding will be applied in place. </td></tr>
    <tr><td class="paramname">tolerance</td><td>The maximal departure from integers in order to allow rounding. It is typically a small number like<div class="fragment"><div class="line">1E-6 </div></div><!-- fragment --> .</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd>org.geotoolkit.image.io.metadata.MetadataHelper::adjustForRoundingError(double)</dd></dl>
<dl class="section since"><dt>Since</dt><dd>3.14 (derived from 2.3.1) </dd></dl>

<p class="reference">Referenced by <a class="el" href="a06795.html#a77b14660e96073cea4cde53069901462">GridFactory.create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                                                                                              {</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keywordtype">double</span> r;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">double</span> m00, m01, m10, m11;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keywordflow">if</span> (abs((m00 = rint(r=tr.getScaleX())) - r) &lt;= tolerance &amp;&amp;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            abs((m01 = rint(r=tr.getShearX())) - r) &lt;= tolerance &amp;&amp;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            abs((m11 = rint(r=tr.getScaleY())) - r) &lt;= tolerance &amp;&amp;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            abs((m10 = rint(r=tr.getShearY())) - r) &lt;= tolerance)</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">             * At this point the scale and shear coefficients can been rounded to integers.</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">             * Continue only if this rounding doesn&#39;t lead to a non-invertible transform.</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            <span class="keywordflow">if</span> ((m00!=0 || m01!=0) &amp;&amp; (m10!=0 || m11!=0)) {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                <span class="keywordtype">double</span> m02, m12;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                <span class="keywordflow">if</span> (abs((r = rint(m02=tr.getTranslateX())) - m02) &lt;= tolerance) m02=r;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                <span class="keywordflow">if</span> (abs((r = rint(m12=tr.getTranslateY())) - m12) &lt;= tolerance) m12=r;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                tr.setTransform(m00, m10, m01, m11, m02, m12);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            }</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        }</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a03746.html">org</a></li><li class="navelem"><a class="el" href="a03755.html">geotoolkit</a></li><li class="navelem"><a class="el" href="a03793.html">referencing</a></li><li class="navelem"><a class="el" href="a03798.html">operation</a></li><li class="navelem"><a class="el" href="a03799.html">matrix</a></li><li class="navelem"><a class="el" href="a07527.html">XAffineTransform</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
