<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>jena-geo: SilhouetteMask Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">jena-geo
   &#160;<span id="projectnumber">Version 0.1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a06827.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="a06824.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">SilhouetteMask Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Creates the silhouette of an image that isolates its content from its background.  
 <a href="a06827.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for SilhouetteMask:</div>
<div class="dyncontent">
<div class="center"><img src="a06826.png" border="0" usemap="#SilhouetteMask_inherit__map" alt="Inheritance graph"/></div>
<map name="SilhouetteMask_inherit__map" id="SilhouetteMask_inherit__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for SilhouetteMask:</div>
<div class="dyncontent">
<div class="center"><img src="a06825.png" border="0" usemap="#SilhouetteMask_coll__map" alt="Collaboration graph"/></div>
<map name="SilhouetteMask_coll__map" id="SilhouetteMask_coll__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0731c89b91402c597f9e6b5ad566956a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06827.html#a0731c89b91402c597f9e6b5ad566956a">SilhouetteMask</a> (final RenderedImage source, final ImageLayout <a class="el" href="a06827.html#ae33c60a088a675d97d37fd915632b610">layout</a>, final Map&lt;?,?&gt; configuration, double[]... <a class="el" href="a06827.html#a62a36bc4171cc588059b0315d64c2b89">background</a>)</td></tr>
<tr class="memdesc:a0731c89b91402c597f9e6b5ad566956a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a new silhouette mask for the given image.  <a href="#a0731c89b91402c597f9e6b5ad566956a">More...</a><br /></td></tr>
<tr class="separator:a0731c89b91402c597f9e6b5ad566956a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a016c1e8b58082cf2add38a25a00fd20d"><td class="memItemLeft" align="right" valign="top">Vector&lt; RenderedImage &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06827.html#a016c1e8b58082cf2add38a25a00fd20d">getSources</a> ()</td></tr>
<tr class="memdesc:a016c1e8b58082cf2add38a25a00fd20d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the source images.  <a href="#a016c1e8b58082cf2add38a25a00fd20d">More...</a><br /></td></tr>
<tr class="separator:a016c1e8b58082cf2add38a25a00fd20d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a4ba7d667bd2c11bb15f09506d145b31e"><td class="memItemLeft" align="right" valign="top">static final String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06827.html#a4ba7d667bd2c11bb15f09506d145b31e">OPERATION_NAME</a> = &quot;org.geotoolkit.SilhouetteMask&quot;</td></tr>
<tr class="memdesc:a4ba7d667bd2c11bb15f09506d145b31e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The name of this operation in the JAI registry.  <a href="#a4ba7d667bd2c11bb15f09506d145b31e">More...</a><br /></td></tr>
<tr class="separator:a4ba7d667bd2c11bb15f09506d145b31e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a5522f2e40982772e9fd940df4a96af81"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06827.html#a5522f2e40982772e9fd940df4a96af81">computeImage</a> (final Raster[] sources, final WritableRaster dest, final Rectangle destRect)</td></tr>
<tr class="memdesc:a5522f2e40982772e9fd940df4a96af81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes a rectangle of outputs.  <a href="#a5522f2e40982772e9fd940df4a96af81">More...</a><br /></td></tr>
<tr class="separator:a5522f2e40982772e9fd940df4a96af81"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:ae33c60a088a675d97d37fd915632b610"><td class="memItemLeft" align="right" valign="top">static ImageLayout&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06827.html#ae33c60a088a675d97d37fd915632b610">layout</a> (final RenderedImage source, ImageLayout layout)</td></tr>
<tr class="memdesc:ae33c60a088a675d97d37fd915632b610"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the user didn't specified explicitly a sample or a color model, creates default ones.  <a href="#ae33c60a088a675d97d37fd915632b610">More...</a><br /></td></tr>
<tr class="separator:ae33c60a088a675d97d37fd915632b610"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a62a36bc4171cc588059b0315d64c2b89"><td class="memItemLeft" align="right" valign="top">final double [][]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06827.html#a62a36bc4171cc588059b0315d64c2b89">background</a></td></tr>
<tr class="memdesc:a62a36bc4171cc588059b0315d64c2b89"><td class="mdescLeft">&#160;</td><td class="mdescRight">The background values in the source image.  <a href="#a62a36bc4171cc588059b0315d64c2b89">More...</a><br /></td></tr>
<tr class="separator:a62a36bc4171cc588059b0315d64c2b89"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Creates the silhouette of an image that isolates its content from its background. </p>
<p>The background color is assumed to be uniform, with a know value which must be specified as a parameter to this operation. </p>
<p>This operation can be used in order to build a mask for an image that has been rotated, where pixels in the middle of the image should not have their value masked even if they happen to have the same color than the background color. </p>
<p>Current implementation is rather simple and works for images in which the content is inside a rotated rectangle. More complex outline are not guaranteed to work. Example: </p>
<table align="center" cellpadding="15" border="1">
<tr>
<th>Input</th><th>output</th></tr>
<tr>
<td><div class="image">
<img src="doc-files/sample-rgb.png" border="1"/>
</div>
 </td><td><div class="image">
<img src="doc-files/silhouette.png" border="1"/>
</div>
 </td></tr>
</table>
<p>{</p>
<h1><a class="anchor" id="Current"></a>
algorithm}</h1>
<p>This operator starts from a corner of the source image. If the pixel value in that corner is equals to the specified background color, then the corresponding sample value in the target image is set to -1 (for integer data type, this is equivalent to setting all bits to 1). Otherwise the target sample value is set to 0. If and only if the pixel in the corner has been set to -1, then its neighbors pixels are examined iteratively in the same way. This operation is repeated for the 4 image corners.</p>
<dl class="section author"><dt>Author</dt><dd>Martin Desruisseaux (Geomatys) </dd></dl>
<dl class="section version"><dt>Version</dt><dd>3.01</dd></dl>
<dl class="section since"><dt>Since</dt><dd>3.00  </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a0731c89b91402c597f9e6b5ad566956a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0731c89b91402c597f9e6b5ad566956a">&#9670;&nbsp;</a></span>SilhouetteMask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a06827.html">SilhouetteMask</a> </td>
          <td>(</td>
          <td class="paramtype">final RenderedImage&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final ImageLayout&#160;</td>
          <td class="paramname"><em>layout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final Map&lt;?,?&gt;&#160;</td>
          <td class="paramname"><em>configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double... []&#160;</td>
          <td class="paramname"><em>background</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructs a new silhouette mask for the given image. </p>
<p>While this constructor is public, it should usually not be invoked directly. You should use  javax.media.jai.JAI} factory methods instead.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>The source image. </td></tr>
    <tr><td class="paramname">layout</td><td>The image layout. </td></tr>
    <tr><td class="paramname">configuration</td><td>The image properties and rendering hints. </td></tr>
    <tr><td class="paramname">background</td><td>The background values in the source image. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="a06827.html#ae33c60a088a675d97d37fd915632b610">SilhouetteMask.layout()</a>.</p>
<div class="fragment"><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        super(source, configuration, <a class="code" href="a06827.html#ae33c60a088a675d97d37fd915632b610">layout</a>(source, <a class="code" href="a06827.html#ae33c60a088a675d97d37fd915632b610">layout</a>));</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">int</span> numBands = source.getSampleModel().getNumBands();</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        this.<a class="code" href="a06827.html#a62a36bc4171cc588059b0315d64c2b89">background</a> = <a class="code" href="a06827.html#a62a36bc4171cc588059b0315d64c2b89">background</a> = <a class="code" href="a06827.html#a62a36bc4171cc588059b0315d64c2b89">background</a>.clone();</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="a06827.html#a62a36bc4171cc588059b0315d64c2b89">background</a>.length; i++) {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            <a class="code" href="a06827.html#a62a36bc4171cc588059b0315d64c2b89">background</a>[i] = Arrays.copyOf(<a class="code" href="a06827.html#a62a36bc4171cc588059b0315d64c2b89">background</a>[i], numBands);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        }</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    }</div><div class="ttc" id="a06827_html_ae33c60a088a675d97d37fd915632b610"><div class="ttname"><a href="a06827.html#ae33c60a088a675d97d37fd915632b610">org.geotoolkit.image.jai.SilhouetteMask.layout</a></div><div class="ttdeci">static ImageLayout layout(final RenderedImage source, ImageLayout layout)</div><div class="ttdoc">If the user didn&amp;#39;t specified explicitly a sample or a color model, creates default ones...</div><div class="ttdef"><b>Definition:</b> SilhouetteMask.java:116</div></div>
<div class="ttc" id="a06827_html_a62a36bc4171cc588059b0315d64c2b89"><div class="ttname"><a href="a06827.html#a62a36bc4171cc588059b0315d64c2b89">org.geotoolkit.image.jai.SilhouetteMask.background</a></div><div class="ttdeci">final double [][] background</div><div class="ttdoc">The background values in the source image. </div><div class="ttdef"><b>Definition:</b> SilhouetteMask.java:85</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a5522f2e40982772e9fd940df4a96af81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5522f2e40982772e9fd940df4a96af81">&#9670;&nbsp;</a></span>computeImage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void computeImage </td>
          <td>(</td>
          <td class="paramtype">final Raster []&#160;</td>
          <td class="paramname"><em>sources</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final WritableRaster&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final Rectangle&#160;</td>
          <td class="paramname"><em>destRect</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Computes a rectangle of outputs. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sources</td><td>The source images. Should be an array of length 1. </td></tr>
    <tr><td class="paramname">dest</td><td>The raster to be filled in. </td></tr>
    <tr><td class="paramname">destRect</td><td>The region within the raster to be filled. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="a06827.html#a62a36bc4171cc588059b0315d64c2b89">SilhouetteMask.background</a>, <a class="el" href="a06647.html#a7ec08b09324f69c4d632e53b8044ecc1">ImageUtilities.fill()</a>, <a class="el" href="a06811.html#a3c3187a9ea5768277146d5961af9b768">SampleValues.getInstance()</a>, <a class="el" href="a06811.html#ad21dc1a2584d1f2bec2f4e3309312889">SampleValues.getPixel()</a>, and <a class="el" href="a06811.html#af3f59e98fcf5be419babb0e263912b85">SampleValues.setPixel()</a>.</p>
<div class="fragment"><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    {</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        assert sources.length == 1;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keywordflow">if</span> (destRect.isEmpty()) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="keyword">final</span> Raster source = sources[0];</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">false</span>) {</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">             * According javax.media.jai.TileFactory javadoc (see method createTile), new tiles</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">             * should be initialized to 0 even if they were recycled from an older image. So we</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">             * should not need to invoke this fill method.</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            ImageUtilities.fill(dest, destRect, 0);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        }</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">int</span> xmin = destRect.x;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">int</span> ymin = destRect.y;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">int</span> xmax = destRect.width  + xmin;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">int</span> ymax = destRect.height + ymin;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">int</span>[] ones = <span class="keyword">new</span> <span class="keywordtype">int</span>[dest.getNumBands()];</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        Arrays.fill(ones, -1);</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">int</span> transferType = source.getTransferType();</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keyword">final</span> Set&lt;SampleValues&gt; <a class="code" href="a06827.html#a62a36bc4171cc588059b0315d64c2b89">background</a> = <span class="keyword">new</span> HashSet&lt;&gt;();</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">final</span> <span class="keywordtype">double</span>[] samples : this.background) {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            background.add(SampleValues.getInstance(transferType, samples));</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        }</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keyword">final</span> SampleValues buffer = SampleValues.getInstance(transferType, source.getSampleModel().getNumBands());</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        assert source.getBounds().contains(destRect) : destRect;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">         * For each background value found in the source image, sets the destination pixel to -1.</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">         * The same algorithm is repeated for the 4 corners, using only different iteration direction.</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> corner=0; corner&lt;4; corner++) {</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            <span class="keywordtype">int</span> x = source.getMinX();</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            <span class="keywordtype">int</span> y = source.getMinY();</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            <span class="keywordtype">int</span> w = source.getWidth();</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            <span class="keywordtype">int</span> h = source.getHeight();</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            <span class="keywordtype">int</span> dx = 1, dy = 1;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <span class="keywordflow">if</span> ((corner &amp; 1) != 0) {x += w - 1; dx = -1;}</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            <span class="keywordflow">if</span> ((corner &amp; 2) != 0) {y += h - 1; dy = -1;}</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            <span class="keyword">final</span> <span class="keywordtype">int</span> x0 = x;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">             * Next line will be scanned only if the first pixel of the previous line had</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">             * the background value. Next pixel on a row will be scanned only as long as</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">             * background values are found.</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <span class="keywordflow">while</span> (--h &gt;= 0 &amp;&amp; background.contains(buffer.getPixel(source, x, y))) {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                <span class="keywordflow">if</span> (y &gt;= ymin &amp;&amp; y &lt; ymax) {</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                    w = destRect.width;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                    <span class="keywordflow">do</span> <span class="keywordflow">if</span> (x &gt;= xmin &amp;&amp; x &lt; xmax) {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                        dest.setPixel(x, y, ones);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                        <span class="keywordflow">if</span> (--w == 0) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                    } <span class="keywordflow">while</span> (background.contains(buffer.getPixel(source, x += dx, y)));</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                }</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                y += dy;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                x = x0;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            }</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        }</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    }</div><div class="ttc" id="a06827_html_a62a36bc4171cc588059b0315d64c2b89"><div class="ttname"><a href="a06827.html#a62a36bc4171cc588059b0315d64c2b89">org.geotoolkit.image.jai.SilhouetteMask.background</a></div><div class="ttdeci">final double [][] background</div><div class="ttdoc">The background values in the source image. </div><div class="ttdef"><b>Definition:</b> SilhouetteMask.java:85</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a016c1e8b58082cf2add38a25a00fd20d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a016c1e8b58082cf2add38a25a00fd20d">&#9670;&nbsp;</a></span>getSources()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Vector&lt;RenderedImage&gt; getSources </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the source images. </p>
<div class="fragment"><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                                              {</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">return</span> super.getSources();</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="ae33c60a088a675d97d37fd915632b610"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae33c60a088a675d97d37fd915632b610">&#9670;&nbsp;</a></span>layout()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ImageLayout layout </td>
          <td>(</td>
          <td class="paramtype">final RenderedImage&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ImageLayout&#160;</td>
          <td class="paramname"><em>layout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If the user didn't specified explicitly a sample or a color model, creates default ones. </p>
<p>This method is actually a workaround for RFE #4093999 in Sun's bug database ("Relax constraint on placement of this()/super() call in constructors").</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">layout</td><td>The user-supplied layout. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A layout with at least a color model. </dd></dl>

<p class="reference">References <a class="el" href="a06627.html#afba35bdad0d4917767fd4641d9e4345b">ColorUtilities.BINARY_COLOR_MODEL</a>.</p>

<p class="reference">Referenced by <a class="el" href="a06827.html#a0731c89b91402c597f9e6b5ad566956a">SilhouetteMask.SilhouetteMask()</a>.</p>
<div class="fragment"><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                                                                                      {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="a06827.html#ae33c60a088a675d97d37fd915632b610">layout</a> == null) {</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            <a class="code" href="a06827.html#ae33c60a088a675d97d37fd915632b610">layout</a> = <span class="keyword">new</span> ImageLayout();</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="a06827.html#ae33c60a088a675d97d37fd915632b610">layout</a>.getValidMask() &amp; (SAMPLE_MODEL_MASK | COLOR_MODEL_MASK)) == 0) {</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <a class="code" href="a06827.html#ae33c60a088a675d97d37fd915632b610">layout</a> = (ImageLayout) <a class="code" href="a06827.html#ae33c60a088a675d97d37fd915632b610">layout</a>.clone();</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="a06827.html#ae33c60a088a675d97d37fd915632b610">layout</a>;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        }</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="keyword">final</span> ColorModel cm = ColorUtilities.BINARY_COLOR_MODEL;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="a06827.html#ae33c60a088a675d97d37fd915632b610">layout</a>.setColorModel(cm).setSampleModel(cm.createCompatibleSampleModel(</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                <a class="code" href="a06827.html#ae33c60a088a675d97d37fd915632b610">layout</a>.getWidth(source), <a class="code" href="a06827.html#ae33c60a088a675d97d37fd915632b610">layout</a>.getHeight(source)));</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    }</div><div class="ttc" id="a06827_html_ae33c60a088a675d97d37fd915632b610"><div class="ttname"><a href="a06827.html#ae33c60a088a675d97d37fd915632b610">org.geotoolkit.image.jai.SilhouetteMask.layout</a></div><div class="ttdeci">static ImageLayout layout(final RenderedImage source, ImageLayout layout)</div><div class="ttdoc">If the user didn&amp;#39;t specified explicitly a sample or a color model, creates default ones...</div><div class="ttdef"><b>Definition:</b> SilhouetteMask.java:116</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a62a36bc4171cc588059b0315d64c2b89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62a36bc4171cc588059b0315d64c2b89">&#9670;&nbsp;</a></span>background</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final double [][] background</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The background values in the source image. </p>
<p>The array length must matches the number of bands, otherwise this operation can not work. </p>

<p class="reference">Referenced by <a class="el" href="a06827.html#a5522f2e40982772e9fd940df4a96af81">SilhouetteMask.computeImage()</a>.</p>

</div>
</div>
<a id="a4ba7d667bd2c11bb15f09506d145b31e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ba7d667bd2c11bb15f09506d145b31e">&#9670;&nbsp;</a></span>OPERATION_NAME</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final String OPERATION_NAME = &quot;org.geotoolkit.SilhouetteMask&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The name of this operation in the JAI registry. </p>
<p>This is {}. </p>

<p class="reference">Referenced by <a class="el" href="a06807.html#ad8e84bc73acb3ddf81036b833a2946ed">Registry.registerGeotoolkitServices()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a03698.html">org</a></li><li class="navelem"><a class="el" href="a03707.html">geotoolkit</a></li><li class="navelem"><a class="el" href="a03715.html">image</a></li><li class="navelem"><a class="el" href="a03722.html">jai</a></li><li class="navelem"><a class="el" href="a06827.html">SilhouetteMask</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
