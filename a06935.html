<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>jena-geo: ImageTilesCache Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">jena-geo
   &#160;<span id="projectnumber">Version 0.1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a06935.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pac-methods">Package Functions</a> &#124;
<a href="#pac-static-methods">Static Package Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="a06932.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ImageTilesCache Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Stock all <a class="el" href="">java.awt.image.Raster</a> contained from define <a class="el" href="">java.awt.image.RenderedImage</a>.  
 <a href="a06935.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for ImageTilesCache:</div>
<div class="dyncontent">
<div class="center"><img src="a06934.png" border="0" usemap="#ImageTilesCache_inherit__map" alt="Inheritance graph"/></div>
<map name="ImageTilesCache_inherit__map" id="ImageTilesCache_inherit__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for ImageTilesCache:</div>
<div class="dyncontent">
<div class="center"><img src="a06933.png" border="0" usemap="#ImageTilesCache_coll__map" alt="Collaboration graph"/></div>
<map name="ImageTilesCache_coll__map" id="ImageTilesCache_coll__map">
<area shape="rect" id="node3" href="a06947.html" title="Create tree directory made, starting from tree root directory, define by user. " alt="" coords="907,414,1039,441"/>
<area shape="rect" id="node10" href="a06939.html" title="Manage RenderedImage and its Raster to don&#39;t exceed JVM memory capacity. " alt="" coords="927,691,1019,718"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0fe8ffb14df11dcd32290d65cf79d74f"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#a0fe8ffb14df11dcd32290d65cf79d74f">getUsedCapacity</a> ()</td></tr>
<tr class="memdesc:a0fe8ffb14df11dcd32290d65cf79d74f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get currently used amount of memory, this is just an estimation.  <a href="#a0fe8ffb14df11dcd32290d65cf79d74f">More...</a><br /></td></tr>
<tr class="separator:a0fe8ffb14df11dcd32290d65cf79d74f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pac-methods"></a>
Package Functions</h2></td></tr>
<tr class="memitem:a202d382163631085086db6de0229fb9c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#a202d382163631085086db6de0229fb9c">ImageTilesCache</a> (RenderedImage ri, ReferenceQueue queue, <a class="el" href="a06939.html">LargeCache</a> <a class="el" href="a06935.html#ac6b4a30c1503dc089465ebe413262e13">cache</a>)  throws IOException </td></tr>
<tr class="separator:a202d382163631085086db6de0229fb9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8bcae42be7d229afa08a862dfa9e674"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#af8bcae42be7d229afa08a862dfa9e674">add</a> (int tileX, int tileY, WritableRaster raster)  throws IOException </td></tr>
<tr class="memdesc:af8bcae42be7d229afa08a862dfa9e674"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a <a class="el" href="">java.awt.image.Raster</a> in list and check list to don't exceed memory capacity.  <a href="#af8bcae42be7d229afa08a862dfa9e674">More...</a><br /></td></tr>
<tr class="separator:af8bcae42be7d229afa08a862dfa9e674"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6355b41fc259820fcb2bf1952b858cb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#ae6355b41fc259820fcb2bf1952b858cb">remove</a> (int tileX, int tileY)</td></tr>
<tr class="memdesc:ae6355b41fc259820fcb2bf1952b858cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove <a class="el" href="">java.awt.image.Raster</a> at tileX tileY mosaic coordinates.  <a href="#ae6355b41fc259820fcb2bf1952b858cb">More...</a><br /></td></tr>
<tr class="separator:ae6355b41fc259820fcb2bf1952b858cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb95fde878113eda42f80436698cae66"><td class="memItemLeft" align="right" valign="top">Raster&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#aeb95fde878113eda42f80436698cae66">getRaster</a> (int tileX, int tileY)  throws IOException, IllegalArgumentException </td></tr>
<tr class="memdesc:aeb95fde878113eda42f80436698cae66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return <a class="el" href="">java.awt.image.Raster</a> at tileX tileY mosaic coordinates.  <a href="#aeb95fde878113eda42f80436698cae66">More...</a><br /></td></tr>
<tr class="separator:aeb95fde878113eda42f80436698cae66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac73602c55a5127d74142f30d5e00f167"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#ac73602c55a5127d74142f30d5e00f167">removeTiles</a> ()  throws IOException </td></tr>
<tr class="memdesc:ac73602c55a5127d74142f30d5e00f167"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove all file and directory relevant to this cached image.  <a href="#ac73602c55a5127d74142f30d5e00f167">More...</a><br /></td></tr>
<tr class="separator:ac73602c55a5127d74142f30d5e00f167"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fcdd3b8dc96eedbedd0caf9d7da19d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#a5fcdd3b8dc96eedbedd0caf9d7da19d8">capacityChanged</a> ()  throws IOException </td></tr>
<tr class="memdesc:a5fcdd3b8dc96eedbedd0caf9d7da19d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Affect a new memory capacity and update <a class="el" href="">java.awt.image.Raster</a> list from new memory capacity set.  <a href="#a5fcdd3b8dc96eedbedd0caf9d7da19d8">More...</a><br /></td></tr>
<tr class="separator:a5fcdd3b8dc96eedbedd0caf9d7da19d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pac-static-methods"></a>
Static Package Functions</h2></td></tr>
<tr class="memitem:a2e87c5ede6b7235170d287cd2e254454"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#a2e87c5ede6b7235170d287cd2e254454">[static initializer]</a></td></tr>
<tr class="separator:a2e87c5ede6b7235170d287cd2e254454"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:af4473cb8a80f64482baf96c2768b50a8"><td class="memItemLeft" align="right" valign="top">ReadWriteLock&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#af4473cb8a80f64482baf96c2768b50a8">getLock</a> (final Point key)</td></tr>
<tr class="memdesc:af4473cb8a80f64482baf96c2768b50a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">when you use the lock keep it until release  <a href="#af4473cb8a80f64482baf96c2768b50a8">More...</a><br /></td></tr>
<tr class="separator:af4473cb8a80f64482baf96c2768b50a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf76a7a653bd5c3b931fa74d7977e4d7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#abf76a7a653bd5c3b931fa74d7977e4d7">add</a> (Point tileCorner, WritableRaster raster)  throws IOException </td></tr>
<tr class="separator:abf76a7a653bd5c3b931fa74d7977e4d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ea34468cd71bf452f648431d863675d"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#a6ea34468cd71bf452f648431d863675d">getRasterWeight</a> (final Raster raster)</td></tr>
<tr class="memdesc:a6ea34468cd71bf452f648431d863675d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define the weight of a <a class="el" href="">java.awt.image.Raster</a>.  <a href="#a6ea34468cd71bf452f648431d863675d">More...</a><br /></td></tr>
<tr class="separator:a6ea34468cd71bf452f648431d863675d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a688620f315e577082837136b90381143"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#a688620f315e577082837136b90381143">writeRaster</a> (final <a class="el" href="a06951.html">TileRasterCache</a> lRaster)  throws IOException </td></tr>
<tr class="memdesc:a688620f315e577082837136b90381143"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write <a class="el" href="">java.awt.image.Raster</a> within <a class="el" href="a06951.html">org.geotoolkit.image.io.large.TileRasterCache</a> object on hard disk at appropriate quad tree emplacement.  <a href="#a688620f315e577082837136b90381143">More...</a><br /></td></tr>
<tr class="separator:a688620f315e577082837136b90381143"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca50d948c49e8a0d6e697e385aed0afa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#aca50d948c49e8a0d6e697e385aed0afa">releaseReader</a> (ImageReader imageReader)</td></tr>
<tr class="memdesc:aca50d948c49e8a0d6e697e385aed0afa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release ImageReader and his input.  <a href="#aca50d948c49e8a0d6e697e385aed0afa">More...</a><br /></td></tr>
<tr class="separator:aca50d948c49e8a0d6e697e385aed0afa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0227bdcbb2849264466f2af39c07476a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#a0227bdcbb2849264466f2af39c07476a">releaseWriter</a> (ImageWriter imgWriter)</td></tr>
<tr class="memdesc:a0227bdcbb2849264466f2af39c07476a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release ImageWriter and his output.  <a href="#a0227bdcbb2849264466f2af39c07476a">More...</a><br /></td></tr>
<tr class="separator:a0227bdcbb2849264466f2af39c07476a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5073fb8c4d6ec00ff2866fb0fa99e995"><td class="memItemLeft" align="right" valign="top">WritableRaster&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#a5073fb8c4d6ec00ff2866fb0fa99e995">checkRaster</a> (WritableRaster raster, Point tileCorner)</td></tr>
<tr class="separator:a5073fb8c4d6ec00ff2866fb0fa99e995"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a0663163ab4c1abf0f09e2a1f41161d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#a4a0663163ab4c1abf0f09e2a1f41161d">checkMap</a> ()  throws IOException </td></tr>
<tr class="separator:a4a0663163ab4c1abf0f09e2a1f41161d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ac6b4a30c1503dc089465ebe413262e13"><td class="memItemLeft" align="right" valign="top">final <a class="el" href="a06939.html">LargeCache</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#ac6b4a30c1503dc089465ebe413262e13">cache</a></td></tr>
<tr class="separator:ac6b4a30c1503dc089465ebe413262e13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29c641b243f938d56724effe86c4412a"><td class="memItemLeft" align="right" valign="top">ColorModel&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#a29c641b243f938d56724effe86c4412a">cm</a></td></tr>
<tr class="separator:a29c641b243f938d56724effe86c4412a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad89c58bf763b7a7e6458b36d0435cb91"><td class="memItemLeft" align="right" valign="top">final int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#ad89c58bf763b7a7e6458b36d0435cb91">minTileX</a></td></tr>
<tr class="separator:ad89c58bf763b7a7e6458b36d0435cb91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73c25a6adae78d5d98f5feb1c9123d20"><td class="memItemLeft" align="right" valign="top">final int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#a73c25a6adae78d5d98f5feb1c9123d20">minTileY</a></td></tr>
<tr class="separator:a73c25a6adae78d5d98f5feb1c9123d20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4599589f7defec6c66b2f9f92ca8ca4c"><td class="memItemLeft" align="right" valign="top">final int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#a4599589f7defec6c66b2f9f92ca8ca4c">numTilesX</a></td></tr>
<tr class="separator:a4599589f7defec6c66b2f9f92ca8ca4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12ac87002dd1f05d9f0771ec5bb6e5bd"><td class="memItemLeft" align="right" valign="top">final int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#a12ac87002dd1f05d9f0771ec5bb6e5bd">numTilesY</a></td></tr>
<tr class="separator:a12ac87002dd1f05d9f0771ec5bb6e5bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43dad87ef2e7f50fd23750400c84ea45"><td class="memItemLeft" align="right" valign="top">final <a class="el" href="a06947.html">QuadTreeDirectory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#a43dad87ef2e7f50fd23750400c84ea45">qTD</a></td></tr>
<tr class="separator:a43dad87ef2e7f50fd23750400c84ea45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6066c5a14d82eaf2fc9f9ed346d2e6f6"><td class="memItemLeft" align="right" valign="top">final int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#a6066c5a14d82eaf2fc9f9ed346d2e6f6">riMinX</a></td></tr>
<tr class="separator:a6066c5a14d82eaf2fc9f9ed346d2e6f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0109f8ce0de6192999a7545c9651503"><td class="memItemLeft" align="right" valign="top">final int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#ae0109f8ce0de6192999a7545c9651503">riMinY</a></td></tr>
<tr class="separator:ae0109f8ce0de6192999a7545c9651503"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72738b80212c51c368e506a79254bc0f"><td class="memItemLeft" align="right" valign="top">final int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#a72738b80212c51c368e506a79254bc0f">riTileWidth</a></td></tr>
<tr class="separator:a72738b80212c51c368e506a79254bc0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a4ac97e50d83639cce05478a26dd3fe"><td class="memItemLeft" align="right" valign="top">final int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#a4a4ac97e50d83639cce05478a26dd3fe">riTileHeight</a></td></tr>
<tr class="separator:a4a4ac97e50d83639cce05478a26dd3fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa46a98b32449a507a35e906140d5ef77"><td class="memItemLeft" align="right" valign="top">final int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#aa46a98b32449a507a35e906140d5ef77">dataTypeWeight</a></td></tr>
<tr class="separator:aa46a98b32449a507a35e906140d5ef77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd282b55a30b469fc5807bed46a035d1"><td class="memItemLeft" align="right" valign="top">final boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#abd282b55a30b469fc5807bed46a035d1">isWritableRenderedImage</a></td></tr>
<tr class="separator:abd282b55a30b469fc5807bed46a035d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83f46a099d96c69e6777a0100a0f5c91"><td class="memItemLeft" align="right" valign="top">final WeakValueHashMap&lt; Point, ReadWriteLock &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#a83f46a099d96c69e6777a0100a0f5c91">locks</a> = new WeakValueHashMap&lt;&gt;(Point.class)</td></tr>
<tr class="memdesc:a83f46a099d96c69e6777a0100a0f5c91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tile by Tile locks.  <a href="#a83f46a099d96c69e6777a0100a0f5c91">More...</a><br /></td></tr>
<tr class="separator:a83f46a099d96c69e6777a0100a0f5c91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc73fad098e8f85ac4cc9af2471506c0"><td class="memItemLeft" align="right" valign="top">final AtomicLong&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#afc73fad098e8f85ac4cc9af2471506c0">usedCapacity</a> = new AtomicLong(0)</td></tr>
<tr class="memdesc:afc73fad098e8f85ac4cc9af2471506c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains tiles of pointed image.  <a href="#afc73fad098e8f85ac4cc9af2471506c0">More...</a><br /></td></tr>
<tr class="separator:afc73fad098e8f85ac4cc9af2471506c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7505229339a809e767b4c30d7ac6281"><td class="memItemLeft" align="right" valign="top">final Map&lt; Point, <a class="el" href="a06951.html">TileRasterCache</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#af7505229339a809e767b4c30d7ac6281">tiles</a></td></tr>
<tr class="separator:af7505229339a809e767b4c30d7ac6281"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:ab1d069f56091df4f6436f8c713ab2f39"><td class="memItemLeft" align="right" valign="top">static final Logger&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#ab1d069f56091df4f6436f8c713ab2f39">LOGGER</a> = Logging.getLogger(&quot;org.geotoolkit.image.io.large&quot;)</td></tr>
<tr class="memdesc:ab1d069f56091df4f6436f8c713ab2f39"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="">Logger</a> to show problem during Tile deletion.  <a href="#ab1d069f56091df4f6436f8c713ab2f39">More...</a><br /></td></tr>
<tr class="separator:ab1d069f56091df4f6436f8c713ab2f39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace031f4e0eaaaa534b7c1b57528b1e0f"><td class="memItemLeft" align="right" valign="top">static final Path&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#ace031f4e0eaaaa534b7c1b57528b1e0f">TEMPORARY_PATH</a> = Paths.get(System.getProperty(&quot;java.io.tmpdir&quot;))</td></tr>
<tr class="separator:ace031f4e0eaaaa534b7c1b57528b1e0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f554e3a3080c35d3fe1e17eddd918d8"><td class="memItemLeft" align="right" valign="top">static final String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#a6f554e3a3080c35d3fe1e17eddd918d8">FORMAT</a> = &quot;geotiff&quot;</td></tr>
<tr class="separator:a6f554e3a3080c35d3fe1e17eddd918d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ccbd95e82ef4ef72b232216a77f8ccd"><td class="memItemLeft" align="right" valign="top">static final ImageReaderSpi&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#a9ccbd95e82ef4ef72b232216a77f8ccd">READER_SPI</a></td></tr>
<tr class="separator:a9ccbd95e82ef4ef72b232216a77f8ccd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3a29f710ce33da63313871cd25e6a4e"><td class="memItemLeft" align="right" valign="top">static final ImageWriterSpi&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#aa3a29f710ce33da63313871cd25e6a4e">WRITER_SPI</a></td></tr>
<tr class="separator:aa3a29f710ce33da63313871cd25e6a4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7347379b407db487c04a235379b39fa6"><td class="memItemLeft" align="right" valign="top">static final Point&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06935.html#a7347379b407db487c04a235379b39fa6">WPOINT</a> = new Point(0, 0)</td></tr>
<tr class="separator:a7347379b407db487c04a235379b39fa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Stock all <a class="el" href="">java.awt.image.Raster</a> contained from define <a class="el" href="">java.awt.image.RenderedImage</a>. </p>
<p>It's a map whose key is tile location, and value is the value the tile data. We use a <a class="el" href="">java.util.LinkedHashMap</a>, so when we need to remove an element, we will take the oldest one.</p>
<dl class="section author"><dt>Author</dt><dd>Rémi Maréchal (Geomatys). </dd>
<dd>
Alexis Manin (Geomatys). </dd>
<dd>
Johann Sorel (Geomatys). </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a202d382163631085086db6de0229fb9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a202d382163631085086db6de0229fb9c">&#9670;&nbsp;</a></span>ImageTilesCache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a06935.html">ImageTilesCache</a> </td>
          <td>(</td>
          <td class="paramtype">RenderedImage&#160;</td>
          <td class="paramname"><em>ri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ReferenceQueue&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a06939.html">LargeCache</a>&#160;</td>
          <td class="paramname"><em>cache</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws IOException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">package</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>List which contain <a class="el" href="">java.awt.image.Raster</a> from <a class="el" href="">java.awt.image.RenderedImage</a> owner.<br />
 If some of <a class="el" href="">java.awt.image.Raster</a> weight within list exceed memory capacity, <a class="el" href="">java.awt.image.Raster</a> are stored on hard disk at appropriate quad tree emplacement in temporary system directory.<br />
<br />
</p>
<p>Note : <a class="el" href="">java.awt.image.Raster</a> are stored in tiff format to avoid onerous, compression decompression, cost during disk writing reading.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ri</td><td><a class="el" href="">java.awt.image.RenderedImage</a> which contain all raster in list. </td></tr>
    <tr><td class="paramname">memoryCapacity</td><td>storage capacity in Byte. </td></tr>
    <tr><td class="paramname">enableSwap</td><td>flag that enable memory swapping on filesystem. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">java.io.IOException</td><td>if impossible to create <a class="el" href="">javax.imageio.ImageReader</a> or <a class="el" href="">javax.imageio.ImageWriter</a>. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="a06935.html#ac6b4a30c1503dc089465ebe413262e13">ImageTilesCache.cache</a>, and <a class="el" href="a06939.html#a8f655df9eb20ab7abbbe886ad45baa18">LargeCache.isEnableSwap()</a>.</p>
<div class="fragment"><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                                                                                                 {</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        super(ri, queue);</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="comment">//cache properties.</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        this.<a class="code" href="a06935.html#ac6b4a30c1503dc089465ebe413262e13">cache</a> = <a class="code" href="a06935.html#ac6b4a30c1503dc089465ebe413262e13">cache</a>;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        this.<a class="code" href="a06935.html#abd282b55a30b469fc5807bed46a035d1">isWritableRenderedImage</a> = ri instanceof WritableRenderedImage;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordflow">if</span> (ri instanceof WritableLargeRenderedImage ) {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="a06935.html#ac6b4a30c1503dc089465ebe413262e13">cache</a>.<a class="code" href="a06939.html#a8f655df9eb20ab7abbbe886ad45baa18">isEnableSwap</a>())</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="a14171.html">IllegalArgumentException</a>(<span class="stringliteral">&quot;With WritableRenderedImage LargeCache must swap.&quot;</span>);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        }</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="comment">//image owner properties.</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        this.<a class="code" href="a06935.html#a29c641b243f938d56724effe86c4412a">cm</a>            = ri.getColorModel();</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        this.<a class="code" href="a06935.html#a4599589f7defec6c66b2f9f92ca8ca4c">numTilesX</a>     = ri.getNumXTiles();</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        this.<a class="code" href="a06935.html#a12ac87002dd1f05d9f0771ec5bb6e5bd">numTilesY</a>     = ri.getNumYTiles();</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        this.<a class="code" href="a06935.html#a6066c5a14d82eaf2fc9f9ed346d2e6f6">riMinX</a>        = ri.getMinX();</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        this.<a class="code" href="a06935.html#ae0109f8ce0de6192999a7545c9651503">riMinY</a>        = ri.getMinY();</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        this.<a class="code" href="a06935.html#a72738b80212c51c368e506a79254bc0f">riTileWidth</a>   = ri.getTileWidth();</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        this.<a class="code" href="a06935.html#a4a4ac97e50d83639cce05478a26dd3fe">riTileHeight</a>  = ri.getTileHeight();</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        this.<a class="code" href="a06935.html#ad89c58bf763b7a7e6458b36d0435cb91">minTileX</a>      = ri.getMinTileX();</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        this.<a class="code" href="a06935.html#a73c25a6adae78d5d98f5feb1c9123d20">minTileY</a>      = ri.getMinTileY();</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="comment">//quad tree directory architecture.</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="a06935.html#ac6b4a30c1503dc089465ebe413262e13">cache</a>.<a class="code" href="a06939.html#a8f655df9eb20ab7abbbe886ad45baa18">isEnableSwap</a>()) {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            ArgumentChecks.ensureNonNull(<span class="stringliteral">&quot;READER_SPI&quot;</span>, <a class="code" href="a06935.html#a9ccbd95e82ef4ef72b232216a77f8ccd">READER_SPI</a>);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            ArgumentChecks.ensureNonNull(<span class="stringliteral">&quot;WRITER_SPI&quot;</span>, <a class="code" href="a06935.html#aa3a29f710ce33da63313871cd25e6a4e">WRITER_SPI</a>);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            <span class="keyword">final</span> Path dirPath = Files.createTempDirectory(<a class="code" href="a06935.html#ace031f4e0eaaaa534b7c1b57528b1e0f">TEMPORARY_PATH</a>, <span class="stringliteral">&quot;img&quot;</span>);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            this.<a class="code" href="a06935.html#a43dad87ef2e7f50fd23750400c84ea45">qTD</a> = <span class="keyword">new</span> QuadTreeDirectory(dirPath, <a class="code" href="a06935.html#a4599589f7defec6c66b2f9f92ca8ca4c">numTilesX</a>, <a class="code" href="a06935.html#a12ac87002dd1f05d9f0771ec5bb6e5bd">numTilesY</a>, <a class="code" href="a06935.html#a6f554e3a3080c35d3fe1e17eddd918d8">FORMAT</a>, <span class="keyword">true</span>);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            this.<a class="code" href="a06935.html#a43dad87ef2e7f50fd23750400c84ea45">qTD</a> = null;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        }</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">int</span> datatype = ri.getSampleModel().getDataType();</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">switch</span> (datatype) {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            <span class="keywordflow">case</span> DataBuffer.TYPE_BYTE      : <a class="code" href="a06935.html#aa46a98b32449a507a35e906140d5ef77">dataTypeWeight</a> = 1; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            <span class="keywordflow">case</span> DataBuffer.TYPE_SHORT     : <a class="code" href="a06935.html#aa46a98b32449a507a35e906140d5ef77">dataTypeWeight</a> = 2; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <span class="keywordflow">case</span> DataBuffer.TYPE_USHORT    : <a class="code" href="a06935.html#aa46a98b32449a507a35e906140d5ef77">dataTypeWeight</a> = 2; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            <span class="keywordflow">case</span> DataBuffer.TYPE_INT       : <a class="code" href="a06935.html#aa46a98b32449a507a35e906140d5ef77">dataTypeWeight</a> = 4; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            <span class="keywordflow">case</span> DataBuffer.TYPE_FLOAT     : <a class="code" href="a06935.html#aa46a98b32449a507a35e906140d5ef77">dataTypeWeight</a> = 4; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            <span class="keywordflow">case</span> DataBuffer.TYPE_DOUBLE    : <a class="code" href="a06935.html#aa46a98b32449a507a35e906140d5ef77">dataTypeWeight</a> = 8; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            <span class="keywordflow">case</span> DataBuffer.TYPE_UNDEFINED : <a class="code" href="a06935.html#aa46a98b32449a507a35e906140d5ef77">dataTypeWeight</a> = 8; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            default : <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="a14091.html">IllegalStateException</a>(<span class="stringliteral">&quot;unknown raster data type&quot;</span>);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        }</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    }</div><div class="ttc" id="a06935_html_a73c25a6adae78d5d98f5feb1c9123d20"><div class="ttname"><a href="a06935.html#a73c25a6adae78d5d98f5feb1c9123d20">org.geotoolkit.image.io.large.ImageTilesCache.minTileY</a></div><div class="ttdeci">final int minTileY</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:83</div></div>
<div class="ttc" id="a06935_html_a9ccbd95e82ef4ef72b232216a77f8ccd"><div class="ttname"><a href="a06935.html#a9ccbd95e82ef4ef72b232216a77f8ccd">org.geotoolkit.image.io.large.ImageTilesCache.READER_SPI</a></div><div class="ttdeci">static final ImageReaderSpi READER_SPI</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:69</div></div>
<div class="ttc" id="a06935_html_abd282b55a30b469fc5807bed46a035d1"><div class="ttname"><a href="a06935.html#abd282b55a30b469fc5807bed46a035d1">org.geotoolkit.image.io.large.ImageTilesCache.isWritableRenderedImage</a></div><div class="ttdeci">final boolean isWritableRenderedImage</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:93</div></div>
<div class="ttc" id="a06935_html_aa3a29f710ce33da63313871cd25e6a4e"><div class="ttname"><a href="a06935.html#aa3a29f710ce33da63313871cd25e6a4e">org.geotoolkit.image.io.large.ImageTilesCache.WRITER_SPI</a></div><div class="ttdeci">static final ImageWriterSpi WRITER_SPI</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:70</div></div>
<div class="ttc" id="a06935_html_a29c641b243f938d56724effe86c4412a"><div class="ttname"><a href="a06935.html#a29c641b243f938d56724effe86c4412a">org.geotoolkit.image.io.large.ImageTilesCache.cm</a></div><div class="ttdeci">ColorModel cm</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:81</div></div>
<div class="ttc" id="a06935_html_a43dad87ef2e7f50fd23750400c84ea45"><div class="ttname"><a href="a06935.html#a43dad87ef2e7f50fd23750400c84ea45">org.geotoolkit.image.io.large.ImageTilesCache.qTD</a></div><div class="ttdeci">final QuadTreeDirectory qTD</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:86</div></div>
<div class="ttc" id="a06935_html_ae0109f8ce0de6192999a7545c9651503"><div class="ttname"><a href="a06935.html#ae0109f8ce0de6192999a7545c9651503">org.geotoolkit.image.io.large.ImageTilesCache.riMinY</a></div><div class="ttdeci">final int riMinY</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:88</div></div>
<div class="ttc" id="a06935_html_ad89c58bf763b7a7e6458b36d0435cb91"><div class="ttname"><a href="a06935.html#ad89c58bf763b7a7e6458b36d0435cb91">org.geotoolkit.image.io.large.ImageTilesCache.minTileX</a></div><div class="ttdeci">final int minTileX</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:82</div></div>
<div class="ttc" id="a06935_html_a4599589f7defec6c66b2f9f92ca8ca4c"><div class="ttname"><a href="a06935.html#a4599589f7defec6c66b2f9f92ca8ca4c">org.geotoolkit.image.io.large.ImageTilesCache.numTilesX</a></div><div class="ttdeci">final int numTilesX</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:84</div></div>
<div class="ttc" id="a06935_html_ace031f4e0eaaaa534b7c1b57528b1e0f"><div class="ttname"><a href="a06935.html#ace031f4e0eaaaa534b7c1b57528b1e0f">org.geotoolkit.image.io.large.ImageTilesCache.TEMPORARY_PATH</a></div><div class="ttdeci">static final Path TEMPORARY_PATH</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:67</div></div>
<div class="ttc" id="a06935_html_a72738b80212c51c368e506a79254bc0f"><div class="ttname"><a href="a06935.html#a72738b80212c51c368e506a79254bc0f">org.geotoolkit.image.io.large.ImageTilesCache.riTileWidth</a></div><div class="ttdeci">final int riTileWidth</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:89</div></div>
<div class="ttc" id="a14171_html"><div class="ttname"><a href="a14171.html">IllegalArgumentException</a></div></div>
<div class="ttc" id="a06935_html_a6066c5a14d82eaf2fc9f9ed346d2e6f6"><div class="ttname"><a href="a06935.html#a6066c5a14d82eaf2fc9f9ed346d2e6f6">org.geotoolkit.image.io.large.ImageTilesCache.riMinX</a></div><div class="ttdeci">final int riMinX</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:87</div></div>
<div class="ttc" id="a06939_html_a8f655df9eb20ab7abbbe886ad45baa18"><div class="ttname"><a href="a06939.html#a8f655df9eb20ab7abbbe886ad45baa18">org.geotoolkit.image.io.large.LargeCache.isEnableSwap</a></div><div class="ttdeci">boolean isEnableSwap()</div><div class="ttdef"><b>Definition:</b> LargeCache.java:95</div></div>
<div class="ttc" id="a14091_html"><div class="ttname"><a href="a14091.html">IllegalStateException</a></div></div>
<div class="ttc" id="a06935_html_a12ac87002dd1f05d9f0771ec5bb6e5bd"><div class="ttname"><a href="a06935.html#a12ac87002dd1f05d9f0771ec5bb6e5bd">org.geotoolkit.image.io.large.ImageTilesCache.numTilesY</a></div><div class="ttdeci">final int numTilesY</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:85</div></div>
<div class="ttc" id="a06935_html_a6f554e3a3080c35d3fe1e17eddd918d8"><div class="ttname"><a href="a06935.html#a6f554e3a3080c35d3fe1e17eddd918d8">org.geotoolkit.image.io.large.ImageTilesCache.FORMAT</a></div><div class="ttdeci">static final String FORMAT</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:68</div></div>
<div class="ttc" id="a06935_html_ac6b4a30c1503dc089465ebe413262e13"><div class="ttname"><a href="a06935.html#ac6b4a30c1503dc089465ebe413262e13">org.geotoolkit.image.io.large.ImageTilesCache.cache</a></div><div class="ttdeci">final LargeCache cache</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:80</div></div>
<div class="ttc" id="a06935_html_aa46a98b32449a507a35e906140d5ef77"><div class="ttname"><a href="a06935.html#aa46a98b32449a507a35e906140d5ef77">org.geotoolkit.image.io.large.ImageTilesCache.dataTypeWeight</a></div><div class="ttdeci">final int dataTypeWeight</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:91</div></div>
<div class="ttc" id="a06935_html_a4a4ac97e50d83639cce05478a26dd3fe"><div class="ttname"><a href="a06935.html#a4a4ac97e50d83639cce05478a26dd3fe">org.geotoolkit.image.io.large.ImageTilesCache.riTileHeight</a></div><div class="ttdeci">final int riTileHeight</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:90</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2e87c5ede6b7235170d287cd2e254454"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e87c5ede6b7235170d287cd2e254454">&#9670;&nbsp;</a></span>[static initializer]()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">[static initializer] </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">package</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="af8bcae42be7d229afa08a862dfa9e674"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8bcae42be7d229afa08a862dfa9e674">&#9670;&nbsp;</a></span>add() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void add </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tileX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tileY</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WritableRaster&#160;</td>
          <td class="paramname"><em>raster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws IOException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">package</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a <a class="el" href="">java.awt.image.Raster</a> in list and check list to don't exceed memory capacity. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tileX</td><td>mosaic index in X direction of raster will be stocked. </td></tr>
    <tr><td class="paramname">tileY</td><td>mosaic index in Y direction of raster will be stocked. </td></tr>
    <tr><td class="paramname">raster</td><td>raster will be stocked in list. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">java.io.IOException</td><td>if an error occurs during writing. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="a06935.html#a5073fb8c4d6ec00ff2866fb0fa99e995">ImageTilesCache.checkRaster()</a>.</p>

<p class="reference">Referenced by <a class="el" href="a06939.html#addc752b401012d303ef6d3ec8a216a63">LargeCache.add()</a>, <a class="el" href="a06939.html#a79979ce76518ba6d87984dd014b498c0">LargeCache.addTiles()</a>, and <a class="el" href="a06935.html#aeb95fde878113eda42f80436698cae66">ImageTilesCache.getRaster()</a>.</p>
<div class="fragment"><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                                                                             {</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="keyword">final</span> Point tileCorner = <span class="keyword">new</span> Point(tileX - <a class="code" href="a06935.html#ad89c58bf763b7a7e6458b36d0435cb91">minTileX</a>, tileY - <a class="code" href="a06935.html#a73c25a6adae78d5d98f5feb1c9123d20">minTileY</a>);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <a class="code" href="a06935.html#af8bcae42be7d229afa08a862dfa9e674">add</a>(tileCorner, <a class="code" href="a06935.html#a5073fb8c4d6ec00ff2866fb0fa99e995">checkRaster</a>(raster, tileCorner));</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    }</div><div class="ttc" id="a06935_html_a73c25a6adae78d5d98f5feb1c9123d20"><div class="ttname"><a href="a06935.html#a73c25a6adae78d5d98f5feb1c9123d20">org.geotoolkit.image.io.large.ImageTilesCache.minTileY</a></div><div class="ttdeci">final int minTileY</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:83</div></div>
<div class="ttc" id="a06935_html_a5073fb8c4d6ec00ff2866fb0fa99e995"><div class="ttname"><a href="a06935.html#a5073fb8c4d6ec00ff2866fb0fa99e995">org.geotoolkit.image.io.large.ImageTilesCache.checkRaster</a></div><div class="ttdeci">WritableRaster checkRaster(WritableRaster raster, Point tileCorner)</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:470</div></div>
<div class="ttc" id="a06935_html_ad89c58bf763b7a7e6458b36d0435cb91"><div class="ttname"><a href="a06935.html#ad89c58bf763b7a7e6458b36d0435cb91">org.geotoolkit.image.io.large.ImageTilesCache.minTileX</a></div><div class="ttdeci">final int minTileX</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:82</div></div>
<div class="ttc" id="a06935_html_af8bcae42be7d229afa08a862dfa9e674"><div class="ttname"><a href="a06935.html#af8bcae42be7d229afa08a862dfa9e674">org.geotoolkit.image.io.large.ImageTilesCache.add</a></div><div class="ttdeci">void add(int tileX, int tileY, WritableRaster raster)</div><div class="ttdoc">Add a java.awt.image.Raster in list and check list to don&amp;#39;t exceed memory capacity. </div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:222</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abf76a7a653bd5c3b931fa74d7977e4d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf76a7a653bd5c3b931fa74d7977e4d7">&#9670;&nbsp;</a></span>add() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void add </td>
          <td>(</td>
          <td class="paramtype">Point&#160;</td>
          <td class="paramname"><em>tileCorner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WritableRaster&#160;</td>
          <td class="paramname"><em>raster</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws IOException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="a06935.html#a4a0663163ab4c1abf0f09e2a1f41161d">ImageTilesCache.checkMap()</a>, <a class="el" href="a06939.html#a1db603052c78b286fce6eed536a14d7c">LargeCache.getCacheSizePerImage()</a>, <a class="el" href="a06935.html#af4473cb8a80f64482baf96c2768b50a8">ImageTilesCache.getLock()</a>, <a class="el" href="a06935.html#a6ea34468cd71bf452f648431d863675d">ImageTilesCache.getRasterWeight()</a>, and <a class="el" href="a06935.html#af7505229339a809e767b4c30d7ac6281">ImageTilesCache.tiles</a>.</p>
<div class="fragment"><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                                                                                 {</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">long</span> rasterWeight = <a class="code" href="a06935.html#a6ea34468cd71bf452f648431d863675d">getRasterWeight</a>(raster);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <span class="keywordflow">if</span> (rasterWeight &gt; <a class="code" href="a06935.html#ac6b4a30c1503dc089465ebe413262e13">cache</a>.<a class="code" href="a06939.html#a1db603052c78b286fce6eed536a14d7c">getCacheSizePerImage</a>()) <span class="keywordflow">throw</span> <span class="keyword">new</span> IOException(<span class="stringliteral">&quot;Raster too large : &quot;</span> + rasterWeight</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                + <span class="stringliteral">&quot; bytes, but maximum cache capacity is &quot;</span>+ <a class="code" href="a06935.html#ac6b4a30c1503dc089465ebe413262e13">cache</a>.<a class="code" href="a06939.html#a1db603052c78b286fce6eed536a14d7c">getCacheSizePerImage</a>() +<span class="stringliteral">&quot; bytes&quot;</span>);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="keyword">final</span> ReadWriteLock tileLock = <a class="code" href="a06935.html#af4473cb8a80f64482baf96c2768b50a8">getLock</a>(tileCorner);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        tileLock.writeLock().lock();</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">try</span> {</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            <span class="keyword">synchronized</span>(<a class="code" href="a06935.html#af7505229339a809e767b4c30d7ac6281">tiles</a>){</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                <a class="code" href="a06935.html#af7505229339a809e767b4c30d7ac6281">tiles</a>.put(tileCorner, <span class="keyword">new</span> TileRasterCache(tileCorner.x, tileCorner.y, rasterWeight, raster));</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            }</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        } <span class="keywordflow">finally</span> {</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            tileLock.writeLock().unlock();</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        }</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="comment">//remove or cache on disk oldest raster</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <a class="code" href="a06935.html#a4a0663163ab4c1abf0f09e2a1f41161d">checkMap</a>();</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    }</div><div class="ttc" id="a06935_html_a4a0663163ab4c1abf0f09e2a1f41161d"><div class="ttname"><a href="a06935.html#a4a0663163ab4c1abf0f09e2a1f41161d">org.geotoolkit.image.io.large.ImageTilesCache.checkMap</a></div><div class="ttdeci">void checkMap()</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:483</div></div>
<div class="ttc" id="a06939_html_a1db603052c78b286fce6eed536a14d7c"><div class="ttname"><a href="a06939.html#a1db603052c78b286fce6eed536a14d7c">org.geotoolkit.image.io.large.LargeCache.getCacheSizePerImage</a></div><div class="ttdeci">long getCacheSizePerImage()</div><div class="ttdef"><b>Definition:</b> LargeCache.java:99</div></div>
<div class="ttc" id="a06935_html_af4473cb8a80f64482baf96c2768b50a8"><div class="ttname"><a href="a06935.html#af4473cb8a80f64482baf96c2768b50a8">org.geotoolkit.image.io.large.ImageTilesCache.getLock</a></div><div class="ttdeci">ReadWriteLock getLock(final Point key)</div><div class="ttdoc">when you use the lock keep it until release </div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:138</div></div>
<div class="ttc" id="a06935_html_a6ea34468cd71bf452f648431d863675d"><div class="ttname"><a href="a06935.html#a6ea34468cd71bf452f648431d863675d">org.geotoolkit.image.io.large.ImageTilesCache.getRasterWeight</a></div><div class="ttdeci">long getRasterWeight(final Raster raster)</div><div class="ttdoc">Define the weight of a java.awt.image.Raster. </div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:381</div></div>
<div class="ttc" id="a06935_html_ac6b4a30c1503dc089465ebe413262e13"><div class="ttname"><a href="a06935.html#ac6b4a30c1503dc089465ebe413262e13">org.geotoolkit.image.io.large.ImageTilesCache.cache</a></div><div class="ttdeci">final LargeCache cache</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:80</div></div>
<div class="ttc" id="a06935_html_af7505229339a809e767b4c30d7ac6281"><div class="ttname"><a href="a06935.html#af7505229339a809e767b4c30d7ac6281">org.geotoolkit.image.io.large.ImageTilesCache.tiles</a></div><div class="ttdeci">final Map&lt; Point, TileRasterCache &gt; tiles</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:110</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5fcdd3b8dc96eedbedd0caf9d7da19d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fcdd3b8dc96eedbedd0caf9d7da19d8">&#9670;&nbsp;</a></span>capacityChanged()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void capacityChanged </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws IOException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">package</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Affect a new memory capacity and update <a class="el" href="">java.awt.image.Raster</a> list from new memory capacity set. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">memoryCapacity</td><td>new memory capacity. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">java.io.IOException</td><td>if capacity is too low from raster weight. </td></tr>
    <tr><td class="paramname">java.io.IOException</td><td>if cache capacity is too low from raster weight, or if impossible to write raster on disk. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="a06935.html#a4a0663163ab4c1abf0f09e2a1f41161d">ImageTilesCache.checkMap()</a>.</p>
<div class="fragment"><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                                              {</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <a class="code" href="a06935.html#a4a0663163ab4c1abf0f09e2a1f41161d">checkMap</a>();</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    }</div><div class="ttc" id="a06935_html_a4a0663163ab4c1abf0f09e2a1f41161d"><div class="ttname"><a href="a06935.html#a4a0663163ab4c1abf0f09e2a1f41161d">org.geotoolkit.image.io.large.ImageTilesCache.checkMap</a></div><div class="ttdeci">void checkMap()</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:483</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4a0663163ab4c1abf0f09e2a1f41161d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a0663163ab4c1abf0f09e2a1f41161d">&#9670;&nbsp;</a></span>checkMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void checkMap </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws IOException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Check that cache weight do not exceed memory capacity.<br />
 If memory capacity is exceeded, write as many <a class="el" href="">java.awt.image.Raster</a> objects needed to not exceed memory capacity anymore.</p>

<p class="reference">References <a class="el" href="a06939.html#a1db603052c78b286fce6eed536a14d7c">LargeCache.getCacheSizePerImage()</a>, <a class="el" href="a06935.html#af4473cb8a80f64482baf96c2768b50a8">ImageTilesCache.getLock()</a>, <a class="el" href="a06939.html#a8f655df9eb20ab7abbbe886ad45baa18">LargeCache.isEnableSwap()</a>, <a class="el" href="a06935.html#af7505229339a809e767b4c30d7ac6281">ImageTilesCache.tiles</a>, and <a class="el" href="a06935.html#a688620f315e577082837136b90381143">ImageTilesCache.writeRaster()</a>.</p>

<p class="reference">Referenced by <a class="el" href="a06935.html#abf76a7a653bd5c3b931fa74d7977e4d7">ImageTilesCache.add()</a>, and <a class="el" href="a06935.html#a5fcdd3b8dc96eedbedd0caf9d7da19d8">ImageTilesCache.capacityChanged()</a>.</p>
<div class="fragment"><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                                               {</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">long</span> maxCacheSize = <a class="code" href="a06935.html#ac6b4a30c1503dc089465ebe413262e13">cache</a>.<a class="code" href="a06939.html#a1db603052c78b286fce6eed536a14d7c">getCacheSizePerImage</a>();</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="a06935.html#afc73fad098e8f85ac4cc9af2471506c0">usedCapacity</a>.get() &lt; maxCacheSize) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">boolean</span> swap = <a class="code" href="a06935.html#ac6b4a30c1503dc089465ebe413262e13">cache</a>.<a class="code" href="a06939.html#a8f655df9eb20ab7abbbe886ad45baa18">isEnableSwap</a>();</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        Point[] pts;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <span class="keyword">synchronized</span>(<a class="code" href="a06935.html#af7505229339a809e767b4c30d7ac6281">tiles</a>){</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            pts = <a class="code" href="a06935.html#af7505229339a809e767b4c30d7ac6281">tiles</a>.keySet().toArray(<span class="keyword">new</span> Point[0]);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        }</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="keywordtype">int</span> i=0;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">long</span> currentCapacity = <a class="code" href="a06935.html#afc73fad098e8f85ac4cc9af2471506c0">usedCapacity</a>.get(); currentCapacity&gt;maxCacheSize &amp;&amp; i&lt;pts.length; currentCapacity = <a class="code" href="a06935.html#afc73fad098e8f85ac4cc9af2471506c0">usedCapacity</a>.get(),i++){</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            Point key = pts[i];</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            <span class="keywordflow">if</span>(key==null) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            <span class="keyword">final</span> ReadWriteLock rwl = <a class="code" href="a06935.html#af4473cb8a80f64482baf96c2768b50a8">getLock</a>(key);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            <span class="keywordflow">if</span> (rwl.writeLock().tryLock()) {</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                <span class="keywordflow">try</span> {</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                    <span class="keyword">final</span> TileRasterCache tr;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                    <span class="keyword">synchronized</span> (<a class="code" href="a06935.html#af7505229339a809e767b4c30d7ac6281">tiles</a>) {</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                        tr = <a class="code" href="a06935.html#af7505229339a809e767b4c30d7ac6281">tiles</a>.remove(key);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                    }</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                    <span class="keywordflow">if</span> (tr != null &amp;&amp; swap) {</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                        <a class="code" href="a06935.html#a688620f315e577082837136b90381143">writeRaster</a>(tr);</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                    }</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                } <span class="keywordflow">finally</span> {</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                    rwl.writeLock().unlock();</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                }</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            }</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        }</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    }</div><div class="ttc" id="a06939_html_a1db603052c78b286fce6eed536a14d7c"><div class="ttname"><a href="a06939.html#a1db603052c78b286fce6eed536a14d7c">org.geotoolkit.image.io.large.LargeCache.getCacheSizePerImage</a></div><div class="ttdeci">long getCacheSizePerImage()</div><div class="ttdef"><b>Definition:</b> LargeCache.java:99</div></div>
<div class="ttc" id="a06935_html_af4473cb8a80f64482baf96c2768b50a8"><div class="ttname"><a href="a06935.html#af4473cb8a80f64482baf96c2768b50a8">org.geotoolkit.image.io.large.ImageTilesCache.getLock</a></div><div class="ttdeci">ReadWriteLock getLock(final Point key)</div><div class="ttdoc">when you use the lock keep it until release </div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:138</div></div>
<div class="ttc" id="a06935_html_afc73fad098e8f85ac4cc9af2471506c0"><div class="ttname"><a href="a06935.html#afc73fad098e8f85ac4cc9af2471506c0">org.geotoolkit.image.io.large.ImageTilesCache.usedCapacity</a></div><div class="ttdeci">final AtomicLong usedCapacity</div><div class="ttdoc">Contains tiles of pointed image. </div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:109</div></div>
<div class="ttc" id="a06939_html_a8f655df9eb20ab7abbbe886ad45baa18"><div class="ttname"><a href="a06939.html#a8f655df9eb20ab7abbbe886ad45baa18">org.geotoolkit.image.io.large.LargeCache.isEnableSwap</a></div><div class="ttdeci">boolean isEnableSwap()</div><div class="ttdef"><b>Definition:</b> LargeCache.java:95</div></div>
<div class="ttc" id="a06935_html_ac6b4a30c1503dc089465ebe413262e13"><div class="ttname"><a href="a06935.html#ac6b4a30c1503dc089465ebe413262e13">org.geotoolkit.image.io.large.ImageTilesCache.cache</a></div><div class="ttdeci">final LargeCache cache</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:80</div></div>
<div class="ttc" id="a06935_html_a688620f315e577082837136b90381143"><div class="ttname"><a href="a06935.html#a688620f315e577082837136b90381143">org.geotoolkit.image.io.large.ImageTilesCache.writeRaster</a></div><div class="ttdeci">void writeRaster(final TileRasterCache lRaster)</div><div class="ttdoc">Write java.awt.image.Raster within org.geotoolkit.image.io.large.TileRasterCache object on hard disk ...</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:393</div></div>
<div class="ttc" id="a06935_html_af7505229339a809e767b4c30d7ac6281"><div class="ttname"><a href="a06935.html#af7505229339a809e767b4c30d7ac6281">org.geotoolkit.image.io.large.ImageTilesCache.tiles</a></div><div class="ttdeci">final Map&lt; Point, TileRasterCache &gt; tiles</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:110</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5073fb8c4d6ec00ff2866fb0fa99e995"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5073fb8c4d6ec00ff2866fb0fa99e995">&#9670;&nbsp;</a></span>checkRaster()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">WritableRaster checkRaster </td>
          <td>(</td>
          <td class="paramtype">WritableRaster&#160;</td>
          <td class="paramname"><em>raster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Point&#160;</td>
          <td class="paramname"><em>tileCorner</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Verify that <a class="el" href="">java.awt.image.Raster</a> coordinate is agree from <a class="el" href="">java.awt.image.RenderedImage</a> location.<br />
 If location is correct return <a class="el" href="">java.awt.image.Raster</a> else return new <a class="el" href="">java.awt.image.Raster</a> with correct<br />
 location but with same internal value from <a class="el" href="">java.awt.image.Raster</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">raster</td><td>raster will be checked. </td></tr>
    <tr><td class="paramname">tileCorner</td><td>tile location within renderedImage owner. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>raster with correct coordinate from its image owner. </dd></dl>

<p class="reference">References <a class="el" href="a06935.html#a6066c5a14d82eaf2fc9f9ed346d2e6f6">ImageTilesCache.riMinX</a>, and <a class="el" href="a06935.html#ae0109f8ce0de6192999a7545c9651503">ImageTilesCache.riMinY</a>.</p>

<p class="reference">Referenced by <a class="el" href="a06935.html#af8bcae42be7d229afa08a862dfa9e674">ImageTilesCache.add()</a>, and <a class="el" href="a06935.html#aeb95fde878113eda42f80436698cae66">ImageTilesCache.getRaster()</a>.</p>
<div class="fragment"><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                                                                                {</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">int</span> mx = <a class="code" href="a06935.html#a72738b80212c51c368e506a79254bc0f">riTileWidth</a>  * tileCorner.x + <a class="code" href="a06935.html#a6066c5a14d82eaf2fc9f9ed346d2e6f6">riMinX</a>;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">int</span> my = <a class="code" href="a06935.html#a4a4ac97e50d83639cce05478a26dd3fe">riTileHeight</a> * tileCorner.y + <a class="code" href="a06935.html#ae0109f8ce0de6192999a7545c9651503">riMinY</a>;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <span class="keywordflow">if</span> (raster.getMinX() != mx || raster.getMinY() != my) {</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="a14011.html">Raster</a>.createWritableRaster(raster.getSampleModel(), raster.getDataBuffer(), <span class="keyword">new</span> Point(mx, my));</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        }</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <span class="keywordflow">return</span> raster;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    }</div><div class="ttc" id="a14011_html"><div class="ttname"><a href="a14011.html">Raster</a></div></div>
<div class="ttc" id="a06935_html_ae0109f8ce0de6192999a7545c9651503"><div class="ttname"><a href="a06935.html#ae0109f8ce0de6192999a7545c9651503">org.geotoolkit.image.io.large.ImageTilesCache.riMinY</a></div><div class="ttdeci">final int riMinY</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:88</div></div>
<div class="ttc" id="a06935_html_a72738b80212c51c368e506a79254bc0f"><div class="ttname"><a href="a06935.html#a72738b80212c51c368e506a79254bc0f">org.geotoolkit.image.io.large.ImageTilesCache.riTileWidth</a></div><div class="ttdeci">final int riTileWidth</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:89</div></div>
<div class="ttc" id="a06935_html_a6066c5a14d82eaf2fc9f9ed346d2e6f6"><div class="ttname"><a href="a06935.html#a6066c5a14d82eaf2fc9f9ed346d2e6f6">org.geotoolkit.image.io.large.ImageTilesCache.riMinX</a></div><div class="ttdeci">final int riMinX</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:87</div></div>
<div class="ttc" id="a06935_html_a4a4ac97e50d83639cce05478a26dd3fe"><div class="ttname"><a href="a06935.html#a4a4ac97e50d83639cce05478a26dd3fe">org.geotoolkit.image.io.large.ImageTilesCache.riTileHeight</a></div><div class="ttdeci">final int riTileHeight</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:90</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af4473cb8a80f64482baf96c2768b50a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4473cb8a80f64482baf96c2768b50a8">&#9670;&nbsp;</a></span>getLock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ReadWriteLock getLock </td>
          <td>(</td>
          <td class="paramtype">final Point&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>when you use the lock keep it until release </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="reference">References <a class="el" href="a06935.html#a83f46a099d96c69e6777a0100a0f5c91">ImageTilesCache.locks</a>.</p>

<p class="reference">Referenced by <a class="el" href="a06935.html#abf76a7a653bd5c3b931fa74d7977e4d7">ImageTilesCache.add()</a>, <a class="el" href="a06935.html#a4a0663163ab4c1abf0f09e2a1f41161d">ImageTilesCache.checkMap()</a>, <a class="el" href="a06935.html#aeb95fde878113eda42f80436698cae66">ImageTilesCache.getRaster()</a>, and <a class="el" href="a06935.html#ae6355b41fc259820fcb2bf1952b858cb">ImageTilesCache.remove()</a>.</p>
<div class="fragment"><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                                                  {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        ReadWriteLock lock;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keyword">synchronized</span>(<a class="code" href="a06935.html#a83f46a099d96c69e6777a0100a0f5c91">locks</a>){</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            lock = <a class="code" href="a06935.html#a83f46a099d96c69e6777a0100a0f5c91">locks</a>.get(key);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            <span class="keywordflow">if</span> (lock == null) {</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                lock = <span class="keyword">new</span> ReentrantReadWriteLock();</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                <a class="code" href="a06935.html#a83f46a099d96c69e6777a0100a0f5c91">locks</a>.put(key, lock);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            }</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        }</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="keywordflow">return</span> lock;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    }</div><div class="ttc" id="a06935_html_a83f46a099d96c69e6777a0100a0f5c91"><div class="ttname"><a href="a06935.html#a83f46a099d96c69e6777a0100a0f5c91">org.geotoolkit.image.io.large.ImageTilesCache.locks</a></div><div class="ttdeci">final WeakValueHashMap&lt; Point, ReadWriteLock &gt; locks</div><div class="ttdoc">Tile by Tile locks. </div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:98</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeb95fde878113eda42f80436698cae66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb95fde878113eda42f80436698cae66">&#9670;&nbsp;</a></span>getRaster()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Raster getRaster </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tileX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tileY</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws IOException, <a class="el" href="a14171.html">IllegalArgumentException</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">package</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return <a class="el" href="">java.awt.image.Raster</a> at tileX tileY mosaic coordinates. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tileX</td><td>mosaic index in X direction. </td></tr>
    <tr><td class="paramname">tileY</td><td>mosaic index in Y direction. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Raster at tileX tileY mosaic coordinates. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">java.io.IOException</td><td>if an error occurs during reading.. </td></tr>
    <tr><td class="paramname"><a class="el" href="a14171.html">IllegalArgumentException</a></td><td>if raster not found in memory mode. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="a06935.html#af8bcae42be7d229afa08a862dfa9e674">ImageTilesCache.add()</a>, <a class="el" href="a06935.html#a5073fb8c4d6ec00ff2866fb0fa99e995">ImageTilesCache.checkRaster()</a>, <a class="el" href="a06935.html#af4473cb8a80f64482baf96c2768b50a8">ImageTilesCache.getLock()</a>, <a class="el" href="a06947.html#a87fe3543c92a9246737b3f766a4878fc">QuadTreeDirectory.getPath()</a>, <a class="el" href="a06951.html#a87eee6de998bb0709e05564cc54be16f">TileRasterCache.getRaster()</a>, and <a class="el" href="a06935.html#af7505229339a809e767b4c30d7ac6281">ImageTilesCache.tiles</a>.</p>

<p class="reference">Referenced by <a class="el" href="a06939.html#a0d892d0499aa412e02f01962847b5ef3">LargeCache.getTile()</a>, and <a class="el" href="a06939.html#a827bdda258a74582f2a9b06abe53dbfa">LargeCache.getTiles()</a>.</p>
<div class="fragment"><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                                                                                        {</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keyword">final</span> Point tileCorner = <span class="keyword">new</span> Point(tileX - <a class="code" href="a06935.html#ad89c58bf763b7a7e6458b36d0435cb91">minTileX</a>, tileY - <a class="code" href="a06935.html#a73c25a6adae78d5d98f5feb1c9123d20">minTileY</a>);</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="comment">// Check if queried raster is cached.</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="keyword">final</span> ReadWriteLock tileLock = <a class="code" href="a06935.html#af4473cb8a80f64482baf96c2768b50a8">getLock</a>(tileCorner);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        tileLock.readLock().lock();</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="keywordflow">try</span> {</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            <span class="keyword">final</span> TileRasterCache lRaster;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            <span class="keyword">synchronized</span>(<a class="code" href="a06935.html#af7505229339a809e767b4c30d7ac6281">tiles</a>){</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                lRaster= <a class="code" href="a06935.html#af7505229339a809e767b4c30d7ac6281">tiles</a>.get(tileCorner);</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            }</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            <span class="keywordflow">if</span> (lRaster != null) {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                <span class="keywordflow">return</span> lRaster.getRaster();</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            }</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        } <span class="keywordflow">finally</span> {</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            tileLock.readLock().unlock();</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        }</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="a06935.html#a43dad87ef2e7f50fd23750400c84ea45">qTD</a> == null) {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            <span class="comment">// raster not found in memory</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="a14171.html">IllegalArgumentException</a>(<span class="stringliteral">&quot;Tile (&quot;</span> + tileX + <span class="stringliteral">&quot;, &quot;</span> + tileY + <span class="stringliteral">&quot;) not found in memory.&quot;</span>);</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            <span class="comment">//-- lock in writing</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            tileLock.writeLock().lock();</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            <span class="keywordflow">try</span> {</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                <span class="comment">//-- asked again getRaster() in case another thread already enter</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                <span class="comment">//-- into this scope and has loaded tile from file system.</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                <span class="keyword">final</span> TileRasterCache lRaster;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                <span class="keyword">synchronized</span> (<a class="code" href="a06935.html#af7505229339a809e767b4c30d7ac6281">tiles</a>) {</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                    lRaster= <a class="code" href="a06935.html#af7505229339a809e767b4c30d7ac6281">tiles</a>.get(tileCorner);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                }</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                <span class="keywordflow">if</span> (lRaster != null) {</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                    <span class="keywordflow">return</span> lRaster.getRaster();</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                }</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                <span class="comment">// If not, we must take it from input quad-tree.</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                <span class="keyword">final</span> Path tileFile = Paths.get(<a class="code" href="a06935.html#a43dad87ef2e7f50fd23750400c84ea45">qTD</a>.<a class="code" href="a06947.html#a87fe3543c92a9246737b3f766a4878fc">getPath</a>(tileCorner.x, tileCorner.y));</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                <span class="keywordflow">if</span> (Files.exists(tileFile)) {</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                    <span class="comment">// TODO : Use a &quot;pool&quot; of readers, instead of creating one each time ?</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                    <span class="keyword">final</span> ImageReader imgReader = <a class="code" href="a06935.html#a9ccbd95e82ef4ef72b232216a77f8ccd">READER_SPI</a>.createReaderInstance();</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                    <span class="keyword">final</span> BufferedImage buff;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                    <span class="keywordflow">try</span> {</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                        imgReader.setInput(tileFile);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                        buff = imgReader.read(0);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                    }<span class="keywordflow">catch</span> (<a class="code" href="a14107.html">Exception</a> ex){</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                        <span class="keywordflow">throw</span> ex;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                    }<span class="keywordflow">finally</span> {</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                        imgReader.dispose();</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                    }</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                    <span class="comment">//add in cache list.</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                    <span class="keyword">final</span> WritableRaster checkedRaster = <a class="code" href="a06935.html#a5073fb8c4d6ec00ff2866fb0fa99e995">checkRaster</a>(buff.getRaster(), tileCorner);</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                    <a class="code" href="a06935.html#af8bcae42be7d229afa08a862dfa9e674">add</a>(tileCorner, checkedRaster);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                    <span class="keywordflow">return</span> checkedRaster;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                }</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            } <span class="keywordflow">finally</span> {</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;               tileLock.writeLock().unlock();</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            }</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        }</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <span class="keywordflow">throw</span> <span class="keyword">new</span> IOException(<span class="stringliteral">&quot;Tile (&quot;</span> + tileX + <span class="stringliteral">&quot;, &quot;</span> + tileY + <span class="stringliteral">&quot;) unknown. Cannot get raster.&quot;</span>);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    }</div><div class="ttc" id="a06935_html_a73c25a6adae78d5d98f5feb1c9123d20"><div class="ttname"><a href="a06935.html#a73c25a6adae78d5d98f5feb1c9123d20">org.geotoolkit.image.io.large.ImageTilesCache.minTileY</a></div><div class="ttdeci">final int minTileY</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:83</div></div>
<div class="ttc" id="a06935_html_a9ccbd95e82ef4ef72b232216a77f8ccd"><div class="ttname"><a href="a06935.html#a9ccbd95e82ef4ef72b232216a77f8ccd">org.geotoolkit.image.io.large.ImageTilesCache.READER_SPI</a></div><div class="ttdeci">static final ImageReaderSpi READER_SPI</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:69</div></div>
<div class="ttc" id="a06935_html_a5073fb8c4d6ec00ff2866fb0fa99e995"><div class="ttname"><a href="a06935.html#a5073fb8c4d6ec00ff2866fb0fa99e995">org.geotoolkit.image.io.large.ImageTilesCache.checkRaster</a></div><div class="ttdeci">WritableRaster checkRaster(WritableRaster raster, Point tileCorner)</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:470</div></div>
<div class="ttc" id="a06935_html_a43dad87ef2e7f50fd23750400c84ea45"><div class="ttname"><a href="a06935.html#a43dad87ef2e7f50fd23750400c84ea45">org.geotoolkit.image.io.large.ImageTilesCache.qTD</a></div><div class="ttdeci">final QuadTreeDirectory qTD</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:86</div></div>
<div class="ttc" id="a06935_html_ad89c58bf763b7a7e6458b36d0435cb91"><div class="ttname"><a href="a06935.html#ad89c58bf763b7a7e6458b36d0435cb91">org.geotoolkit.image.io.large.ImageTilesCache.minTileX</a></div><div class="ttdeci">final int minTileX</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:82</div></div>
<div class="ttc" id="a06935_html_af4473cb8a80f64482baf96c2768b50a8"><div class="ttname"><a href="a06935.html#af4473cb8a80f64482baf96c2768b50a8">org.geotoolkit.image.io.large.ImageTilesCache.getLock</a></div><div class="ttdeci">ReadWriteLock getLock(final Point key)</div><div class="ttdoc">when you use the lock keep it until release </div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:138</div></div>
<div class="ttc" id="a14171_html"><div class="ttname"><a href="a14171.html">IllegalArgumentException</a></div></div>
<div class="ttc" id="a14107_html"><div class="ttname"><a href="a14107.html">Exception</a></div></div>
<div class="ttc" id="a06947_html_a87fe3543c92a9246737b3f766a4878fc"><div class="ttname"><a href="a06947.html#a87fe3543c92a9246737b3f766a4878fc">org.geotoolkit.image.io.large.QuadTreeDirectory.getPath</a></div><div class="ttdeci">String getPath(int x, int y)</div><div class="ttdoc">Return appropriate path of element at X, Y position. </div><div class="ttdef"><b>Definition:</b> QuadTreeDirectory.java:137</div></div>
<div class="ttc" id="a06935_html_af8bcae42be7d229afa08a862dfa9e674"><div class="ttname"><a href="a06935.html#af8bcae42be7d229afa08a862dfa9e674">org.geotoolkit.image.io.large.ImageTilesCache.add</a></div><div class="ttdeci">void add(int tileX, int tileY, WritableRaster raster)</div><div class="ttdoc">Add a java.awt.image.Raster in list and check list to don&amp;#39;t exceed memory capacity. </div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:222</div></div>
<div class="ttc" id="a06935_html_af7505229339a809e767b4c30d7ac6281"><div class="ttname"><a href="a06935.html#af7505229339a809e767b4c30d7ac6281">org.geotoolkit.image.io.large.ImageTilesCache.tiles</a></div><div class="ttdeci">final Map&lt; Point, TileRasterCache &gt; tiles</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:110</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6ea34468cd71bf452f648431d863675d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ea34468cd71bf452f648431d863675d">&#9670;&nbsp;</a></span>getRasterWeight()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">long getRasterWeight </td>
          <td>(</td>
          <td class="paramtype">final Raster&#160;</td>
          <td class="paramname"><em>raster</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Define the weight of a <a class="el" href="">java.awt.image.Raster</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">raster</td><td>raster which will be weigh. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>raster weight. </dd></dl>

<p class="reference">References <a class="el" href="a06935.html#aa46a98b32449a507a35e906140d5ef77">ImageTilesCache.dataTypeWeight</a>.</p>

<p class="reference">Referenced by <a class="el" href="a06935.html#abf76a7a653bd5c3b931fa74d7977e4d7">ImageTilesCache.add()</a>.</p>
<div class="fragment"><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                                                      {</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="keyword">final</span> SampleModel rsm = raster.getSampleModel();</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">int</span> width = (rsm instanceof ComponentSampleModel) ? ((ComponentSampleModel) rsm).getScanlineStride() : raster.getWidth()*rsm.getNumDataElements();</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keywordflow">return</span> width * raster.getHeight() * <a class="code" href="a06935.html#aa46a98b32449a507a35e906140d5ef77">dataTypeWeight</a>;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    }</div><div class="ttc" id="a06935_html_aa46a98b32449a507a35e906140d5ef77"><div class="ttname"><a href="a06935.html#aa46a98b32449a507a35e906140d5ef77">org.geotoolkit.image.io.large.ImageTilesCache.dataTypeWeight</a></div><div class="ttdeci">final int dataTypeWeight</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:91</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0fe8ffb14df11dcd32290d65cf79d74f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fe8ffb14df11dcd32290d65cf79d74f">&#9670;&nbsp;</a></span>getUsedCapacity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long getUsedCapacity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get currently used amount of memory, this is just an estimation. </p>
<dl class="section return"><dt>Returns</dt><dd>memory used. </dd></dl>
<div class="fragment"><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                                  {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="a06935.html#afc73fad098e8f85ac4cc9af2471506c0">usedCapacity</a>.get();</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    }</div><div class="ttc" id="a06935_html_afc73fad098e8f85ac4cc9af2471506c0"><div class="ttname"><a href="a06935.html#afc73fad098e8f85ac4cc9af2471506c0">org.geotoolkit.image.io.large.ImageTilesCache.usedCapacity</a></div><div class="ttdeci">final AtomicLong usedCapacity</div><div class="ttdoc">Contains tiles of pointed image. </div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:109</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aca50d948c49e8a0d6e697e385aed0afa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca50d948c49e8a0d6e697e385aed0afa">&#9670;&nbsp;</a></span>releaseReader()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void releaseReader </td>
          <td>(</td>
          <td class="paramtype">ImageReader&#160;</td>
          <td class="paramname"><em>imageReader</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Release ImageReader and his input. </p>
<p>TODO replace with XImageIO utility methods </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">imageReader</td><td></td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                                                        {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <span class="keywordflow">if</span>(imageReader != null) {</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            <a class="code" href="a13483.html">Object</a> writerOutput = imageReader.getInput();</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            <span class="keywordflow">if</span>(writerOutput instanceof OutputStream){</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                <span class="keywordflow">try</span> {</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                    ((OutputStream)writerOutput).close();</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                } <span class="keywordflow">catch</span> (IOException ex) {</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                    <a class="code" href="a06935.html#ab1d069f56091df4f6436f8c713ab2f39">LOGGER</a>.log(Level.INFO, ex.getMessage(),ex);</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                }</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(writerOutput instanceof ImageOutputStream){</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                <span class="keywordflow">try</span> {</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                    ((ImageOutputStream)writerOutput).close();</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                } <span class="keywordflow">catch</span> (IOException ex) {</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                    <a class="code" href="a06935.html#ab1d069f56091df4f6436f8c713ab2f39">LOGGER</a>.log(Level.INFO, ex.getMessage(),ex);</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                }</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            }</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            imageReader.dispose();</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        }</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    }</div><div class="ttc" id="a13483_html"><div class="ttname"><a href="a13483.html">Object</a></div></div>
<div class="ttc" id="a06935_html_ab1d069f56091df4f6436f8c713ab2f39"><div class="ttname"><a href="a06935.html#ab1d069f56091df4f6436f8c713ab2f39">org.geotoolkit.image.io.large.ImageTilesCache.LOGGER</a></div><div class="ttdeci">static final Logger LOGGER</div><div class="ttdoc">Logger to show problem during Tile deletion. </div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:65</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0227bdcbb2849264466f2af39c07476a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0227bdcbb2849264466f2af39c07476a">&#9670;&nbsp;</a></span>releaseWriter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void releaseWriter </td>
          <td>(</td>
          <td class="paramtype">ImageWriter&#160;</td>
          <td class="paramname"><em>imgWriter</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Release ImageWriter and his output. </p>
<p>TODO replace with XImageIO utility methods </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">imgWriter</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="reference">Referenced by <a class="el" href="a06935.html#a688620f315e577082837136b90381143">ImageTilesCache.writeRaster()</a>.</p>
<div class="fragment"><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                                                      {</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <span class="keywordflow">if</span>(imgWriter != null) {</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            <a class="code" href="a13483.html">Object</a> writerOutput = imgWriter.getOutput();</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            <span class="keywordflow">if</span>(writerOutput instanceof OutputStream){</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                <span class="keywordflow">try</span> {</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                    ((OutputStream)writerOutput).close();</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                } <span class="keywordflow">catch</span> (IOException ex) {</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                    <a class="code" href="a06935.html#ab1d069f56091df4f6436f8c713ab2f39">LOGGER</a>.log(Level.INFO, ex.getMessage(),ex);</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                }</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(writerOutput instanceof ImageOutputStream){</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                <span class="keywordflow">try</span> {</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                    ((ImageOutputStream)writerOutput).close();</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                } <span class="keywordflow">catch</span> (IOException ex) {</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                    <a class="code" href="a06935.html#ab1d069f56091df4f6436f8c713ab2f39">LOGGER</a>.log(Level.INFO, ex.getMessage(),ex);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                }</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            }</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            imgWriter.dispose();</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        }</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    }</div><div class="ttc" id="a13483_html"><div class="ttname"><a href="a13483.html">Object</a></div></div>
<div class="ttc" id="a06935_html_ab1d069f56091df4f6436f8c713ab2f39"><div class="ttname"><a href="a06935.html#ab1d069f56091df4f6436f8c713ab2f39">org.geotoolkit.image.io.large.ImageTilesCache.LOGGER</a></div><div class="ttdeci">static final Logger LOGGER</div><div class="ttdoc">Logger to show problem during Tile deletion. </div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:65</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae6355b41fc259820fcb2bf1952b858cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6355b41fc259820fcb2bf1952b858cb">&#9670;&nbsp;</a></span>remove()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void remove </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tileX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tileY</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">package</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove <a class="el" href="">java.awt.image.Raster</a> at tileX tileY mosaic coordinates. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tileX</td><td>mosaic index in X direction. </td></tr>
    <tr><td class="paramname">tileY</td><td>mosaic index in Y direction. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="a07423.html#ae5384530aa3d1a5be9393ee3d7f6637b">IOUtilities.deleteOnExit()</a>, <a class="el" href="a06935.html#af4473cb8a80f64482baf96c2768b50a8">ImageTilesCache.getLock()</a>, <a class="el" href="a06947.html#a87fe3543c92a9246737b3f766a4878fc">QuadTreeDirectory.getPath()</a>, and <a class="el" href="a06935.html#af7505229339a809e767b4c30d7ac6281">ImageTilesCache.tiles</a>.</p>

<p class="reference">Referenced by <a class="el" href="a06939.html#ad9fc0580b2a911056d3e5f97a6fdc871">LargeCache.LargeCache()</a>, <a class="el" href="a06939.html#a26aacc64c8216089a331a7a3267cd10d">LargeCache.remove()</a>, and <a class="el" href="a06939.html#ac1b92c36f5eb1a79efa217776bff1450">LargeCache.removeTiles()</a>.</p>
<div class="fragment"><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                                      {</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keyword">final</span> Point tileCorner = <span class="keyword">new</span> Point(tileX - <a class="code" href="a06935.html#ad89c58bf763b7a7e6458b36d0435cb91">minTileX</a>, tileY - <a class="code" href="a06935.html#a73c25a6adae78d5d98f5feb1c9123d20">minTileY</a>);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="keyword">final</span> ReadWriteLock tileLock = <a class="code" href="a06935.html#af4473cb8a80f64482baf96c2768b50a8">getLock</a>(tileCorner);</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        tileLock.writeLock().lock();</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="keywordflow">try</span> {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            <span class="keyword">synchronized</span>(<a class="code" href="a06935.html#af7505229339a809e767b4c30d7ac6281">tiles</a>){</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                <a class="code" href="a06935.html#af7505229339a809e767b4c30d7ac6281">tiles</a>.remove(tileCorner);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            }</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="a06935.html#a43dad87ef2e7f50fd23750400c84ea45">qTD</a> != null) {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                <span class="comment">//quad tree</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                <span class="keyword">final</span> Path removeFile = Paths.get(<a class="code" href="a06935.html#a43dad87ef2e7f50fd23750400c84ea45">qTD</a>.<a class="code" href="a06947.html#a87fe3543c92a9246737b3f766a4878fc">getPath</a>(tileCorner.x, tileCorner.y));</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                <span class="comment">//delete on hard disk if exist.</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                <span class="keywordflow">try</span> {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                    Files.deleteIfExists(removeFile);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                } <span class="keywordflow">catch</span> (IOException e) {</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                    <span class="comment">//delete failed try to delete it when JVM shutdown</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                    <a class="code" href="a06935.html#ab1d069f56091df4f6436f8c713ab2f39">LOGGER</a>.log(Level.FINE,<span class="stringliteral">&quot;Tile delete failed : &quot;</span>+ e.getLocalizedMessage(), e);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                    IOUtilities.deleteOnExit(removeFile);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                }</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            }</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        } <span class="keywordflow">finally</span> {</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            tileLock.writeLock().unlock();</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    }</div><div class="ttc" id="a06935_html_a73c25a6adae78d5d98f5feb1c9123d20"><div class="ttname"><a href="a06935.html#a73c25a6adae78d5d98f5feb1c9123d20">org.geotoolkit.image.io.large.ImageTilesCache.minTileY</a></div><div class="ttdeci">final int minTileY</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:83</div></div>
<div class="ttc" id="a06935_html_a43dad87ef2e7f50fd23750400c84ea45"><div class="ttname"><a href="a06935.html#a43dad87ef2e7f50fd23750400c84ea45">org.geotoolkit.image.io.large.ImageTilesCache.qTD</a></div><div class="ttdeci">final QuadTreeDirectory qTD</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:86</div></div>
<div class="ttc" id="a06935_html_ad89c58bf763b7a7e6458b36d0435cb91"><div class="ttname"><a href="a06935.html#ad89c58bf763b7a7e6458b36d0435cb91">org.geotoolkit.image.io.large.ImageTilesCache.minTileX</a></div><div class="ttdeci">final int minTileX</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:82</div></div>
<div class="ttc" id="a06935_html_af4473cb8a80f64482baf96c2768b50a8"><div class="ttname"><a href="a06935.html#af4473cb8a80f64482baf96c2768b50a8">org.geotoolkit.image.io.large.ImageTilesCache.getLock</a></div><div class="ttdeci">ReadWriteLock getLock(final Point key)</div><div class="ttdoc">when you use the lock keep it until release </div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:138</div></div>
<div class="ttc" id="a06947_html_a87fe3543c92a9246737b3f766a4878fc"><div class="ttname"><a href="a06947.html#a87fe3543c92a9246737b3f766a4878fc">org.geotoolkit.image.io.large.QuadTreeDirectory.getPath</a></div><div class="ttdeci">String getPath(int x, int y)</div><div class="ttdoc">Return appropriate path of element at X, Y position. </div><div class="ttdef"><b>Definition:</b> QuadTreeDirectory.java:137</div></div>
<div class="ttc" id="a06935_html_af7505229339a809e767b4c30d7ac6281"><div class="ttname"><a href="a06935.html#af7505229339a809e767b4c30d7ac6281">org.geotoolkit.image.io.large.ImageTilesCache.tiles</a></div><div class="ttdeci">final Map&lt; Point, TileRasterCache &gt; tiles</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:110</div></div>
<div class="ttc" id="a06935_html_ab1d069f56091df4f6436f8c713ab2f39"><div class="ttname"><a href="a06935.html#ab1d069f56091df4f6436f8c713ab2f39">org.geotoolkit.image.io.large.ImageTilesCache.LOGGER</a></div><div class="ttdeci">static final Logger LOGGER</div><div class="ttdoc">Logger to show problem during Tile deletion. </div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:65</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac73602c55a5127d74142f30d5e00f167"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac73602c55a5127d74142f30d5e00f167">&#9670;&nbsp;</a></span>removeTiles()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void removeTiles </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws IOException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">package</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove all file and directory relevant to this cached image. </p>

<p class="reference">References <a class="el" href="a06947.html#a0b8f726a5cbc165a6af3d17cdc8b3931">QuadTreeDirectory.cleanDirectory()</a>, and <a class="el" href="a06935.html#af7505229339a809e767b4c30d7ac6281">ImageTilesCache.tiles</a>.</p>

<p class="reference">Referenced by <a class="el" href="a06939.html#ad9fc0580b2a911056d3e5f97a6fdc871">LargeCache.LargeCache()</a>, and <a class="el" href="a06939.html#ac1b92c36f5eb1a79efa217776bff1450">LargeCache.removeTiles()</a>.</p>
<div class="fragment"><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                                          {</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="comment">//rendered image won&#39;t be used after this</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="keyword">synchronized</span>(<a class="code" href="a06935.html#af7505229339a809e767b4c30d7ac6281">tiles</a>){</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            <a class="code" href="a06935.html#af7505229339a809e767b4c30d7ac6281">tiles</a>.clear();</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="a06935.html#a43dad87ef2e7f50fd23750400c84ea45">qTD</a> != null) {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                <a class="code" href="a06935.html#a43dad87ef2e7f50fd23750400c84ea45">qTD</a>.<a class="code" href="a06947.html#a0b8f726a5cbc165a6af3d17cdc8b3931">cleanDirectory</a>();</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            }</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        }</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    }</div><div class="ttc" id="a06947_html_a0b8f726a5cbc165a6af3d17cdc8b3931"><div class="ttname"><a href="a06947.html#a0b8f726a5cbc165a6af3d17cdc8b3931">org.geotoolkit.image.io.large.QuadTreeDirectory.cleanDirectory</a></div><div class="ttdeci">void cleanDirectory()</div><div class="ttdoc">Delete root directory recursively. </div><div class="ttdef"><b>Definition:</b> QuadTreeDirectory.java:240</div></div>
<div class="ttc" id="a06935_html_a43dad87ef2e7f50fd23750400c84ea45"><div class="ttname"><a href="a06935.html#a43dad87ef2e7f50fd23750400c84ea45">org.geotoolkit.image.io.large.ImageTilesCache.qTD</a></div><div class="ttdeci">final QuadTreeDirectory qTD</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:86</div></div>
<div class="ttc" id="a06935_html_af7505229339a809e767b4c30d7ac6281"><div class="ttname"><a href="a06935.html#af7505229339a809e767b4c30d7ac6281">org.geotoolkit.image.io.large.ImageTilesCache.tiles</a></div><div class="ttdeci">final Map&lt; Point, TileRasterCache &gt; tiles</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:110</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a688620f315e577082837136b90381143"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a688620f315e577082837136b90381143">&#9670;&nbsp;</a></span>writeRaster()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void writeRaster </td>
          <td>(</td>
          <td class="paramtype">final <a class="el" href="a06951.html">TileRasterCache</a>&#160;</td>
          <td class="paramname"><em>lRaster</em></td><td>)</td>
          <td> throws IOException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write <a class="el" href="">java.awt.image.Raster</a> within <a class="el" href="a06951.html">org.geotoolkit.image.io.large.TileRasterCache</a> object on hard disk at appropriate quad tree emplacement. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lRaster</td><td>object which contain raster. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">java.io.IOException</td><td>if impossible to write raster on disk. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="a06947.html#a87fe3543c92a9246737b3f766a4878fc">QuadTreeDirectory.getPath()</a>, <a class="el" href="a06935.html#a0227bdcbb2849264466f2af39c07476a">ImageTilesCache.releaseWriter()</a>, and <a class="el" href="a06935.html#a7347379b407db487c04a235379b39fa6">ImageTilesCache.WPOINT</a>.</p>

<p class="reference">Referenced by <a class="el" href="a06935.html#a4a0663163ab4c1abf0f09e2a1f41161d">ImageTilesCache.checkMap()</a>.</p>
<div class="fragment"><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                                                                               {</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="keyword">final</span> Path tileFile = Paths.get(<a class="code" href="a06935.html#a43dad87ef2e7f50fd23750400c84ea45">qTD</a>.<a class="code" href="a06947.html#a87fe3543c92a9246737b3f766a4878fc">getPath</a>(lRaster.getGridX(), lRaster.getGridY()));</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="a06935.html#abd282b55a30b469fc5807bed46a035d1">isWritableRenderedImage</a> || !Files.exists(tileFile)) {</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            <span class="keyword">final</span> BufferedImage toWrite = <span class="keyword">new</span> BufferedImage(</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                    <a class="code" href="a06935.html#a29c641b243f938d56724effe86c4412a">cm</a>, RasterFactory.createWritableRaster(lRaster.getRaster().getSampleModel(), lRaster.getRaster().getDataBuffer(), <a class="code" href="a06935.html#a7347379b407db487c04a235379b39fa6">WPOINT</a>),</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                    <a class="code" href="a06935.html#a29c641b243f938d56724effe86c4412a">cm</a>.isAlphaPremultiplied(), null);</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            <span class="comment">// TODO : Optimize using a &quot;writer pool&quot; instead of creating one each time ?</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            <span class="keyword">final</span> ImageWriter imgWriter = <a class="code" href="a06935.html#aa3a29f710ce33da63313871cd25e6a4e">WRITER_SPI</a>.createWriterInstance();</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            <span class="keywordflow">try</span> {</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                imgWriter.setOutput(tileFile);</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                imgWriter.write(toWrite);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                imgWriter.dispose();</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            } <span class="keywordflow">finally</span> {</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                <a class="code" href="a06935.html#a0227bdcbb2849264466f2af39c07476a">releaseWriter</a>(imgWriter);</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            }</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        }</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    }</div><div class="ttc" id="a06935_html_abd282b55a30b469fc5807bed46a035d1"><div class="ttname"><a href="a06935.html#abd282b55a30b469fc5807bed46a035d1">org.geotoolkit.image.io.large.ImageTilesCache.isWritableRenderedImage</a></div><div class="ttdeci">final boolean isWritableRenderedImage</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:93</div></div>
<div class="ttc" id="a06935_html_a0227bdcbb2849264466f2af39c07476a"><div class="ttname"><a href="a06935.html#a0227bdcbb2849264466f2af39c07476a">org.geotoolkit.image.io.large.ImageTilesCache.releaseWriter</a></div><div class="ttdeci">void releaseWriter(ImageWriter imgWriter)</div><div class="ttdoc">Release ImageWriter and his output. </div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:441</div></div>
<div class="ttc" id="a06935_html_aa3a29f710ce33da63313871cd25e6a4e"><div class="ttname"><a href="a06935.html#aa3a29f710ce33da63313871cd25e6a4e">org.geotoolkit.image.io.large.ImageTilesCache.WRITER_SPI</a></div><div class="ttdeci">static final ImageWriterSpi WRITER_SPI</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:70</div></div>
<div class="ttc" id="a06935_html_a29c641b243f938d56724effe86c4412a"><div class="ttname"><a href="a06935.html#a29c641b243f938d56724effe86c4412a">org.geotoolkit.image.io.large.ImageTilesCache.cm</a></div><div class="ttdeci">ColorModel cm</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:81</div></div>
<div class="ttc" id="a06935_html_a43dad87ef2e7f50fd23750400c84ea45"><div class="ttname"><a href="a06935.html#a43dad87ef2e7f50fd23750400c84ea45">org.geotoolkit.image.io.large.ImageTilesCache.qTD</a></div><div class="ttdeci">final QuadTreeDirectory qTD</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:86</div></div>
<div class="ttc" id="a06947_html_a87fe3543c92a9246737b3f766a4878fc"><div class="ttname"><a href="a06947.html#a87fe3543c92a9246737b3f766a4878fc">org.geotoolkit.image.io.large.QuadTreeDirectory.getPath</a></div><div class="ttdeci">String getPath(int x, int y)</div><div class="ttdoc">Return appropriate path of element at X, Y position. </div><div class="ttdef"><b>Definition:</b> QuadTreeDirectory.java:137</div></div>
<div class="ttc" id="a06935_html_a7347379b407db487c04a235379b39fa6"><div class="ttname"><a href="a06935.html#a7347379b407db487c04a235379b39fa6">org.geotoolkit.image.io.large.ImageTilesCache.WPOINT</a></div><div class="ttdeci">static final Point WPOINT</div><div class="ttdef"><b>Definition:</b> ImageTilesCache.java:78</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ac6b4a30c1503dc089465ebe413262e13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6b4a30c1503dc089465ebe413262e13">&#9670;&nbsp;</a></span>cache</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final <a class="el" href="a06939.html">LargeCache</a> cache</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="a06935.html#a202d382163631085086db6de0229fb9c">ImageTilesCache.ImageTilesCache()</a>.</p>

</div>
</div>
<a id="a29c641b243f938d56724effe86c4412a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29c641b243f938d56724effe86c4412a">&#9670;&nbsp;</a></span>cm</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ColorModel cm</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa46a98b32449a507a35e906140d5ef77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa46a98b32449a507a35e906140d5ef77">&#9670;&nbsp;</a></span>dataTypeWeight</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final int dataTypeWeight</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="a06935.html#a6ea34468cd71bf452f648431d863675d">ImageTilesCache.getRasterWeight()</a>.</p>

</div>
</div>
<a id="a6f554e3a3080c35d3fe1e17eddd918d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f554e3a3080c35d3fe1e17eddd918d8">&#9670;&nbsp;</a></span>FORMAT</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final String FORMAT = &quot;geotiff&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="abd282b55a30b469fc5807bed46a035d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd282b55a30b469fc5807bed46a035d1">&#9670;&nbsp;</a></span>isWritableRenderedImage</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final boolean isWritableRenderedImage</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a83f46a099d96c69e6777a0100a0f5c91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83f46a099d96c69e6777a0100a0f5c91">&#9670;&nbsp;</a></span>locks</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final WeakValueHashMap&lt;Point,ReadWriteLock&gt; locks = new WeakValueHashMap&lt;&gt;(Point.class)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tile by Tile locks. </p>

<p class="reference">Referenced by <a class="el" href="a06935.html#af4473cb8a80f64482baf96c2768b50a8">ImageTilesCache.getLock()</a>.</p>

</div>
</div>
<a id="ab1d069f56091df4f6436f8c713ab2f39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1d069f56091df4f6436f8c713ab2f39">&#9670;&nbsp;</a></span>LOGGER</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final Logger LOGGER = Logging.getLogger(&quot;org.geotoolkit.image.io.large&quot;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="">Logger</a> to show problem during Tile deletion. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="a06935.html#a4a0663163ab4c1abf0f09e2a1f41161d">checkMap()</a> </dd></dl>

</div>
</div>
<a id="ad89c58bf763b7a7e6458b36d0435cb91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad89c58bf763b7a7e6458b36d0435cb91">&#9670;&nbsp;</a></span>minTileX</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final int minTileX</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a73c25a6adae78d5d98f5feb1c9123d20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73c25a6adae78d5d98f5feb1c9123d20">&#9670;&nbsp;</a></span>minTileY</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final int minTileY</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a4599589f7defec6c66b2f9f92ca8ca4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4599589f7defec6c66b2f9f92ca8ca4c">&#9670;&nbsp;</a></span>numTilesX</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final int numTilesX</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a12ac87002dd1f05d9f0771ec5bb6e5bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12ac87002dd1f05d9f0771ec5bb6e5bd">&#9670;&nbsp;</a></span>numTilesY</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final int numTilesY</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a43dad87ef2e7f50fd23750400c84ea45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43dad87ef2e7f50fd23750400c84ea45">&#9670;&nbsp;</a></span>qTD</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final <a class="el" href="a06947.html">QuadTreeDirectory</a> qTD</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a9ccbd95e82ef4ef72b232216a77f8ccd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ccbd95e82ef4ef72b232216a77f8ccd">&#9670;&nbsp;</a></span>READER_SPI</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final ImageReaderSpi READER_SPI</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a6066c5a14d82eaf2fc9f9ed346d2e6f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6066c5a14d82eaf2fc9f9ed346d2e6f6">&#9670;&nbsp;</a></span>riMinX</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final int riMinX</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="a06935.html#a5073fb8c4d6ec00ff2866fb0fa99e995">ImageTilesCache.checkRaster()</a>.</p>

</div>
</div>
<a id="ae0109f8ce0de6192999a7545c9651503"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0109f8ce0de6192999a7545c9651503">&#9670;&nbsp;</a></span>riMinY</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final int riMinY</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="a06935.html#a5073fb8c4d6ec00ff2866fb0fa99e995">ImageTilesCache.checkRaster()</a>.</p>

</div>
</div>
<a id="a4a4ac97e50d83639cce05478a26dd3fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a4ac97e50d83639cce05478a26dd3fe">&#9670;&nbsp;</a></span>riTileHeight</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final int riTileHeight</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a72738b80212c51c368e506a79254bc0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72738b80212c51c368e506a79254bc0f">&#9670;&nbsp;</a></span>riTileWidth</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final int riTileWidth</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ace031f4e0eaaaa534b7c1b57528b1e0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace031f4e0eaaaa534b7c1b57528b1e0f">&#9670;&nbsp;</a></span>TEMPORARY_PATH</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final Path TEMPORARY_PATH = Paths.get(System.getProperty(&quot;java.io.tmpdir&quot;))</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="af7505229339a809e767b4c30d7ac6281"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7505229339a809e767b4c30d7ac6281">&#9670;&nbsp;</a></span>tiles</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final Map&lt;Point, <a class="el" href="a06951.html">TileRasterCache</a>&gt; tiles</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= <span class="keyword">new</span> LinkedHashMap&lt;Point, TileRasterCache&gt;(16, 0.75f, <span class="keyword">true</span>){</div><div class="line">        @Override</div><div class="line">        <span class="keyword">public</span> TileRasterCache put(Point key, TileRasterCache value) {</div><div class="line">            <span class="keyword">final</span> TileRasterCache last = super.put(key, value);</div><div class="line">            <span class="keywordflow">if</span>(last!=null) <a class="code" href="a06935.html#afc73fad098e8f85ac4cc9af2471506c0">usedCapacity</a>.addAndGet(-last.getWeight());</div><div class="line">            <span class="keywordflow">if</span>(value!=null) <a class="code" href="a06935.html#afc73fad098e8f85ac4cc9af2471506c0">usedCapacity</a>.addAndGet(value.getWeight());</div><div class="line">            <span class="keywordflow">return</span> last;</div><div class="line">        }</div><div class="line">        @Override</div><div class="line">        <span class="keyword">public</span> <span class="keywordtype">void</span> clear() {</div><div class="line">            super.clear();</div><div class="line">            <a class="code" href="a06935.html#afc73fad098e8f85ac4cc9af2471506c0">usedCapacity</a>.set(0);</div><div class="line">        }</div><div class="line">        @Override</div><div class="line">        <span class="keyword">public</span> TileRasterCache <span class="keyword">remove</span>(Object key) {</div><div class="line">            <span class="keyword">final</span> TileRasterCache last = super.remove(key);</div><div class="line">            <span class="keywordflow">if</span>(last!=null) <a class="code" href="a06935.html#afc73fad098e8f85ac4cc9af2471506c0">usedCapacity</a>.addAndGet(-last.getWeight());</div><div class="line">            <span class="keywordflow">return</span> last;</div><div class="line">        }</div><div class="line">    }</div></div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="a06935.html#abf76a7a653bd5c3b931fa74d7977e4d7">ImageTilesCache.add()</a>, <a class="el" href="a06935.html#a4a0663163ab4c1abf0f09e2a1f41161d">ImageTilesCache.checkMap()</a>, <a class="el" href="a06935.html#aeb95fde878113eda42f80436698cae66">ImageTilesCache.getRaster()</a>, <a class="el" href="a06935.html#ae6355b41fc259820fcb2bf1952b858cb">ImageTilesCache.remove()</a>, and <a class="el" href="a06935.html#ac73602c55a5127d74142f30d5e00f167">ImageTilesCache.removeTiles()</a>.</p>

</div>
</div>
<a id="afc73fad098e8f85ac4cc9af2471506c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc73fad098e8f85ac4cc9af2471506c0">&#9670;&nbsp;</a></span>usedCapacity</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final AtomicLong usedCapacity = new AtomicLong(0)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Contains tiles of pointed image. </p>
<p>TODO : Replace LargeRaster type with simple raster ? (Raster weight will be embed in <a class="el" href="">org.geotoolkit.image.io.large.CachedTile</a></p>
<p>accesOrder = true : this ensure the must used element are at the top This behavior is used by the flush to remove the oldest used tiles first</p>
<p>We subclass the map to keep track of the used memory. </p>

</div>
</div>
<a id="a7347379b407db487c04a235379b39fa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7347379b407db487c04a235379b39fa6">&#9670;&nbsp;</a></span>WPOINT</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final Point WPOINT = new Point(0, 0)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="a06935.html#a688620f315e577082837136b90381143">ImageTilesCache.writeRaster()</a>.</p>

</div>
</div>
<a id="aa3a29f710ce33da63313871cd25e6a4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3a29f710ce33da63313871cd25e6a4e">&#9670;&nbsp;</a></span>WRITER_SPI</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final ImageWriterSpi WRITER_SPI</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a03806.html">org</a></li><li class="navelem"><a class="el" href="a03815.html">geotoolkit</a></li><li class="navelem"><a class="el" href="a03823.html">image</a></li><li class="navelem"><a class="el" href="a03829.html">io</a></li><li class="navelem"><a class="el" href="a03828.html">large</a></li><li class="navelem"><a class="el" href="a06935.html">ImageTilesCache</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
