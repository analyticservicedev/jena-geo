<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>jena-geo: MultiDimensionMove Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">jena-geo
   &#160;<span id="projectnumber">Version 0.1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a08151.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pac-static-methods">Static Package Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="a08148.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">MultiDimensionMove Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Find intersection points between a segment and a regular grid whose cells sides are of length 1.  
 <a href="a08151.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for MultiDimensionMove:</div>
<div class="dyncontent">
<div class="center"><img src="a08150.png" border="0" usemap="#MultiDimensionMove_inherit__map" alt="Inheritance graph"/></div>
<map name="MultiDimensionMove_inherit__map" id="MultiDimensionMove_inherit__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for MultiDimensionMove:</div>
<div class="dyncontent">
<div class="center"><img src="a08149.png" border="0" usemap="#MultiDimensionMove_coll__map" alt="Collaboration graph"/></div>
<map name="MultiDimensionMove_coll__map" id="MultiDimensionMove_coll__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a36bd4cbe1726e044a3e651a741e909d4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08151.html#a36bd4cbe1726e044a3e651a741e909d4">MultiDimensionMove</a> (double[] <a class="el" href="a08151.html#aa97caef1764972e992bc82428f880936">startPoint</a>, double[] <a class="el" href="a08151.html#af00da1fe605ef44791d599ecf157ae85">endPoint</a>)</td></tr>
<tr class="memdesc:a36bd4cbe1726e044a3e651a741e909d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new spliterator to find intersections between a segment AB and a regular grid.  <a href="#a36bd4cbe1726e044a3e651a741e909d4">More...</a><br /></td></tr>
<tr class="separator:a36bd4cbe1726e044a3e651a741e909d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9292f4c10f19f790a29e9cdfa0e313f"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08151.html#af9292f4c10f19f790a29e9cdfa0e313f">tryAdvance</a> (Consumer&lt;? super double[]&gt; action)</td></tr>
<tr class="separator:af9292f4c10f19f790a29e9cdfa0e313f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59d451ed808fa8e7a0c0416239ed410f"><td class="memItemLeft" align="right" valign="top">Spliterator&lt; double[]&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08151.html#a59d451ed808fa8e7a0c0416239ed410f">trySplit</a> ()</td></tr>
<tr class="separator:a59d451ed808fa8e7a0c0416239ed410f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc7dfb268a5eeda4d412d655163663fd"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08151.html#adc7dfb268a5eeda4d412d655163663fd">estimateSize</a> ()</td></tr>
<tr class="separator:adc7dfb268a5eeda4d412d655163663fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a673dea3c18a0e22d79f1b634c037c73f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08151.html#a673dea3c18a0e22d79f1b634c037c73f">characteristics</a> ()</td></tr>
<tr class="separator:a673dea3c18a0e22d79f1b634c037c73f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pac-static-methods"></a>
Static Package Functions</h2></td></tr>
<tr class="memitem:afa97ec90b4514c51c9ac27b42d68b4d7"><td class="memItemLeft" align="right" valign="top">static boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08151.html#afa97ec90b4514c51c9ac27b42d68b4d7">areColinear</a> (final double[] u, final double[] v)</td></tr>
<tr class="separator:afa97ec90b4514c51c9ac27b42d68b4d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aa97caef1764972e992bc82428f880936"><td class="memItemLeft" align="right" valign="top">final double []&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08151.html#aa97caef1764972e992bc82428f880936">startPoint</a></td></tr>
<tr class="memdesc:aa97caef1764972e992bc82428f880936"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start of the segment to browse along the grid.  <a href="#aa97caef1764972e992bc82428f880936">More...</a><br /></td></tr>
<tr class="separator:aa97caef1764972e992bc82428f880936"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af00da1fe605ef44791d599ecf157ae85"><td class="memItemLeft" align="right" valign="top">final double []&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08151.html#af00da1fe605ef44791d599ecf157ae85">endPoint</a></td></tr>
<tr class="memdesc:af00da1fe605ef44791d599ecf157ae85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Last point of the segment.  <a href="#af00da1fe605ef44791d599ecf157ae85">More...</a><br /></td></tr>
<tr class="separator:af00da1fe605ef44791d599ecf157ae85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade7e33cda8dd7cd4e63d32d2eee1593c"><td class="memItemLeft" align="right" valign="top">final double []&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08151.html#ade7e33cda8dd7cd4e63d32d2eee1593c">segmentVector</a></td></tr>
<tr class="memdesc:ade7e33cda8dd7cd4e63d32d2eee1593c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Vector representing the segment to browse.  <a href="#ade7e33cda8dd7cd4e63d32d2eee1593c">More...</a><br /></td></tr>
<tr class="separator:ade7e33cda8dd7cd4e63d32d2eee1593c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d70170348f00449fb589eccac7d846f"><td class="memItemLeft" align="right" valign="top">final double []&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08151.html#a7d70170348f00449fb589eccac7d846f">previousPoint</a></td></tr>
<tr class="memdesc:a7d70170348f00449fb589eccac7d846f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The latest point generated by this spliterator.  <a href="#a7d70170348f00449fb589eccac7d846f">More...</a><br /></td></tr>
<tr class="separator:a7d70170348f00449fb589eccac7d846f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8fa38f76c776ad7f18b41b805559f0e"><td class="memItemLeft" align="right" valign="top">final DoubleUnaryOperator []&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a08151.html#ac8fa38f76c776ad7f18b41b805559f0e">moveDirs</a></td></tr>
<tr class="memdesc:ac8fa38f76c776ad7f18b41b805559f0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">For each axis, it embed the operator in charge of moving the corresponding ordinate.  <a href="#ac8fa38f76c776ad7f18b41b805559f0e">More...</a><br /></td></tr>
<tr class="separator:ac8fa38f76c776ad7f18b41b805559f0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Find intersection points between a segment and a regular grid whose cells sides are of length 1. </p>
<p>Works in N dimensions.</p>
<p>To find intersection with the grid borders, we do not use equation of intersection between the vector of the segment and the plans of the gride edges. Instead, we use colinearity properties. In fact, at each step, we search a vector overlapping the segment, but stopping at the next encountered grid edge. That means that for a segment AB, we search the shortest vector AC, where: </p><ul>
<li>
AB = kAC, where k is a positive (same direction), non null value. </li>
<li>
C is the closest distinct point to the C-1 point (which is C point computed at previous step), with at least one of its ordinate is an integer. </li>
</ul>
<p>Optimisations: There's a lot of chances that a more efficient algorithm exist. For now, the complexity is O(2*d*n), where d is the number of dimensions of input points, and n is the number of intersections between the segment and the grid.</p>
<dl class="section author"><dt>Author</dt><dd>Alexis Manin (Geomatys) </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a36bd4cbe1726e044a3e651a741e909d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36bd4cbe1726e044a3e651a741e909d4">&#9670;&nbsp;</a></span>MultiDimensionMove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a08151.html">MultiDimensionMove</a> </td>
          <td>(</td>
          <td class="paramtype">double []&#160;</td>
          <td class="paramname"><em>startPoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double []&#160;</td>
          <td class="paramname"><em>endPoint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new spliterator to find intersections between a segment AB and a regular grid. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">startPoint</td><td>The start point of the segment to analyze (A). </td></tr>
    <tr><td class="paramname">endPoint</td><td>The end point of the segment to analyze (B). </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="a08127.html#a2244b2e5973085c41d6dc34489ad7fb1">GridTraversal.ceilOrIncrement()</a>, and <a class="el" href="a08127.html#a704d17acf6b951fc41cbf6a8271b2db9">GridTraversal.floorOrDecrement()</a>.</p>
<div class="fragment"><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                                                                      {</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="a08151.html#aa97caef1764972e992bc82428f880936">startPoint</a>.length != <a class="code" href="a08151.html#af00da1fe605ef44791d599ecf157ae85">endPoint</a>.length) {</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="a14295.html">IllegalArgumentException</a>(String.format(</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                    <span class="stringliteral">&quot;Dimension of given points does not match: start is %dD, but end is %dD&quot;</span>,</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                    <a class="code" href="a08151.html#aa97caef1764972e992bc82428f880936">startPoint</a>.length, <a class="code" href="a08151.html#af00da1fe605ef44791d599ecf157ae85">endPoint</a>.length</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            ));</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        }</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        this.<a class="code" href="a08151.html#aa97caef1764972e992bc82428f880936">startPoint</a> = Arrays.copyOf(startPoint, startPoint.length);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        this.<a class="code" href="a08151.html#a7d70170348f00449fb589eccac7d846f">previousPoint</a> = Arrays.copyOf(startPoint, startPoint.length);</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        this.<a class="code" href="a08151.html#af00da1fe605ef44791d599ecf157ae85">endPoint</a> = Arrays.copyOf(<a class="code" href="a08151.html#af00da1fe605ef44791d599ecf157ae85">endPoint</a>, <a class="code" href="a08151.html#af00da1fe605ef44791d599ecf157ae85">endPoint</a>.length);</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="comment">// create the vector representation of our segment. In the meantime, we also prepare the operators in charge of</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="comment">// moving ordinate values.</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <a class="code" href="a08151.html#ac8fa38f76c776ad7f18b41b805559f0e">moveDirs</a> = <span class="keyword">new</span> DoubleUnaryOperator[startPoint.length];</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <a class="code" href="a08151.html#ade7e33cda8dd7cd4e63d32d2eee1593c">segmentVector</a> = <span class="keyword">new</span> <span class="keywordtype">double</span>[startPoint.length];</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="a08151.html#ade7e33cda8dd7cd4e63d32d2eee1593c">segmentVector</a>.length; i++) {</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            <a class="code" href="a08151.html#ade7e33cda8dd7cd4e63d32d2eee1593c">segmentVector</a>[i] = <a class="code" href="a08151.html#af00da1fe605ef44791d599ecf157ae85">endPoint</a>[i] - startPoint[i];</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            <span class="keywordflow">if</span> (isNearZero(<a class="code" href="a08151.html#ade7e33cda8dd7cd4e63d32d2eee1593c">segmentVector</a>[i])) {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                <a class="code" href="a08151.html#ac8fa38f76c776ad7f18b41b805559f0e">moveDirs</a>[i] = null; <span class="comment">// Ignored dimension. No move in this direction.</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="a08151.html#ade7e33cda8dd7cd4e63d32d2eee1593c">segmentVector</a>[i] &lt; 0) {</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                <a class="code" href="a08151.html#ac8fa38f76c776ad7f18b41b805559f0e">moveDirs</a>[i] = <a class="code" href="a08127.html#a704d17acf6b951fc41cbf6a8271b2db9">GridTraversal::floorOrDecrement</a>;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                <a class="code" href="a08151.html#ac8fa38f76c776ad7f18b41b805559f0e">moveDirs</a>[i] = <a class="code" href="a08127.html#a2244b2e5973085c41d6dc34489ad7fb1">GridTraversal::ceilOrIncrement</a>;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            }</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    }</div><div class="ttc" id="a08151_html_af00da1fe605ef44791d599ecf157ae85"><div class="ttname"><a href="a08151.html#af00da1fe605ef44791d599ecf157ae85">org.geotoolkit.util.grid.MultiDimensionMove.endPoint</a></div><div class="ttdeci">final double [] endPoint</div><div class="ttdoc">Last point of the segment. </div><div class="ttdef"><b>Definition:</b> MultiDimensionMove.java:58</div></div>
<div class="ttc" id="a08151_html_a7d70170348f00449fb589eccac7d846f"><div class="ttname"><a href="a08151.html#a7d70170348f00449fb589eccac7d846f">org.geotoolkit.util.grid.MultiDimensionMove.previousPoint</a></div><div class="ttdeci">final double [] previousPoint</div><div class="ttdoc">The latest point generated by this spliterator. </div><div class="ttdef"><b>Definition:</b> MultiDimensionMove.java:68</div></div>
<div class="ttc" id="a14295_html"><div class="ttname"><a href="a14295.html">IllegalArgumentException</a></div></div>
<div class="ttc" id="a08127_html_a2244b2e5973085c41d6dc34489ad7fb1"><div class="ttname"><a href="a08127.html#a2244b2e5973085c41d6dc34489ad7fb1">org.geotoolkit.util.grid.GridTraversal.ceilOrIncrement</a></div><div class="ttdeci">static double ceilOrIncrement(final double source)</div><div class="ttdef"><b>Definition:</b> GridTraversal.java:165</div></div>
<div class="ttc" id="a08127_html_a704d17acf6b951fc41cbf6a8271b2db9"><div class="ttname"><a href="a08127.html#a704d17acf6b951fc41cbf6a8271b2db9">org.geotoolkit.util.grid.GridTraversal.floorOrDecrement</a></div><div class="ttdeci">static double floorOrDecrement(final double source)</div><div class="ttdef"><b>Definition:</b> GridTraversal.java:174</div></div>
<div class="ttc" id="a08151_html_ac8fa38f76c776ad7f18b41b805559f0e"><div class="ttname"><a href="a08151.html#ac8fa38f76c776ad7f18b41b805559f0e">org.geotoolkit.util.grid.MultiDimensionMove.moveDirs</a></div><div class="ttdeci">final DoubleUnaryOperator [] moveDirs</div><div class="ttdoc">For each axis, it embed the operator in charge of moving the corresponding ordinate. </div><div class="ttdef"><b>Definition:</b> MultiDimensionMove.java:73</div></div>
<div class="ttc" id="a08151_html_ade7e33cda8dd7cd4e63d32d2eee1593c"><div class="ttname"><a href="a08151.html#ade7e33cda8dd7cd4e63d32d2eee1593c">org.geotoolkit.util.grid.MultiDimensionMove.segmentVector</a></div><div class="ttdeci">final double [] segmentVector</div><div class="ttdoc">Vector representing the segment to browse. </div><div class="ttdef"><b>Definition:</b> MultiDimensionMove.java:63</div></div>
<div class="ttc" id="a08151_html_aa97caef1764972e992bc82428f880936"><div class="ttname"><a href="a08151.html#aa97caef1764972e992bc82428f880936">org.geotoolkit.util.grid.MultiDimensionMove.startPoint</a></div><div class="ttdeci">final double [] startPoint</div><div class="ttdoc">Start of the segment to browse along the grid. </div><div class="ttdef"><b>Definition:</b> MultiDimensionMove.java:53</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="afa97ec90b4514c51c9ac27b42d68b4d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa97ec90b4514c51c9ac27b42d68b4d7">&#9670;&nbsp;</a></span>areColinear()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static boolean areColinear </td>
          <td>(</td>
          <td class="paramtype">final double []&#160;</td>
          <td class="paramname"><em>u</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final double []&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">package</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="a08151.html#af9292f4c10f19f790a29e9cdfa0e313f">MultiDimensionMove.tryAdvance()</a>.</p>
<div class="fragment"><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                                                                   {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordtype">double</span>[] coefs = <span class="keyword">new</span> <span class="keywordtype">double</span>[u.length];</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0 ; i &lt; u.length ; i++) {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            <span class="keywordtype">double</span> uv = v[i] - u[i];</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <span class="keywordflow">if</span> (isNearZero(uv)) {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                coefs[i] = Double.NaN;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isNearZero(u[i])) {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                coefs[i] = v[i] / u[i];</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            }</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        }</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1 ; i &lt; coefs.length ; i++) {</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            <span class="keywordflow">if</span> (coefs[i - 1] != coefs[i] &amp;&amp; (coefs[i-1] - EPSILON &gt; coefs[i] || coefs[i-1] + EPSILON &lt; coefs[i])) {</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            }</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="a673dea3c18a0e22d79f1b634c037c73f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a673dea3c18a0e22d79f1b634c037c73f">&#9670;&nbsp;</a></span>characteristics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int characteristics </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                                 {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="keywordflow">return</span> ORDERED | DISTINCT | NONNULL;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="adc7dfb268a5eeda4d412d655163663fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc7dfb268a5eeda4d412d655163663fd">&#9670;&nbsp;</a></span>estimateSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long estimateSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                               {</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="comment">// TODO : how to (roughly) estimate the number of crossed grid points ? Segment norm is not efficient enough,</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="comment">// due to the distorsion of distances over big dimensions.</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="keywordflow">return</span> Long.MAX_VALUE;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="af9292f4c10f19f790a29e9cdfa0e313f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9292f4c10f19f790a29e9cdfa0e313f">&#9670;&nbsp;</a></span>tryAdvance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean tryAdvance </td>
          <td>(</td>
          <td class="paramtype">Consumer&lt;? super double[]&gt;&#160;</td>
          <td class="paramname"><em>action</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">References <a class="el" href="a08151.html#afa97ec90b4514c51c9ac27b42d68b4d7">MultiDimensionMove.areColinear()</a>.</p>
<div class="fragment"><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                                                                 {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordtype">double</span> minDist = Double.POSITIVE_INFINITY;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="keywordtype">int</span> idxOfMinDist = -1;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="a08151.html#ac8fa38f76c776ad7f18b41b805559f0e">moveDirs</a>.length; i++) {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            DoubleUnaryOperator mover = <a class="code" href="a08151.html#ac8fa38f76c776ad7f18b41b805559f0e">moveDirs</a>[i];</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            <span class="keywordflow">if</span> (mover != null) {</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                <span class="keywordtype">double</span> move = mover.applyAsDouble(<a class="code" href="a08151.html#a7d70170348f00449fb589eccac7d846f">previousPoint</a>[i]);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="a08151.html#ade7e33cda8dd7cd4e63d32d2eee1593c">segmentVector</a>[i] &gt;= 0 ? move &gt;= <a class="code" href="a08151.html#af00da1fe605ef44791d599ecf157ae85">endPoint</a>[i] : move &lt;= <a class="code" href="a08151.html#af00da1fe605ef44791d599ecf157ae85">endPoint</a>[i]) {</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                    move = <a class="code" href="a08151.html#af00da1fe605ef44791d599ecf157ae85">endPoint</a>[i];</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                }</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                move -= <a class="code" href="a08151.html#a7d70170348f00449fb589eccac7d846f">previousPoint</a>[i];</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                <span class="keywordflow">if</span> (!isNearZero(move)) {</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                    <span class="comment">// find if the overall norm of the resulting vector is shorter than the previous one</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                    <span class="keyword">final</span> <span class="keywordtype">double</span> moveRatio = move / (<a class="code" href="a08151.html#ade7e33cda8dd7cd4e63d32d2eee1593c">segmentVector</a>[i]);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                    assert moveRatio &gt;= 0.0;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                    <span class="keywordflow">if</span> (moveRatio &lt; minDist) {</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                        minDist = moveRatio;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                        idxOfMinDist = i;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                    }</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                }</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            }</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        }</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">if</span> (idxOfMinDist &lt; 0) {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;<span class="comment">// We&#39;re already on the end point</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="a08151.html#a7d70170348f00449fb589eccac7d846f">previousPoint</a>.length; i++) {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            <a class="code" href="a08151.html#a7d70170348f00449fb589eccac7d846f">previousPoint</a>[i] += minDist * <a class="code" href="a08151.html#ade7e33cda8dd7cd4e63d32d2eee1593c">segmentVector</a>[i];</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        }</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        assert <a class="code" href="a08151.html#afa97ec90b4514c51c9ac27b42d68b4d7">areColinear</a>(<a class="code" href="a08151.html#ade7e33cda8dd7cd4e63d32d2eee1593c">segmentVector</a>, toVector(<a class="code" href="a08151.html#aa97caef1764972e992bc82428f880936">startPoint</a>, <a class="code" href="a08151.html#a7d70170348f00449fb589eccac7d846f">previousPoint</a>));</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        action.accept(Arrays.copyOf(<a class="code" href="a08151.html#a7d70170348f00449fb589eccac7d846f">previousPoint</a>, <a class="code" href="a08151.html#a7d70170348f00449fb589eccac7d846f">previousPoint</a>.length));</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    }</div><div class="ttc" id="a08151_html_af00da1fe605ef44791d599ecf157ae85"><div class="ttname"><a href="a08151.html#af00da1fe605ef44791d599ecf157ae85">org.geotoolkit.util.grid.MultiDimensionMove.endPoint</a></div><div class="ttdeci">final double [] endPoint</div><div class="ttdoc">Last point of the segment. </div><div class="ttdef"><b>Definition:</b> MultiDimensionMove.java:58</div></div>
<div class="ttc" id="a08151_html_a7d70170348f00449fb589eccac7d846f"><div class="ttname"><a href="a08151.html#a7d70170348f00449fb589eccac7d846f">org.geotoolkit.util.grid.MultiDimensionMove.previousPoint</a></div><div class="ttdeci">final double [] previousPoint</div><div class="ttdoc">The latest point generated by this spliterator. </div><div class="ttdef"><b>Definition:</b> MultiDimensionMove.java:68</div></div>
<div class="ttc" id="a08151_html_afa97ec90b4514c51c9ac27b42d68b4d7"><div class="ttname"><a href="a08151.html#afa97ec90b4514c51c9ac27b42d68b4d7">org.geotoolkit.util.grid.MultiDimensionMove.areColinear</a></div><div class="ttdeci">static boolean areColinear(final double[] u, final double[] v)</div><div class="ttdef"><b>Definition:</b> MultiDimensionMove.java:168</div></div>
<div class="ttc" id="a08151_html_ac8fa38f76c776ad7f18b41b805559f0e"><div class="ttname"><a href="a08151.html#ac8fa38f76c776ad7f18b41b805559f0e">org.geotoolkit.util.grid.MultiDimensionMove.moveDirs</a></div><div class="ttdeci">final DoubleUnaryOperator [] moveDirs</div><div class="ttdoc">For each axis, it embed the operator in charge of moving the corresponding ordinate. </div><div class="ttdef"><b>Definition:</b> MultiDimensionMove.java:73</div></div>
<div class="ttc" id="a08151_html_ade7e33cda8dd7cd4e63d32d2eee1593c"><div class="ttname"><a href="a08151.html#ade7e33cda8dd7cd4e63d32d2eee1593c">org.geotoolkit.util.grid.MultiDimensionMove.segmentVector</a></div><div class="ttdeci">final double [] segmentVector</div><div class="ttdoc">Vector representing the segment to browse. </div><div class="ttdef"><b>Definition:</b> MultiDimensionMove.java:63</div></div>
<div class="ttc" id="a08151_html_aa97caef1764972e992bc82428f880936"><div class="ttname"><a href="a08151.html#aa97caef1764972e992bc82428f880936">org.geotoolkit.util.grid.MultiDimensionMove.startPoint</a></div><div class="ttdeci">final double [] startPoint</div><div class="ttdoc">Start of the segment to browse along the grid. </div><div class="ttdef"><b>Definition:</b> MultiDimensionMove.java:53</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a59d451ed808fa8e7a0c0416239ed410f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59d451ed808fa8e7a0c0416239ed410f">&#9670;&nbsp;</a></span>trySplit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Spliterator&lt;double[]&gt; trySplit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                                            {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="comment">// TODO: it is splittable, but require non-trivial analysis: we must perform the same kind of analysis as in</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="comment">// tryAdvance, but for approximately half the overall distance of input segment.</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keywordflow">return</span> null;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="af00da1fe605ef44791d599ecf157ae85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af00da1fe605ef44791d599ecf157ae85">&#9670;&nbsp;</a></span>endPoint</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final double [] endPoint</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Last point of the segment. </p>

</div>
</div>
<a id="ac8fa38f76c776ad7f18b41b805559f0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8fa38f76c776ad7f18b41b805559f0e">&#9670;&nbsp;</a></span>moveDirs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final DoubleUnaryOperator [] moveDirs</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For each axis, it embed the operator in charge of moving the corresponding ordinate. </p>

</div>
</div>
<a id="a7d70170348f00449fb589eccac7d846f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d70170348f00449fb589eccac7d846f">&#9670;&nbsp;</a></span>previousPoint</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final double [] previousPoint</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The latest point generated by this spliterator. </p>

</div>
</div>
<a id="ade7e33cda8dd7cd4e63d32d2eee1593c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade7e33cda8dd7cd4e63d32d2eee1593c">&#9670;&nbsp;</a></span>segmentVector</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final double [] segmentVector</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Vector representing the segment to browse. </p>

</div>
</div>
<a id="aa97caef1764972e992bc82428f880936"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa97caef1764972e992bc82428f880936">&#9670;&nbsp;</a></span>startPoint</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final double [] startPoint</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Start of the segment to browse along the grid. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a03857.html">org</a></li><li class="navelem"><a class="el" href="a03866.html">geotoolkit</a></li><li class="navelem"><a class="el" href="a03916.html">util</a></li><li class="navelem"><a class="el" href="a03920.html">grid</a></li><li class="navelem"><a class="el" href="a08151.html">MultiDimensionMove</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
