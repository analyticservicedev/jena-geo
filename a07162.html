<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>jena-geo: Setup Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">jena-geo
   &#160;<span id="projectnumber">Version 0.1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a07162.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="a07159.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Setup Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A central place where to perform initialization and shutdown of all Geotk services.  
 <a href="a07162.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for Setup:</div>
<div class="dyncontent">
<div class="center"><img src="a07161.png" border="0" usemap="#Setup_inherit__map" alt="Inheritance graph"/></div>
<map name="Setup_inherit__map" id="Setup_inherit__map">
<area shape="rect" id="node2" href="a07166.html" title="Parent of classes that contain only static utility methods. " alt="" coords="5,5,61,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for Setup:</div>
<div class="dyncontent">
<div class="center"><img src="a07160.png" border="0" usemap="#Setup_coll__map" alt="Collaboration graph"/></div>
<map name="Setup_coll__map" id="Setup_coll__map">
<area shape="rect" id="node2" href="a07166.html" title="Parent of classes that contain only static utility methods. " alt="" coords="5,5,61,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a8f77e69842d5f20bbfaa01f1e9e6d541"><td class="memItemLeft" align="right" valign="top">static synchronized void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07162.html#a8f77e69842d5f20bbfaa01f1e9e6d541">setEPSG</a> (final DataSource source)</td></tr>
<tr class="memdesc:a8f77e69842d5f20bbfaa01f1e9e6d541"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the data source for the EPSG database.  <a href="#a8f77e69842d5f20bbfaa01f1e9e6d541">More...</a><br /></td></tr>
<tr class="separator:a8f77e69842d5f20bbfaa01f1e9e6d541"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40798f96683725af80d75c04742b0a1f"><td class="memItemLeft" align="right" valign="top">static synchronized DataSource&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07162.html#a40798f96683725af80d75c04742b0a1f">getEPSG</a> ()</td></tr>
<tr class="memdesc:a40798f96683725af80d75c04742b0a1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the EPSG data source.  <a href="#a40798f96683725af80d75c04742b0a1f">More...</a><br /></td></tr>
<tr class="separator:a40798f96683725af80d75c04742b0a1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7eb4963cb16f3cd5d889227796e5245c"><td class="memItemLeft" align="right" valign="top">static synchronized void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07162.html#a7eb4963cb16f3cd5d889227796e5245c">initialize</a> (final Properties properties)  throws IllegalStateException </td></tr>
<tr class="memdesc:a7eb4963cb16f3cd5d889227796e5245c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs the initialization of all Geotk services.  <a href="#a7eb4963cb16f3cd5d889227796e5245c">More...</a><br /></td></tr>
<tr class="separator:a7eb4963cb16f3cd5d889227796e5245c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cfa1af04e925fc21518fe880df9e408"><td class="memItemLeft" align="right" valign="top">static synchronized void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07162.html#a4cfa1af04e925fc21518fe880df9e408">shutdown</a> ()</td></tr>
<tr class="memdesc:a4cfa1af04e925fc21518fe880df9e408"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shutdowns all Geotk services.  <a href="#a4cfa1af04e925fc21518fe880df9e408">More...</a><br /></td></tr>
<tr class="separator:a4cfa1af04e925fc21518fe880df9e408"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ae0d0a5184ef101bd0fed0f1904ca7094"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07162.html#ae0d0a5184ef101bd0fed0f1904ca7094">Setup</a> ()</td></tr>
<tr class="memdesc:ae0d0a5184ef101bd0fed0f1904ca7094"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do not allow instantiation of this class.  <a href="#ae0d0a5184ef101bd0fed0f1904ca7094">More...</a><br /></td></tr>
<tr class="separator:ae0d0a5184ef101bd0fed0f1904ca7094"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a5270a83b4b60ba9ccac3369d81d17692"><td class="memItemLeft" align="right" valign="top">static String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07162.html#a5270a83b4b60ba9ccac3369d81d17692">get</a> (final Properties properties, final String key, final String def)</td></tr>
<tr class="memdesc:a5270a83b4b60ba9ccac3369d81d17692"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the value for the given key in the given properties map, or the default value if none.  <a href="#a5270a83b4b60ba9ccac3369d81d17692">More...</a><br /></td></tr>
<tr class="separator:a5270a83b4b60ba9ccac3369d81d17692"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a89f234133d3efe315836311cbf21c64b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07162.html#a89f234133d3efe315836311cbf21c64b">state</a></td></tr>
<tr class="memdesc:a89f234133d3efe315836311cbf21c64b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The setup state.  <a href="#a89f234133d3efe315836311cbf21c64b">More...</a><br /></td></tr>
<tr class="separator:a89f234133d3efe315836311cbf21c64b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbce7c4d6911636b5b423e88512e2e5b"><td class="memItemLeft" align="right" valign="top">static DataSource&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07162.html#acbce7c4d6911636b5b423e88512e2e5b">EPSG</a></td></tr>
<tr class="memdesc:acbce7c4d6911636b5b423e88512e2e5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data source for the EPSG database, or.  <a href="#acbce7c4d6911636b5b423e88512e2e5b">More...</a><br /></td></tr>
<tr class="separator:acbce7c4d6911636b5b423e88512e2e5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A central place where to perform initialization and shutdown of all Geotk services. </p>
<p>Users are not required to perform explicit initialization and shutdown for most services (except a few cases like &lt;cite&gt;World File Image Readers&lt;/cite&gt;), since services are automatically discovered when needed (using <a class="el" href="">ServiceLoader</a>) and disposed on JVM termination (using  Runtime::addShutdownHook shutdown hook}). However the above-cited mechanism is not sufficient when an application is undeployed and re-deployed in a JEE environment without restarting the JVM. For example the  org.geotoolkit.image.io.plugin Geotk Image I/O plugins} needs to be  IIORegistry::deregisterServiceProvider(Object) deregistered} during the &lt;cite&gt;undeploy&lt;/cite&gt; phase before they get  IIORegistry::registerServiceProvider(Object) registered} again during the &lt;cite&gt;re-deploy&lt;/cite&gt; phase. Explicit invocations of <a class="el" href="a07162.html#a7eb4963cb16f3cd5d889227796e5245c">initialize(Properties)</a> and <a class="el" href="a07162.html#a4cfa1af04e925fc21518fe880df9e408">shutdown()</a> methods can improve the system stability in such cases. </p>
<p>The amount of works performed by this class depends on the modules available in the classpath. The table below lists the work performed by current implementation. Users wanting more control can perform those tasks themselves instead than relying on the methods defined in this </p><div class="fragment"><div class="line"><a class="code" href="a07162.html#ae0d0a5184ef101bd0fed0f1904ca7094">Setup</a> </div></div><!-- fragment --><p> class. </p>
<table border="3" cellpadding="6">
<tr bgcolor="lightblue">
<th>Module </th><th>Methods invoked by <a class="el" href="a07162.html#a7eb4963cb16f3cd5d889227796e5245c">initialize(Properties)</a> </th><th>Work done by <a class="el" href="a07162.html#a4cfa1af04e925fc21518fe880df9e408">shutdown()</a> </th></tr>
<tr>
<td><div class="fragment"><div class="line">geotk-utility </div></div><!-- fragment -->  </td><td><ul>
<li>
If<div class="fragment"><div class="line">platform != <span class="stringliteral">&quot;server&quot;</span> </div></div><!-- fragment --> : <ul>
<li>
<code> Logging::forceMonolineConsoleOutput Logging.forceMonolineConsoleOutput}(null)</code></li>
</ul>
</li>
</ul>
</td><td>&#160; </td></tr>
<tr>
<td><div class="fragment"><div class="line">geotk-coverage </div></div><!-- fragment -->  </td><td><ul>
<li>
<a class="el" href="a06834.html#a2c4ba200b76ea53e78a1ea9aaad679fe">org.geotoolkit.image.jai.Registry#setDefaultCodecPreferences()</a> </li>
</ul>
</td><td>Remove from the JAI <a class="el" href="">javax.media.jai.OperationRegistry</a> every plugins defined in any<div class="fragment"><div class="line"><a class="code" href="a03713.html">org</a>.<a class="code" href="a03722.html">geotoolkit</a> </div></div><!-- fragment --> package.  </td></tr>
<tr>
<td><div class="fragment"><div class="line">geotk-coverageio </div></div><!-- fragment -->  </td><td><ul>
<li>
<code> org.geotoolkit.image.io.plugin.WorldFileImageReader.Spi::registerDefaults WorldFileImageReader.Spi.registerDefaults}(null)</code> </li>
<li>
<code> org.geotoolkit.image.io.plugin.WorldFileImageWriter.Spi::registerDefaults WorldFileImageWriter.Spi.registerDefaults}(null)</code> </li>
</ul>
</td><td>Remove from <a class="el" href="">IIORegistry</a> every plugins defined in any<div class="fragment"><div class="line"><a class="code" href="a03713.html">org</a>.<a class="code" href="a03722.html">geotoolkit</a> </div></div><!-- fragment --> package.  </td></tr>
<tr>
<td><div class="fragment"><div class="line">geotk-coverageio-netcdf </div></div><!-- fragment -->  </td><td><ul>
<li>
If<div class="fragment"><div class="line">netcdfCacheLimit != 0 </div></div><!-- fragment --> : <ul>
<li>
<a class="el" href="">ucar.nc2.dataset.NetcdfDataset#initNetcdfFileCache(int,int,int)</a></li>
</ul>
</li>
</ul>
</td><td><a class="el" href="">ucar.nc2.dataset.NetcdfDataset#shutdown()</a>.   </td></tr>
</table>
<p>{</p>
<h1><a class="anchor" id="Note"></a>
on floating point types}</h1>
<p>In current implementation, invoking <a class="el" href="a07162.html#a7eb4963cb16f3cd5d889227796e5245c">initialize(Properties)</a> with a property entry</p><div class="fragment"><div class="line">platform=server </div></div><!-- fragment --><p> also disable the usage of  java.util.prefs.Preferences::systemRoot() system preferences}. This is a temporary workaround for the JDK 6 behavior on Unix system, which display "&lt;cite&gt;WARNING: Couldn't flush
system prefs&lt;/cite&gt;" if the</p><div class="fragment"><div class="line">etc/.java </div></div><!-- fragment --><p> directory has not been created during the Java installation process. </p>
<p>This workaround may be removed in a future version if JDK 7 uses its new</p><div class="fragment"><div class="line">java.nio.file </div></div><!-- fragment --><p> package for performing a better work with system preferences.</p>
<dl class="section author"><dt>Author</dt><dd>Martin Desruisseaux (Geomatys) </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ae0d0a5184ef101bd0fed0f1904ca7094"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0d0a5184ef101bd0fed0f1904ca7094">&#9670;&nbsp;</a></span>Setup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a07162.html">Setup</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Do not allow instantiation of this class. </p>
<div class="fragment"><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                    {</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a5270a83b4b60ba9ccac3369d81d17692"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5270a83b4b60ba9ccac3369d81d17692">&#9670;&nbsp;</a></span>get()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static String get </td>
          <td>(</td>
          <td class="paramtype">final Properties&#160;</td>
          <td class="paramname"><em>properties</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final String&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final String&#160;</td>
          <td class="paramname"><em>def</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the value for the given key in the given properties map, or the default value if none. </p>
<p>The given properties map is allowed to be</p><div class="fragment"><div class="line">null </div></div><!-- fragment --><p> . </p>
<div class="fragment"><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                                                                                               {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keywordflow">return</span> (properties != null) ? properties.getProperty(key, def) : def;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="a40798f96683725af80d75c04742b0a1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40798f96683725af80d75c04742b0a1f">&#9670;&nbsp;</a></span>getEPSG()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static synchronized DataSource getEPSG </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the EPSG data source. </p>

<p class="reference">References <a class="el" href="a06974.html#a17a4e6624e72d394b7585efd15ab52c9">Installation.EPSG</a>, and <a class="el" href="a07162.html#acbce7c4d6911636b5b423e88512e2e5b">Setup.EPSG</a>.</p>

<p class="reference">Referenced by <a class="el" href="a07162.html#a7eb4963cb16f3cd5d889227796e5245c">Setup.initialize()</a>.</p>
<div class="fragment"><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                                                    {</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="a07162.html#acbce7c4d6911636b5b423e88512e2e5b">EPSG</a> == null) <span class="keywordflow">try</span> {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            <span class="keyword">final</span> Properties properties = Installation.EPSG.getDataSource();</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            <span class="keywordflow">if</span> (properties != null) {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                <span class="keyword">final</span> String url = properties.getProperty(<span class="stringliteral">&quot;URL&quot;</span>);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                <span class="keywordflow">if</span> (url != null) {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                    <a class="code" href="a07162.html#acbce7c4d6911636b5b423e88512e2e5b">EPSG</a> = <span class="keyword">new</span> DefaultDataSource(url);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                    <span class="keyword">final</span> String user = properties.getProperty(<span class="stringliteral">&quot;user&quot;</span>);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                    <span class="keywordflow">if</span> (user != null) {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                        <a class="code" href="a07162.html#acbce7c4d6911636b5b423e88512e2e5b">EPSG</a> = <span class="keyword">new</span> AuthenticatedDataSource(<a class="code" href="a07162.html#acbce7c4d6911636b5b423e88512e2e5b">EPSG</a>, user, properties.getProperty(<span class="stringliteral">&quot;password&quot;</span>), <span class="keyword">false</span>);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                    }</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                }</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            }</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        } <span class="keywordflow">catch</span> (IOException e) {</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> UncheckedIOException(e);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        }</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="a07162.html#acbce7c4d6911636b5b423e88512e2e5b">EPSG</a>;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    }</div><div class="ttc" id="a07162_html_acbce7c4d6911636b5b423e88512e2e5b"><div class="ttname"><a href="a07162.html#acbce7c4d6911636b5b423e88512e2e5b">org.geotoolkit.lang.Setup.EPSG</a></div><div class="ttdeci">static DataSource EPSG</div><div class="ttdoc">Data source for the EPSG database, or. </div><div class="ttdef"><b>Definition:</b> lang/Setup.java:127</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7eb4963cb16f3cd5d889227796e5245c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7eb4963cb16f3cd5d889227796e5245c">&#9670;&nbsp;</a></span>initialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static synchronized void initialize </td>
          <td>(</td>
          <td class="paramtype">final Properties&#160;</td>
          <td class="paramname"><em>properties</em></td><td>)</td>
          <td> throws <a class="el" href="a13858.html">IllegalStateException</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Performs the initialization of all Geotk services. </p>
<p>This method is typically invoked only once. If it is invoked more than once and <a class="el" href="a07162.html#a4cfa1af04e925fc21518fe880df9e408">shutdown()</a> has not been invoked, then every calls after the first method call are ignored. </p>
<p>The</p><div class="fragment"><div class="line">properties </div></div><!-- fragment --><p> map allows some control on the initialization process. Current implementation recognizes the entries listed in the table below. Any entry not listed in this table are silently ignored. </p>
<table border="1" cellspacing="0">
<tr bgcolor="lightblue">
<th>&#160;Key&#160; </th><th>&#160;Valid values&#160; </th><th>&#160;Default&#160; </th><th>&#160;Meaning&#160;  </th></tr>
<tr>
<td>&#160;<div class="fragment"><div class="line">platform </div></div><!-- fragment --> &#160; </td><td>&#160;<div class="fragment"><div class="line">server </div></div><!-- fragment --> |<div class="fragment"><div class="line">desktop </div></div><!-- fragment --> &#160; </td><td>&#160;<div class="fragment"><div class="line">desktop </div></div><!-- fragment --> &#160; </td><td>&#160;Whatever the library is run for a desktop application or a server.&#160;  </td></tr>
<tr>
<td>&#160;<div class="fragment"><div class="line">netcdfCacheLimit </div></div><!-- fragment --> &#160; </td><td>&#160;Positive integer&#160; </td><td>&#160;0&#160; </td><td>&#160;Maximum number of elements in the NetCDF cache (0 for no cache).&#160;  </td></tr>
<tr>
<td>&#160;<div class="fragment"><div class="line">force </div></div><!-- fragment --> &#160; </td><td>&#160;<div class="fragment"><div class="line"><span class="keyword">true</span> </div></div><!-- fragment --> |<div class="fragment"><div class="line"><span class="keyword">false</span> </div></div><!-- fragment --> &#160; </td><td>&#160;<div class="fragment"><div class="line"><span class="keyword">false</span> </div></div><!-- fragment --> &#160; </td><td>&#160;If<div class="fragment"><div class="line"><span class="keyword">true</span> </div></div><!-- fragment --> , attempt a re-initialization after a shutdown.&#160;  </td></tr>
</table>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">properties</td><td>Optional set of properties controlling the initialization process, or<div class="fragment"><div class="line">null </div></div><!-- fragment --> . </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="a13858.html">IllegalStateException</a></td><td>If the Geotk library has been  <a class="el" href="a07162.html#a4cfa1af04e925fc21518fe880df9e408" title="Shutdowns all Geotk services. ">shutdown()</a> shutdown} and the given properties map doesn't contain a<div class="fragment"><div class="line">force=<span class="keyword">true</span> </div></div><!-- fragment --> entry. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="a07162.html#a40798f96683725af80d75c04742b0a1f">Setup.getEPSG()</a>.</p>
<div class="fragment"><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                                                                                                         {</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="a07162.html#a89f234133d3efe315836311cbf21c64b">state</a> == 1) {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">boolean</span> reinit = (<a class="code" href="a07162.html#a89f234133d3efe315836311cbf21c64b">state</a> == 2);</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="keywordflow">if</span> (reinit &amp;&amp; !Boolean.parseBoolean(<span class="keyword">get</span>(properties, <span class="stringliteral">&quot;force&quot;</span>, <span class="stringliteral">&quot;false&quot;</span>))) {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="a13858.html">IllegalStateException</a>();</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        }</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <a class="code" href="a07162.html#a89f234133d3efe315836311cbf21c64b">state</a> = 1;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="keywordflow">if</span> (<span class="stringliteral">&quot;server&quot;</span>.equalsIgnoreCase(<span class="keyword">get</span>(properties, <span class="stringliteral">&quot;platform&quot;</span>, <span class="stringliteral">&quot;desktop&quot;</span>))) {</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            MonolineFormatter.install();</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        Initializer.setDefault(<a class="code" href="a07162.html#a40798f96683725af80d75c04742b0a1f">Setup::getEPSG</a>);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">         * Following are normally not needed, since the factory registry scans automatically</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">         * the classpath when first needed. However some factories may have been unregistered</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">         * during the shutdown process, so we need to scan the classpath to re-register them.</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="keywordflow">if</span> (reinit) {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            DefaultFactories.fireClasspathChanged();</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        }</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">         * Now performs every module-specific initialization.</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">final</span> SetupService service : ServiceLoader.load(SetupService.class)) {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            service.initialize(properties, reinit);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        }</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    }</div><div class="ttc" id="a13858_html"><div class="ttname"><a href="a13858.html">IllegalStateException</a></div></div>
<div class="ttc" id="a07162_html_a89f234133d3efe315836311cbf21c64b"><div class="ttname"><a href="a07162.html#a89f234133d3efe315836311cbf21c64b">org.geotoolkit.lang.Setup.state</a></div><div class="ttdeci">static int state</div><div class="ttdoc">The setup state. </div><div class="ttdef"><b>Definition:</b> lang/Setup.java:122</div></div>
<div class="ttc" id="a07162_html_a40798f96683725af80d75c04742b0a1f"><div class="ttname"><a href="a07162.html#a40798f96683725af80d75c04742b0a1f">org.geotoolkit.lang.Setup.getEPSG</a></div><div class="ttdeci">static synchronized DataSource getEPSG()</div><div class="ttdoc">Returns the EPSG data source. </div><div class="ttdef"><b>Definition:</b> lang/Setup.java:147</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8f77e69842d5f20bbfaa01f1e9e6d541"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f77e69842d5f20bbfaa01f1e9e6d541">&#9670;&nbsp;</a></span>setEPSG()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static synchronized void setEPSG </td>
          <td>(</td>
          <td class="paramtype">final DataSource&#160;</td>
          <td class="paramname"><em>source</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the data source for the EPSG database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>data source for the EPSG database, or<div class="fragment"><div class="line">null </div></div><!-- fragment --> if none. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                                                                     {</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <a class="code" href="a07162.html#acbce7c4d6911636b5b423e88512e2e5b">EPSG</a> = source;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    }</div><div class="ttc" id="a07162_html_acbce7c4d6911636b5b423e88512e2e5b"><div class="ttname"><a href="a07162.html#acbce7c4d6911636b5b423e88512e2e5b">org.geotoolkit.lang.Setup.EPSG</a></div><div class="ttdeci">static DataSource EPSG</div><div class="ttdoc">Data source for the EPSG database, or. </div><div class="ttdef"><b>Definition:</b> lang/Setup.java:127</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4cfa1af04e925fc21518fe880df9e408"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cfa1af04e925fc21518fe880df9e408">&#9670;&nbsp;</a></span>shutdown()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static synchronized void shutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Shutdowns all Geotk services. </p>
<p>This method can be safely invoked even if the <a class="el" href="a07162.html#a7eb4963cb16f3cd5d889227796e5245c">initialize(Properties)</a> method has never been invoked. </p>
<p>The Geotk library should not be used anymore after this method call. </p>

<p class="reference">References <a class="el" href="a07066.html#a4cfa1af04e925fc21518fe880df9e408">Threads.shutdown()</a>.</p>
<div class="fragment"><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                                               {</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="a07162.html#a89f234133d3efe315836311cbf21c64b">state</a> != 2) {</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            <a class="code" href="a07162.html#a89f234133d3efe315836311cbf21c64b">state</a> = 2;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            Initializer.setDefault(null);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">final</span> SetupService service : ServiceLoader.load(SetupService.class)) {</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                service.shutdown();</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            }</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">             * The following method should be invoked only when we think there is not any code still</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">             * runnning that may invoke Threads.executor(boolean). It is actually hard to ensure that,</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">             * but a search on Threads.SHUTDOWN_HOOKS and Threads.executeDisposal(Runnable) is helpful.</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            Threads.shutdown();</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        }</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    }</div><div class="ttc" id="a07162_html_a89f234133d3efe315836311cbf21c64b"><div class="ttname"><a href="a07162.html#a89f234133d3efe315836311cbf21c64b">org.geotoolkit.lang.Setup.state</a></div><div class="ttdeci">static int state</div><div class="ttdoc">The setup state. </div><div class="ttdef"><b>Definition:</b> lang/Setup.java:122</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="acbce7c4d6911636b5b423e88512e2e5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbce7c4d6911636b5b423e88512e2e5b">&#9670;&nbsp;</a></span>EPSG</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">DataSource EPSG</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Data source for the EPSG database, or. </p>
<div class="fragment"><div class="line">null </div></div><!-- fragment --><p> if none. </p>

<p class="reference">Referenced by <a class="el" href="a07162.html#a40798f96683725af80d75c04742b0a1f">Setup.getEPSG()</a>.</p>

</div>
</div>
<a id="a89f234133d3efe315836311cbf21c64b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89f234133d3efe315836311cbf21c64b">&#9670;&nbsp;</a></span>state</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int state</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The setup state. </p>
<ul>
<li>
0: initial state. </li>
<li>
1: <a class="el" href="a07162.html#a7eb4963cb16f3cd5d889227796e5245c">initialize(Properties)</a> has been invoked. </li>
<li>
2: <a class="el" href="a07162.html#a4cfa1af04e925fc21518fe880df9e408">shutdown()</a> has been invoked. </li>
</ul>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a03713.html">org</a></li><li class="navelem"><a class="el" href="a03722.html">geotoolkit</a></li><li class="navelem"><a class="el" href="a03752.html">lang</a></li><li class="navelem"><a class="el" href="a07162.html">Setup</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
