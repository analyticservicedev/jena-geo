<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>jena-geo: RasterFactory Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">jena-geo
   &#160;<span id="projectnumber">Version 0.1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a06599.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pac-methods">Package Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="a06596.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">RasterFactory Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Creates rasters from given properties.  
 <a href="a06599.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for RasterFactory:</div>
<div class="dyncontent">
<div class="center"><img src="a06598.png" border="0" usemap="#RasterFactory_inherit__map" alt="Inheritance graph"/></div>
<map name="RasterFactory_inherit__map" id="RasterFactory_inherit__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for RasterFactory:</div>
<div class="dyncontent">
<div class="center"><img src="a06597.png" border="0" usemap="#RasterFactory_coll__map" alt="Collaboration graph"/></div>
<map name="RasterFactory_coll__map" id="RasterFactory_coll__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a08838b9702488c64ed7c49afad7af017"><td class="memItemLeft" align="right" valign="top">static BufferedImage&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06599.html#a08838b9702488c64ed7c49afad7af017">createGrayScaleImage</a> (final int dataType, final int width, final int height, final int numComponents, final int visibleBand, final double minimum, final double maximum)</td></tr>
<tr class="memdesc:a08838b9702488c64ed7c49afad7af017"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates an opaque image with a gray scale color model.  <a href="#a08838b9702488c64ed7c49afad7af017">More...</a><br /></td></tr>
<tr class="separator:a08838b9702488c64ed7c49afad7af017"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d5cfb732965653960dbdc86f8c67708"><td class="memItemLeft" align="right" valign="top">static WritableRaster&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06599.html#a7d5cfb732965653960dbdc86f8c67708">createRaster</a> (final DataBuffer buffer, final int width, final int height, final int pixelStride, final int scanlineStride, int[] bankIndices, final int[] bandOffsets, final Point location)</td></tr>
<tr class="memdesc:a7d5cfb732965653960dbdc86f8c67708"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wraps the given data buffer in a raster.  <a href="#a7d5cfb732965653960dbdc86f8c67708">More...</a><br /></td></tr>
<tr class="separator:a7d5cfb732965653960dbdc86f8c67708"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d68b79d1acc3bf61f0f78737d368e3e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06599.html#a9d68b79d1acc3bf61f0f78737d368e3e">getDataType</a> (final Class&lt;?&gt; sample, final boolean unsigned)</td></tr>
<tr class="memdesc:a9d68b79d1acc3bf61f0f78737d368e3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the <a class="el" href="">DataBuffer</a> constant for the given type.  <a href="#a9d68b79d1acc3bf61f0f78737d368e3e">More...</a><br /></td></tr>
<tr class="separator:a9d68b79d1acc3bf61f0f78737d368e3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5271e9e711f989b20b3a79660489a88"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06599.html#ad5271e9e711f989b20b3a79660489a88">getDataType</a> (final NumberRange&lt;?&gt; range, final boolean keepFloat)</td></tr>
<tr class="memdesc:ad5271e9e711f989b20b3a79660489a88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the <a class="el" href="">DataBuffer</a> constant for the given range of values.  <a href="#ad5271e9e711f989b20b3a79660489a88">More...</a><br /></td></tr>
<tr class="separator:ad5271e9e711f989b20b3a79660489a88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95376763233bcb64d5c1889c5074860f"><td class="memItemLeft" align="right" valign="top">static DataBuffer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06599.html#a95376763233bcb64d5c1889c5074860f">wrap</a> (final int dataType, final Buffer... data)</td></tr>
<tr class="memdesc:a95376763233bcb64d5c1889c5074860f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wraps the backing arrays of given NIO buffers into Java2D buffers.  <a href="#a95376763233bcb64d5c1889c5074860f">More...</a><br /></td></tr>
<tr class="separator:a95376763233bcb64d5c1889c5074860f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pac-methods"></a>
Package Functions</h2></td></tr>
<tr class="memitem:a7244c332272c4013889f65f00c83fb6c"><td class="memItemLeft" align="right" valign="top">static&lt; T extends SampleModel &gt; T&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06599.html#a7244c332272c4013889f65f00c83fb6c">unique</a> (final T sampleModel)</td></tr>
<tr class="memdesc:a7244c332272c4013889f65f00c83fb6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a unique instance of the given sample model.  <a href="#a7244c332272c4013889f65f00c83fb6c">More...</a><br /></td></tr>
<tr class="separator:a7244c332272c4013889f65f00c83fb6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a70639ab78250a782cee96dc8d44068e7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06599.html#a70639ab78250a782cee96dc8d44068e7">RasterFactory</a> ()</td></tr>
<tr class="memdesc:a70639ab78250a782cee96dc8d44068e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do not allow instantiation of this class.  <a href="#a70639ab78250a782cee96dc8d44068e7">More...</a><br /></td></tr>
<tr class="separator:a70639ab78250a782cee96dc8d44068e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:ae5ff5948eb064b4c357161e139ea3d49"><td class="memItemLeft" align="right" valign="top">static final WeakHashSet&lt; SampleModel &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a06599.html#ae5ff5948eb064b4c357161e139ea3d49">POOL</a> = new WeakHashSet&lt;&gt;(SampleModel.class)</td></tr>
<tr class="memdesc:ae5ff5948eb064b4c357161e139ea3d49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shared instances of <a class="el" href="">SampleModel</a>s.  <a href="#ae5ff5948eb064b4c357161e139ea3d49">More...</a><br /></td></tr>
<tr class="separator:ae5ff5948eb064b4c357161e139ea3d49"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Creates rasters from given properties. </p>
<p>Contains also convenience methods for creating <a class="el" href="">BufferedImage</a> since that kind of images wraps a single raster.</p>
<dl class="section author"><dt>Author</dt><dd>Martin Desruisseaux (IRD, Geomatys) </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.1 </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.0  </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a70639ab78250a782cee96dc8d44068e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70639ab78250a782cee96dc8d44068e7">&#9670;&nbsp;</a></span>RasterFactory()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a06599.html">RasterFactory</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Do not allow instantiation of this class. </p>
<div class="fragment"><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                            {</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a08838b9702488c64ed7c49afad7af017"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08838b9702488c64ed7c49afad7af017">&#9670;&nbsp;</a></span>createGrayScaleImage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static BufferedImage createGrayScaleImage </td>
          <td>(</td>
          <td class="paramtype">final int&#160;</td>
          <td class="paramname"><em>dataType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final int&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final int&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final int&#160;</td>
          <td class="paramname"><em>numComponents</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final int&#160;</td>
          <td class="paramname"><em>visibleBand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final double&#160;</td>
          <td class="paramname"><em>minimum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final double&#160;</td>
          <td class="paramname"><em>maximum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates an opaque image with a gray scale color model. </p>
<p>The image can have an arbitrary number of bands, but in current implementation only one band is used.</p>
<p><b>Warning:</b> displaying this image is very slow, except in a few special cases. It should be used only when no standard color model can be used.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dataType</td><td>the color model type as one of<div class="fragment"><div class="line">DataBuffer.TYPE_* </div></div><!-- fragment --> constants. </td></tr>
    <tr><td class="paramname">width</td><td>the desired image width. </td></tr>
    <tr><td class="paramname">height</td><td>the desired image height. </td></tr>
    <tr><td class="paramname">numComponents</td><td>the number of components. </td></tr>
    <tr><td class="paramname">visibleBand</td><td>the band to use for computing colors. </td></tr>
    <tr><td class="paramname">minimum</td><td>the minimal sample value expected. </td></tr>
    <tr><td class="paramname">maximum</td><td>the maximal sample value expected. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the color space for the given range of values. </dd></dl>

<p class="reference">References <a class="el" href="a06583.html#ac13739a7a18d0a2c51b3cf3e8881005a">ColorModelFactory.createGrayScale()</a>, and <a class="el" href="a06583.html#ac0483add2c2ab3b588bd23df02739321">ColorModelFactory.isStandardRange()</a>.</p>
<div class="fragment"><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    {</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordflow">switch</span> (dataType) {</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            <span class="keywordflow">case</span> DataBuffer.TYPE_BYTE:</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            <span class="keywordflow">case</span> DataBuffer.TYPE_USHORT: {</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                <span class="keywordflow">if</span> (numComponents == 1 &amp;&amp; ColorModelFactory.isStandardRange(dataType, minimum, maximum)) {</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">new</span> BufferedImage(width, height, (dataType == DataBuffer.TYPE_BYTE)</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                                ? BufferedImage.TYPE_BYTE_GRAY : BufferedImage.TYPE_USHORT_GRAY);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                }</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            }</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        }</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keyword">final</span> ColorModel cm = ColorModelFactory.createGrayScale(dataType, numComponents, visibleBand, minimum, maximum);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> BufferedImage(cm, cm.createCompatibleWritableRaster(width, height), <span class="keyword">false</span>, null);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="a7d5cfb732965653960dbdc86f8c67708"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d5cfb732965653960dbdc86f8c67708">&#9670;&nbsp;</a></span>createRaster()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static WritableRaster createRaster </td>
          <td>(</td>
          <td class="paramtype">final DataBuffer&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final int&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final int&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final int&#160;</td>
          <td class="paramname"><em>pixelStride</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final int&#160;</td>
          <td class="paramname"><em>scanlineStride</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int []&#160;</td>
          <td class="paramname"><em>bankIndices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final int []&#160;</td>
          <td class="paramname"><em>bandOffsets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final Point&#160;</td>
          <td class="paramname"><em>location</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wraps the given data buffer in a raster. </p>
<p>The sample model type is selected according the number of bands and the pixel stride. The number of bands is determined by</p><div class="fragment"><div class="line">bandOffsets.length </div></div><!-- fragment --><p> , which should be one of followings:</p>
<ul>
<li>
For banded sample model, all<div class="fragment"><div class="line">bandOffsets </div></div><!-- fragment --> can be zero. </li>
<li>
For interleaved sample model (<div class="fragment"><div class="line">buffer.getNumBanks() </div></div><!-- fragment --> = 1), each band needs a different offset. They may be 0, 1, 2, 3…. </li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>buffer that contains the sample values. </td></tr>
    <tr><td class="paramname">width</td><td>raster width in pixels. </td></tr>
    <tr><td class="paramname">height</td><td>raster height in pixels. </td></tr>
    <tr><td class="paramname">pixelStride</td><td>number of data elements between two samples for the same band on the same line. </td></tr>
    <tr><td class="paramname">scanlineStride</td><td>number of data elements between a given sample and the corresponding sample in the same column of the next line. </td></tr>
    <tr><td class="paramname">bankIndices</td><td>bank indices for each band, or<div class="fragment"><div class="line">null </div></div><!-- fragment --> for 0, 1, 2, 3…. </td></tr>
    <tr><td class="paramname">bandOffsets</td><td>number of data elements from the first element of the bank to the first sample of the band. </td></tr>
    <tr><td class="paramname">location</td><td>the upper-left corner of the raster, or<div class="fragment"><div class="line">null </div></div><!-- fragment --> for (0,0). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a raster built from given properties. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">NullPointerException</td><td>if<div class="fragment"><div class="line">buffer </div></div><!-- fragment --> is<div class="fragment"><div class="line">null </div></div><!-- fragment --> . </td></tr>
    <tr><td class="paramname">RasterFormatException</td><td>if the width or height is less than or equal to zero, or if there is an integer overflow.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd>WritableRaster::createInterleavedRaster(DataBuffer, int, int, int, int, int[], Point) </dd>
<dd>
WritableRaster::createBandedRaster(DataBuffer, int, int, int, int[], int[], Point) </dd></dl>

<p class="reference">References <a class="el" href="a06599.html#a7244c332272c4013889f65f00c83fb6c">RasterFactory.unique()</a>.</p>
<div class="fragment"><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">         * We do not verify the argument validity. Since this class is internal, caller should have done verification</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">         * itself. Furthermore those arguments are verified by WritableRaster constructors anyway.</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">int</span> dataType = buffer.getDataType();</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">         * This SampleModel variable is a workaround for WritableRaster static methods not supporting all data types.</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">         * If &#39;dataType&#39; is unsupported, then we create a SampleModel ourselves in the &#39;switch&#39; statements below and</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">         * use it for creating a WritableRaster at the end of this method. This variable, together with the &#39;switch&#39;</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">         * statements, may be removed in a future SIS version if all types become supported by the JDK.</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        @Workaround(library = <span class="stringliteral">&quot;JDK&quot;</span>, version = <span class="stringliteral">&quot;10&quot;</span>)</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        final SampleModel model;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        if (buffer.getNumBanks() == 1 &amp;&amp; (bankIndices == null || bankIndices[0] == 0)) {</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">             * Sample data are stored for all bands in a single bank of the DataBuffer, in an interleaved fashion.</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">             * Each sample of a pixel occupies one data element of the DataBuffer, with a different offset since</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">             * the buffer beginning. The number of bands is inferred from bandOffsets.length.</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            <span class="keywordflow">switch</span> (dataType) {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                <span class="keywordflow">case</span> DataBuffer.TYPE_BYTE:</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                <span class="keywordflow">case</span> DataBuffer.TYPE_USHORT: {</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                    <span class="comment">// &#39;scanlineStride&#39; and &#39;pixelStride&#39; really interchanged in that method signature.</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                    <span class="keywordflow">return</span> WritableRaster.createInterleavedRaster(buffer, width, height, scanlineStride, pixelStride, bandOffsets, location);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                }</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                <span class="keywordflow">case</span> DataBuffer.TYPE_INT: {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                    <span class="keywordflow">if</span> (bandOffsets.length == 1 &amp;&amp; pixelStride == 1) {</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                        <span class="comment">/*</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">                         * From JDK javadoc: &quot;To create a 1-band Raster of type TYPE_INT, use createPackedRaster()&quot;.</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">                         * However this would require the creation of a PackedColorModel subclass. For SIS purposes,</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">                         * it is easier to create a banded sample model.</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">                         */</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                        <span class="keywordflow">return</span> WritableRaster.createBandedRaster(buffer, width, height, scanlineStride, <span class="keyword">new</span> <span class="keywordtype">int</span>[1], bandOffsets, location);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                    }</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                    <span class="comment">// else fallthrough.</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                }</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                <span class="keywordflow">default</span>: {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                    model = <span class="keyword">new</span> PixelInterleavedSampleModel(dataType, width, height, pixelStride, scanlineStride, bandOffsets);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                }</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            }</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">             * Sample data are stored in different banks (arrays) for each band. If all pixels are consecutive (pixelStride = 1),</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">             * we have the classical banded sample model. Otherwise the type is not well identified; neither interleaved or banded.</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            <span class="keywordflow">if</span> (bankIndices == null) {</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                bankIndices = ArraysExt.range(0, bandOffsets.length);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            }</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            <span class="keywordflow">if</span> (pixelStride == 1) {</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                <span class="keywordflow">switch</span> (dataType) {</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                    <span class="keywordflow">case</span> DataBuffer.TYPE_BYTE:</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                    <span class="keywordflow">case</span> DataBuffer.TYPE_USHORT:</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                    <span class="keywordflow">case</span> DataBuffer.TYPE_INT: {</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                        <span class="comment">// This constructor supports only above-cited types.</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                        <span class="keywordflow">return</span> WritableRaster.createBandedRaster(buffer, width, height, scanlineStride, bankIndices, bandOffsets, location);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                    }</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                    <span class="keywordflow">default</span>: {</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                        model = <span class="keyword">new</span> BandedSampleModel(dataType, width, height, scanlineStride, bankIndices, bandOffsets);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                    }</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                }</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                model = <span class="keyword">new</span> ComponentSampleModel(dataType, width, height, pixelStride, scanlineStride, bankIndices, bandOffsets);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        }</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keywordflow">return</span> WritableRaster.createWritableRaster(<a class="code" href="a06599.html#a7244c332272c4013889f65f00c83fb6c">unique</a>(model), buffer, location);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    }</div><div class="ttc" id="a06599_html_a7244c332272c4013889f65f00c83fb6c"><div class="ttname"><a href="a06599.html#a7244c332272c4013889f65f00c83fb6c">org.apache.sis.internal.coverage.j2d.RasterFactory.unique</a></div><div class="ttdeci">static&lt; T extends SampleModel &gt; T unique(final T sampleModel)</div><div class="ttdoc">Returns a unique instance of the given sample model. </div><div class="ttdef"><b>Definition:</b> RasterFactory.java:331</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9d68b79d1acc3bf61f0f78737d368e3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d68b79d1acc3bf61f0f78737d368e3e">&#9670;&nbsp;</a></span>getDataType() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int getDataType </td>
          <td>(</td>
          <td class="paramtype">final Class&lt;?&gt;&#160;</td>
          <td class="paramname"><em>sample</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final boolean&#160;</td>
          <td class="paramname"><em>unsigned</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the <a class="el" href="">DataBuffer</a> constant for the given type. </p>
<p>The given</p><div class="fragment"><div class="line">sample </div></div><!-- fragment --><p> class should be a primitive type such as <a class="el" href="">Float#TYPE</a>. Wrappers class are also accepted.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sample</td><td>the primitive type or its wrapper class. May be<div class="fragment"><div class="line">null </div></div><!-- fragment --> . </td></tr>
    <tr><td class="paramname">unsigned</td><td>whether the type should be considered unsigned. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the <a class="el" href="">DataBuffer</a> type, or <a class="el" href="">DataBuffer#TYPE_UNDEFINED</a>. </dd></dl>

<p class="reference">Referenced by <a class="el" href="a06523.html#aa127e9e850992a140f4584721acd2b60">ConvertedGridCoverage.getDataType()</a>.</p>
<div class="fragment"><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                                                                                 {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="keywordflow">switch</span> (Numbers.getEnumConstant(sample)) {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <span class="keywordflow">case</span> Numbers.BYTE:    <span class="keywordflow">return</span> <span class="keywordtype">unsigned</span> ? DataBuffer.TYPE_BYTE      : DataBuffer.TYPE_SHORT;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <span class="keywordflow">case</span> Numbers.SHORT:   <span class="keywordflow">return</span> <span class="keywordtype">unsigned</span> ? DataBuffer.TYPE_USHORT    : DataBuffer.TYPE_SHORT;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            <span class="keywordflow">case</span> Numbers.INTEGER: <span class="keywordflow">return</span> <span class="keywordtype">unsigned</span> ? DataBuffer.TYPE_UNDEFINED : DataBuffer.TYPE_INT;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <span class="keywordflow">case</span> Numbers.FLOAT:   <span class="keywordflow">return</span> DataBuffer.TYPE_FLOAT;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            <span class="keywordflow">case</span> Numbers.DOUBLE:  <span class="keywordflow">return</span> DataBuffer.TYPE_DOUBLE;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="keywordflow">default</span>:              <span class="keywordflow">return</span> DataBuffer.TYPE_UNDEFINED;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        }</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="ad5271e9e711f989b20b3a79660489a88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5271e9e711f989b20b3a79660489a88">&#9670;&nbsp;</a></span>getDataType() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int getDataType </td>
          <td>(</td>
          <td class="paramtype">final NumberRange&lt;?&gt;&#160;</td>
          <td class="paramname"><em>range</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final boolean&#160;</td>
          <td class="paramname"><em>keepFloat</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the <a class="el" href="">DataBuffer</a> constant for the given range of values. </p>
<p>If</p><div class="fragment"><div class="line">keepFloat </div></div><!-- fragment --><p> is</p><div class="fragment"><div class="line"><span class="keyword">false</span> </div></div><!-- fragment --><p> , then this method tries to return an integer type regardless if the range uses a floating point type. Range checks for integers assume ties rounding to positive infinity.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">range</td><td>the range of values, or<div class="fragment"><div class="line">null </div></div><!-- fragment --> . </td></tr>
    <tr><td class="paramname">keepFloat</td><td>whether to avoid integer types if the range uses floating point numbers. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the <a class="el" href="">DataBuffer</a> type or <a class="el" href="">DataBuffer#TYPE_UNDEFINED</a> if the given range was null. </dd></dl>
<div class="fragment"><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                                                                                       {</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="keywordflow">if</span> (range == null) {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <span class="keywordflow">return</span> DataBuffer.TYPE_UNDEFINED;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        }</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="keyword">final</span> byte nt = Numbers.getEnumConstant(range.getElementType());</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="keywordflow">if</span> (keepFloat) {</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            <span class="keywordflow">if</span> (nt &gt;= Numbers.DOUBLE)   <span class="keywordflow">return</span> DataBuffer.TYPE_DOUBLE;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            <span class="keywordflow">if</span> (nt &gt;= Numbers.FRACTION) <span class="keywordflow">return</span> DataBuffer.TYPE_FLOAT;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        }</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">double</span> min = range.getMinDouble();</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">double</span> max = range.getMaxDouble();</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordflow">if</span> (nt &lt; Numbers.BYTE || nt &gt; Numbers.FLOAT || nt == Numbers.LONG) {</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">             * Value type is long, double, BigInteger, BigDecimal or unknown type.</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">             * If conversions to 32 bits integers would lost integer digits, or if</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">             * a bound is NaN, stick to the most conservative data buffer type.</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">             *</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">             * Range check assumes ties rounding to positive infinity.</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            <span class="keywordflow">if</span> (!(min &gt;= -MAX_INTEGER_CONVERTIBLE_TO_FLOAT - 0.5 &amp;&amp; max &lt; MAX_INTEGER_CONVERTIBLE_TO_FLOAT + 0.5)) {</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                <span class="keywordflow">return</span> DataBuffer.TYPE_DOUBLE;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            }</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        }</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">         * Check most common types first. If the range could be both signed and unsigned short,</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">         * give precedence to unsigned short because it works better with IndexColorModel.</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">         * If a bounds is NaN, fallback on TYPE_FLOAT.</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="keywordflow">if</span> (min &gt;= -0.5 &amp;&amp; max &lt; 0xFFFF + 0.5) {</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            <span class="keywordflow">return</span> (max &lt; 0xFF + 0.5) ? DataBuffer.TYPE_BYTE : DataBuffer.TYPE_USHORT;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (min &gt;= Short.MIN_VALUE - 0.5 &amp;&amp; max &lt; Short.MAX_VALUE + 0.5) {</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            <span class="keywordflow">return</span> DataBuffer.TYPE_SHORT;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (min &gt;= Integer.MIN_VALUE - 0.5 &amp;&amp; max &lt; Integer.MAX_VALUE + 0.5) {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <span class="keywordflow">return</span> DataBuffer.TYPE_INT;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="keywordflow">return</span> DataBuffer.TYPE_FLOAT;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="a7244c332272c4013889f65f00c83fb6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7244c332272c4013889f65f00c83fb6c">&#9670;&nbsp;</a></span>unique()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static&lt;T extends SampleModel&gt; T unique </td>
          <td>(</td>
          <td class="paramtype">final T&#160;</td>
          <td class="paramname"><em>sampleModel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">package</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a unique instance of the given sample model. </p>
<p>This method can be invoked after a new sample has been created in order to share the same instance for many similar</p><div class="fragment"><div class="line">Raster </div></div><!-- fragment --><p> instances.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">&lt;T&gt;</td><td>the type of the given<div class="fragment"><div class="line">sampleModel </div></div><!-- fragment --> . </td></tr>
    <tr><td class="paramname">sampleModel</td><td>the sample model to make unique. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a unique instance of the given sample model. May be<div class="fragment"><div class="line">sampleModel </div></div><!-- fragment --> itself. </dd></dl>

<p class="reference">References <a class="el" href="a06599.html#ae5ff5948eb064b4c357161e139ea3d49">RasterFactory.POOL</a>.</p>

<p class="reference">Referenced by <a class="el" href="a06571.html#a89d4f7b0b4bb8a4f3a6efd49a02f2a1a">BandedSampleConverter.create()</a>, <a class="el" href="a06595.html#a314b5eabe552596feb8cf933cc482f29">MultiBandsIndexColorModel.createCompatibleSampleModel()</a>, and <a class="el" href="a06599.html#a7d5cfb732965653960dbdc86f8c67708">RasterFactory.createRaster()</a>.</p>
<div class="fragment"><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                                                                 {</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="a06599.html#ae5ff5948eb064b4c357161e139ea3d49">POOL</a>.unique(sampleModel);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    }</div><div class="ttc" id="a06599_html_ae5ff5948eb064b4c357161e139ea3d49"><div class="ttname"><a href="a06599.html#ae5ff5948eb064b4c357161e139ea3d49">org.apache.sis.internal.coverage.j2d.RasterFactory.POOL</a></div><div class="ttdeci">static final WeakHashSet&lt; SampleModel &gt; POOL</div><div class="ttdoc">Shared instances of SampleModels. </div><div class="ttdef"><b>Definition:</b> RasterFactory.java:64</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a95376763233bcb64d5c1889c5074860f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95376763233bcb64d5c1889c5074860f">&#9670;&nbsp;</a></span>wrap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static DataBuffer wrap </td>
          <td>(</td>
          <td class="paramtype">final int&#160;</td>
          <td class="paramname"><em>dataType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final Buffer...&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wraps the backing arrays of given NIO buffers into Java2D buffers. </p>
<p>This method wraps the underlying array of primitive types; data are not copied. For each buffer, the data starts at  Buffer::position() buffer position} and ends at  Buffer::limit() limit}.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dataType</td><td>type of buffer to create as one of <a class="el" href="">DataBuffer</a> constants. </td></tr>
    <tr><td class="paramname">data</td><td>the data, one for each band. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>buffer of the given type, or<div class="fragment"><div class="line">null </div></div><!-- fragment --> if<div class="fragment"><div class="line">dataType </div></div><!-- fragment --> is unrecognized. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">UnsupportedOperationException</td><td>if a buffer is not backed by an accessible array. </td></tr>
    <tr><td class="paramname">ReadOnlyBufferException</td><td>if a buffer is backed by an array but is read-only. </td></tr>
    <tr><td class="paramname">ArrayStoreException</td><td>if the type of a backing array is not<div class="fragment"><div class="line">dataType </div></div><!-- fragment --> . </td></tr>
    <tr><td class="paramname">ArithmeticException</td><td>if a buffer position overflows the 32 bits integer capacity. </td></tr>
    <tr><td class="paramname">RasterFormatException</td><td>if buffers do not have the same amount of remaining values. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                                                                            {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">int</span> numBands = data.length;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keyword">final</span> Object[] arrays;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">switch</span> (dataType) {</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            <span class="keywordflow">case</span> DataBuffer.TYPE_USHORT: <span class="comment">// fall through</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            <span class="keywordflow">case</span> DataBuffer.TYPE_SHORT:  arrays = <span class="keyword">new</span> <span class="keywordtype">short</span> [numBands][]; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            <span class="keywordflow">case</span> DataBuffer.TYPE_INT:    arrays = <span class="keyword">new</span> <span class="keywordtype">int</span>   [numBands][]; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <span class="keywordflow">case</span> DataBuffer.TYPE_BYTE:   arrays = <span class="keyword">new</span> byte  [numBands][]; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            <span class="keywordflow">case</span> DataBuffer.TYPE_FLOAT:  arrays = <span class="keyword">new</span> <span class="keywordtype">float</span> [numBands][]; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            <span class="keywordflow">case</span> DataBuffer.TYPE_DOUBLE: arrays = <span class="keyword">new</span> <span class="keywordtype">double</span>[numBands][]; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <span class="keywordflow">default</span>: <span class="keywordflow">return</span> null;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        }</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">int</span>[] offsets = <span class="keyword">new</span> <span class="keywordtype">int</span>[numBands];</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="keywordtype">int</span> length = 0;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;numBands; i++) {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            <span class="keyword">final</span> Buffer buffer = data[i];</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            ArgumentChecks.ensureNonNullElement(<span class="stringliteral">&quot;data&quot;</span>, i, buffer);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            arrays [i] = buffer.array();</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            offsets[i] = Math.addExact(buffer.arrayOffset(), buffer.position());</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            <span class="keyword">final</span> <span class="keywordtype">int</span> r = buffer.remaining();</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            <span class="keywordflow">if</span> (i == 0) length = r;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (length != r) {</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> RasterFormatException(Resources.format(Resources.Keys.MismatchedBandSize));</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            }</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        }</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="keywordflow">switch</span> (dataType) {</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            <span class="keywordflow">case</span> DataBuffer.TYPE_BYTE:   <span class="keywordflow">return</span> <span class="keyword">new</span> DataBufferByte  (  (byte[][]) arrays, length, offsets);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <span class="keywordflow">case</span> DataBuffer.TYPE_SHORT:  <span class="keywordflow">return</span> <span class="keyword">new</span> DataBufferShort ( (<span class="keywordtype">short</span>[][]) arrays, length, offsets);</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            <span class="keywordflow">case</span> DataBuffer.TYPE_USHORT: <span class="keywordflow">return</span> <span class="keyword">new</span> DataBufferUShort( (<span class="keywordtype">short</span>[][]) arrays, length, offsets);</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            <span class="keywordflow">case</span> DataBuffer.TYPE_INT:    <span class="keywordflow">return</span> <span class="keyword">new</span> DataBufferInt   (   (<span class="keywordtype">int</span>[][]) arrays, length, offsets);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            <span class="keywordflow">case</span> DataBuffer.TYPE_FLOAT:  <span class="keywordflow">return</span> <span class="keyword">new</span> DataBufferFloat ( (<span class="keywordtype">float</span>[][]) arrays, length, offsets);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            <span class="keywordflow">case</span> DataBuffer.TYPE_DOUBLE: <span class="keywordflow">return</span> <span class="keyword">new</span> DataBufferDouble((<span class="keywordtype">double</span>[][]) arrays, length, offsets);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <span class="keywordflow">default</span>: <span class="keywordflow">return</span> null;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        }</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ae5ff5948eb064b4c357161e139ea3d49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5ff5948eb064b4c357161e139ea3d49">&#9670;&nbsp;</a></span>POOL</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final WeakHashSet&lt;SampleModel&gt; POOL = new WeakHashSet&lt;&gt;(SampleModel.class)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Shared instances of <a class="el" href="">SampleModel</a>s. </p>
<dl class="section see"><dt>See also</dt><dd>#unique(SampleModel) </dd></dl>

<p class="reference">Referenced by <a class="el" href="a06599.html#a7244c332272c4013889f65f00c83fb6c">RasterFactory.unique()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a03806.html">org</a></li><li class="navelem"><a class="el" href="a03807.html">apache</a></li><li class="navelem"><a class="el" href="a03808.html">sis</a></li><li class="navelem"><a class="el" href="a03812.html">internal</a></li><li class="navelem"><a class="el" href="a03813.html">coverage</a></li><li class="navelem"><a class="el" href="a03811.html">j2d</a></li><li class="navelem"><a class="el" href="a06599.html">RasterFactory</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
