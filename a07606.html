<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>jena-geo: ReferencingUtilities Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">jena-geo
   &#160;<span id="projectnumber">Version 0.1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a07606.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="a07603.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ReferencingUtilities Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Complementary utility methods for <a class="el" href="a07378.html" title="Utility class for making use of the  CoordinateReferenceSystem Coordinate Reference System} and assoc...">CRS</a> manipulation.  
 <a href="a07606.html#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for ReferencingUtilities:</div>
<div class="dyncontent">
<div class="center"><img src="a07604.png" border="0" usemap="#ReferencingUtilities_coll__map" alt="Collaboration graph"/></div>
<map name="ReferencingUtilities_coll__map" id="ReferencingUtilities_coll__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a11d08d2c96f1252142b152f79d4c125f"><td class="memItemLeft" align="right" valign="top">static DirectPosition []&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07606.html#a11d08d2c96f1252142b152f79d4c125f">findWrapAround</a> (CoordinateReferenceSystem crs)  throws TransformException</td></tr>
<tr class="memdesc:a11d08d2c96f1252142b152f79d4c125f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test if the Coordinate Reference System has a wrap around axis.  <a href="#a11d08d2c96f1252142b152f79d4c125f">More...</a><br /></td></tr>
<tr class="separator:a11d08d2c96f1252142b152f79d4c125f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6874dd2f1cd0fa6d5210c6d9c289fd82"><td class="memItemLeft" align="right" valign="top">static double []&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07606.html#a6874dd2f1cd0fa6d5210c6d9c289fd82">convertResolution</a> (final Envelope srcEnvelope, final double[] oldResolution, final CoordinateReferenceSystem targetCrs, double... newResolution)  throws TransformException </td></tr>
<tr class="memdesc:a6874dd2f1cd0fa6d5210c6d9c289fd82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert resolution from old resolution and  Envelope::getCoordinateReferenceSystem() source <a class="el" href="a07378.html" title="Utility class for making use of the  CoordinateReferenceSystem Coordinate Reference System} and assoc...">CRS</a>} within srcEnvelope, and store result into destination array newResolution.  <a href="#a6874dd2f1cd0fa6d5210c6d9c289fd82">More...</a><br /></td></tr>
<tr class="separator:a6874dd2f1cd0fa6d5210c6d9c289fd82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af13d266fd46c44c933e5cb288a839990"><td class="memItemLeft" align="right" valign="top">static Envelope&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07606.html#af13d266fd46c44c933e5cb288a839990">wrapNormalize</a> (Envelope env, DirectPosition[] warp)</td></tr>
<tr class="separator:af13d266fd46c44c933e5cb288a839990"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc5b9175390515cc22627eb6425ec9c1"><td class="memItemLeft" align="right" valign="top">static Envelope&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07606.html#acc5b9175390515cc22627eb6425ec9c1">transform</a> (Envelope env, CoordinateReferenceSystem targetCRS)  throws TransformException</td></tr>
<tr class="memdesc:acc5b9175390515cc22627eb6425ec9c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transform the given envelope to the given crs.  <a href="#acc5b9175390515cc22627eb6425ec9c1">More...</a><br /></td></tr>
<tr class="separator:acc5b9175390515cc22627eb6425ec9c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a538b4a37cbf2e0c607da732f2a3d63a0"><td class="memItemLeft" align="right" valign="top">static GeneralEnvelope&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07606.html#a538b4a37cbf2e0c607da732f2a3d63a0">combine</a> (final Envelope bounds, final Date[] temporal, final Double[] elevation)  throws TransformException</td></tr>
<tr class="memdesc:a538b4a37cbf2e0c607da732f2a3d63a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a new envelope with vertical and temporal dimensions.  <a href="#a538b4a37cbf2e0c607da732f2a3d63a0">More...</a><br /></td></tr>
<tr class="separator:a538b4a37cbf2e0c607da732f2a3d63a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9f6ad075bba489c515494705775aa07"><td class="memItemLeft" align="right" valign="top">static GeneralEnvelope&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07606.html#ac9f6ad075bba489c515494705775aa07">combine</a> (CoordinateReferenceSystem crs, final Rectangle2D bounds, final Date[] temporal, final Double[] elevation)  throws TransformException</td></tr>
<tr class="memdesc:ac9f6ad075bba489c515494705775aa07"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a new envelope with vertical and temporal dimensions.  <a href="#ac9f6ad075bba489c515494705775aa07">More...</a><br /></td></tr>
<tr class="separator:ac9f6ad075bba489c515494705775aa07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5e7580dac28bb7f6e791de6752313e7"><td class="memItemLeft" align="right" valign="top">static CoordinateReferenceSystem&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07606.html#ae5e7580dac28bb7f6e791de6752313e7">change2DComponent</a> (final CoordinateReferenceSystem originalCRS, final CoordinateReferenceSystem crs2D)  throws TransformException </td></tr>
<tr class="memdesc:ae5e7580dac28bb7f6e791de6752313e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change the 2D <a class="el" href="a07378.html" title="Utility class for making use of the  CoordinateReferenceSystem Coordinate Reference System} and assoc...">CRS</a> part of the <a class="el" href="a07378.html" title="Utility class for making use of the  CoordinateReferenceSystem Coordinate Reference System} and assoc...">CRS</a>.  <a href="#ae5e7580dac28bb7f6e791de6752313e7">More...</a><br /></td></tr>
<tr class="separator:ae5e7580dac28bb7f6e791de6752313e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a475c64291946090583d48f656b0891d5"><td class="memItemLeft" align="right" valign="top">static Envelope&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07606.html#a475c64291946090583d48f656b0891d5">transform2DCRS</a> (final Envelope env, final CoordinateReferenceSystem crs2D)  throws TransformException</td></tr>
<tr class="memdesc:a475c64291946090583d48f656b0891d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transform the <a class="el" href="a07378.html" title="Utility class for making use of the  CoordinateReferenceSystem Coordinate Reference System} and assoc...">CRS</a> 2D component of this envelope.  <a href="#a475c64291946090583d48f656b0891d5">More...</a><br /></td></tr>
<tr class="separator:a475c64291946090583d48f656b0891d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a96336cbeba3c24b7970632a89a975c"><td class="memItemLeft" align="right" valign="top">static Envelope&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07606.html#a3a96336cbeba3c24b7970632a89a975c">setLongitudeFirst</a> (final Envelope env)  throws TransformException, FactoryException</td></tr>
<tr class="memdesc:a3a96336cbeba3c24b7970632a89a975c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to change a coordinate reference system axis order to place the east axis first.  <a href="#a3a96336cbeba3c24b7970632a89a975c">More...</a><br /></td></tr>
<tr class="separator:a3a96336cbeba3c24b7970632a89a975c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a559d846b31a5df0d77554e4998ef86f4"><td class="memItemLeft" align="right" valign="top">static CoordinateReferenceSystem&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07606.html#a559d846b31a5df0d77554e4998ef86f4">setLongitudeFirst</a> (final CoordinateReferenceSystem crs)  throws FactoryException</td></tr>
<tr class="memdesc:a559d846b31a5df0d77554e4998ef86f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to change a coordinate reference system axis order to place the east axis first.  <a href="#a559d846b31a5df0d77554e4998ef86f4">More...</a><br /></td></tr>
<tr class="separator:a559d846b31a5df0d77554e4998ef86f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae448d8529bd8703cd27cd35b310aa0b4"><td class="memItemLeft" align="right" valign="top">static AffineTransform&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07606.html#ae448d8529bd8703cd27cd35b310aa0b4">toAffine</a> (final Dimension rect, final Envelope env)</td></tr>
<tr class="memdesc:ae448d8529bd8703cd27cd35b310aa0b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an affine transform object where (0,0) in the dimension match the top left corner of the envelope.  <a href="#ae448d8529bd8703cd27cd35b310aa0b4">More...</a><br /></td></tr>
<tr class="separator:ae448d8529bd8703cd27cd35b310aa0b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2f7916f16e89bfa17892961c46e4c3e"><td class="memItemLeft" align="right" valign="top">static MathTransform&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07606.html#ae2f7916f16e89bfa17892961c46e4c3e">toTransform</a> (final MathTransform base, double[] ... values)</td></tr>
<tr class="separator:ae2f7916f16e89bfa17892961c46e4c3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a313ac74b0be1c50a996d1c5cf0454a4b"><td class="memItemLeft" align="right" valign="top">static MathTransform&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07606.html#a313ac74b0be1c50a996d1c5cf0454a4b">toTransform</a> (final int firstBaseOrdinate, final MathTransform subTransform, final Map&lt; Integer, double[]&gt; axisValues, final int expectedTargetDimension)</td></tr>
<tr class="memdesc:a313ac74b0be1c50a996d1c5cf0454a4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a <a class="el" href="">PassThroughTransform</a> with <b>expectedTargetDimension</b> number, from <b>subtransform</b> at dimension index <b>firstBaseOrdinate</b> and with <b>axisValues</b> infomation on each other dimensions.  <a href="#a313ac74b0be1c50a996d1c5cf0454a4b">More...</a><br /></td></tr>
<tr class="separator:a313ac74b0be1c50a996d1c5cf0454a4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acba1560a61e7c390b94272446d93738b"><td class="memItemLeft" align="right" valign="top">static Map&lt; Integer, CoordinateReferenceSystem &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07606.html#acba1560a61e7c390b94272446d93738b">indexedDecompose</a> (CoordinateReferenceSystem crs)</td></tr>
<tr class="memdesc:acba1560a61e7c390b94272446d93738b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decompose <a class="el" href="a07378.html" title="Utility class for making use of the  CoordinateReferenceSystem Coordinate Reference System} and assoc...">CRS</a> and return each sub-crs along with their dimension index.  <a href="#acba1560a61e7c390b94272446d93738b">More...</a><br /></td></tr>
<tr class="separator:acba1560a61e7c390b94272446d93738b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a838f65e03c42c9e161694aa741362d5b"><td class="memItemLeft" align="right" valign="top">static GeneralEnvelope&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07606.html#a838f65e03c42c9e161694aa741362d5b">transposeEnvelope</a> (final GeneralEnvelope source, GeneralEnvelope destination)</td></tr>
<tr class="memdesc:a838f65e03c42c9e161694aa741362d5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">For each axis value of the source envelope, we'll set corresponding one in destination envelope, if we find a valid transform.  <a href="#a838f65e03c42c9e161694aa741362d5b">More...</a><br /></td></tr>
<tr class="separator:a838f65e03c42c9e161694aa741362d5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa29bcaf178beef73f92b78601a1ecab"><td class="memItemLeft" align="right" valign="top">static GeneralEnvelope&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07606.html#aaa29bcaf178beef73f92b78601a1ecab">intersectEnvelopes</a> (final Envelope layerEnvelope, final Envelope filterEnvelope)  throws TransformException </td></tr>
<tr class="memdesc:aaa29bcaf178beef73f92b78601a1ecab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build an envelope which is the intersection between both of the parameters.  <a href="#aaa29bcaf178beef73f92b78601a1ecab">More...</a><br /></td></tr>
<tr class="separator:aaa29bcaf178beef73f92b78601a1ecab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72a2b88bc02b67a236e8971548ee02b3"><td class="memItemLeft" align="right" valign="top">static AffineTransform&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07606.html#a72a2b88bc02b67a236e8971548ee02b3">readTransform</a> (Path f)  throws IOException, NumberFormatException </td></tr>
<tr class="memdesc:a72a2b88bc02b67a236e8971548ee02b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read TFW file and return the content affine transform.  <a href="#a72a2b88bc02b67a236e8971548ee02b3">More...</a><br /></td></tr>
<tr class="separator:a72a2b88bc02b67a236e8971548ee02b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78fda5176e656c2d253dcb79b77608a5"><td class="memItemLeft" align="right" valign="top">static String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07606.html#a78fda5176e656c2d253dcb79b77608a5">lookupIdentifier</a> (final IdentifiedObject object, final boolean fullScan)  throws FactoryException </td></tr>
<tr class="memdesc:a78fda5176e656c2d253dcb79b77608a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Looks up an  Identifier identifier}, such as.  <a href="#a78fda5176e656c2d253dcb79b77608a5">More...</a><br /></td></tr>
<tr class="separator:a78fda5176e656c2d253dcb79b77608a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60ae902cf2b11666485076d2acd30eaf"><td class="memItemLeft" align="right" valign="top">static boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07606.html#a60ae902cf2b11666485076d2acd30eaf">intersects</a> (Envelope env1, Envelope env2)</td></tr>
<tr class="memdesc:a60ae902cf2b11666485076d2acd30eaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test if two envelopes intersects.  <a href="#a60ae902cf2b11666485076d2acd30eaf">More...</a><br /></td></tr>
<tr class="separator:a60ae902cf2b11666485076d2acd30eaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8e2d18cb095efdf0d073950e739fb76"><td class="memItemLeft" align="right" valign="top">static Optional&lt;? extends GeographicBoundingBox &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07606.html#ab8e2d18cb095efdf0d073950e739fb76">findGeographicBBox</a> (final Resource r)  throws DataStoreException </td></tr>
<tr class="memdesc:ab8e2d18cb095efdf0d073950e739fb76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to extract a geographic bounding box from given resource.  <a href="#ab8e2d18cb095efdf0d073950e739fb76">More...</a><br /></td></tr>
<tr class="separator:ab8e2d18cb095efdf0d073950e739fb76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d9ec7ea5c46f16aa7327686d0a1c25a"><td class="memItemLeft" align="right" valign="top">static double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07606.html#a4d9ec7ea5c46f16aa7327686d0a1c25a">orthodromicDistance</a> (final double radius, double λ1, double φ1, double λ2, double φ2)</td></tr>
<tr class="memdesc:a4d9ec7ea5c46f16aa7327686d0a1c25a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the orthodromic distance between two geographic coordinates.  <a href="#a4d9ec7ea5c46f16aa7327686d0a1c25a">More...</a><br /></td></tr>
<tr class="separator:a4d9ec7ea5c46f16aa7327686d0a1c25a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a4869b9536b37862eb4d0f03f750c55d0"><td class="memItemLeft" align="right" valign="top">static final double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07606.html#a4869b9536b37862eb4d0f03f750c55d0">EARTH_RADIUS</a> = 6371007</td></tr>
<tr class="memdesc:a4869b9536b37862eb4d0f03f750c55d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Authalic sphere radius in metres.  <a href="#a4869b9536b37862eb4d0f03f750c55d0">More...</a><br /></td></tr>
<tr class="separator:a4869b9536b37862eb4d0f03f750c55d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a420c78e586ca2999833586ccf0a3299b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07606.html#a420c78e586ca2999833586ccf0a3299b">ReferencingUtilities</a> ()</td></tr>
<tr class="separator:a420c78e586ca2999833586ccf0a3299b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:aa64d5279157a0f7502f60f99c1b614bd"><td class="memItemLeft" align="right" valign="top">static boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07606.html#aa64d5279157a0f7502f60f99c1b614bd">isWrapAroundCompatible</a> (MathTransform trs)</td></tr>
<tr class="separator:aa64d5279157a0f7502f60f99c1b614bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a651d44a2215c71055677573aede9eecc"><td class="memItemLeft" align="right" valign="top">static int []&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07606.html#a651d44a2215c71055677573aede9eecc">findDimensionIndexes</a> (CoordinateReferenceSystem crs)</td></tr>
<tr class="memdesc:a651d44a2215c71055677573aede9eecc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return array of dimensions indexes with [0, 1] : geographic [2] : elevation [3] : temporal.  <a href="#a651d44a2215c71055677573aede9eecc">More...</a><br /></td></tr>
<tr class="separator:a651d44a2215c71055677573aede9eecc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cebc116bcc50b78ef3ae4074a038182"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07606.html#a0cebc116bcc50b78ef3ae4074a038182">checkMTToTransform</a> (final int firstBaseOrdinate, final MathTransform subTransform, final Map&lt; Integer, double[]&gt; axisValues, final int expectedTargetDimension)</td></tr>
<tr class="memdesc:a0cebc116bcc50b78ef3ae4074a038182"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check than all needed parameters to build appropriate <a class="el" href="">PassThroughTransform</a> are conform.  <a href="#a0cebc116bcc50b78ef3ae4074a038182">More...</a><br /></td></tr>
<tr class="separator:a0cebc116bcc50b78ef3ae4074a038182"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e61d2ae168ec7e1bfbf4958a173a602"><td class="memItemLeft" align="right" valign="top">static Map&lt; String, String &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a07606.html#a9e61d2ae168ec7e1bfbf4958a173a602">name</a> (final String name)</td></tr>
<tr class="separator:a9e61d2ae168ec7e1bfbf4958a173a602"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Complementary utility methods for <a class="el" href="a07378.html" title="Utility class for making use of the  CoordinateReferenceSystem Coordinate Reference System} and assoc...">CRS</a> manipulation. </p>
<dl class="section author"><dt>Author</dt><dd>Johann Sorel (Geomatys) </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a420c78e586ca2999833586ccf0a3299b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a420c78e586ca2999833586ccf0a3299b">&#9670;&nbsp;</a></span>ReferencingUtilities()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a07606.html">ReferencingUtilities</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;{}</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ae5e7580dac28bb7f6e791de6752313e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5e7580dac28bb7f6e791de6752313e7">&#9670;&nbsp;</a></span>change2DComponent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static CoordinateReferenceSystem change2DComponent </td>
          <td>(</td>
          <td class="paramtype">final CoordinateReferenceSystem&#160;</td>
          <td class="paramname"><em>originalCRS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final CoordinateReferenceSystem&#160;</td>
          <td class="paramname"><em>crs2D</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws TransformException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Change the 2D <a class="el" href="a07378.html" title="Utility class for making use of the  CoordinateReferenceSystem Coordinate Reference System} and assoc...">CRS</a> part of the <a class="el" href="a07378.html" title="Utility class for making use of the  CoordinateReferenceSystem Coordinate Reference System} and assoc...">CRS</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">originalCRS</td><td>base <a class="el" href="a07378.html" title="Utility class for making use of the  CoordinateReferenceSystem Coordinate Reference System} and assoc...">CRS</a>, possible multi-dimension </td></tr>
    <tr><td class="paramname">crs2D</td><td>replacement 2D crs </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">Referenced by <a class="el" href="a07606.html#a475c64291946090583d48f656b0891d5">ReferencingUtilities.transform2DCRS()</a>.</p>
<div class="fragment"><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                                                                             {</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="keywordflow">if</span> (crs2D.getCoordinateSystem().getDimension() != 2) {</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="a13954.html">IllegalArgumentException</a>(<span class="stringliteral">&quot;Expected a 2D CRS&quot;</span>);</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        }</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <span class="keyword">final</span> CoordinateReferenceSystem targetCRS;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <span class="keywordflow">if</span> (originalCRS instanceof CompoundCRS) {</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            <span class="keyword">final</span> CompoundCRS ccrs = (CompoundCRS) originalCRS;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            <span class="keyword">final</span> CoordinateReferenceSystem part2D = CRS.getHorizontalComponent(originalCRS);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;            <span class="keyword">final</span> List&lt;CoordinateReferenceSystem&gt; lst = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            <span class="keywordflow">for</span> (CoordinateReferenceSystem c : ccrs.getComponents()) {</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                <span class="keywordflow">if</span> (c.equals(part2D)) {</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                    <span class="comment">//replace the 2D part</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                    lst.add(crs2D);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                    <span class="comment">//preserve other axis</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                    lst.add(c);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                }</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            }</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            <span class="keywordflow">try</span> {</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                targetCRS = CRS.compound(lst.toArray(<span class="keyword">new</span> CoordinateReferenceSystem[lst.size()]));</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            } <span class="keywordflow">catch</span> (FactoryException ex) {</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> TransformException(ex.getMessage(), ex);      <span class="comment">// TODO: not appropriate.</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            }</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (originalCRS.getCoordinateSystem().getDimension() == 2) {</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            <span class="comment">//no other axis, just reproject normally</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            targetCRS = crs2D;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> UnsupportedOperationException(<span class="stringliteral">&quot;How do we change the 2D component of a CRS if it&#39;s not a CompoundCRS ?&quot;</span>);</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        }</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="keywordflow">return</span> targetCRS;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    }</div><div class="ttc" id="a13954_html"><div class="ttname"><a href="a13954.html">IllegalArgumentException</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0cebc116bcc50b78ef3ae4074a038182"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cebc116bcc50b78ef3ae4074a038182">&#9670;&nbsp;</a></span>checkMTToTransform()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void checkMTToTransform </td>
          <td>(</td>
          <td class="paramtype">final int&#160;</td>
          <td class="paramname"><em>firstBaseOrdinate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final MathTransform&#160;</td>
          <td class="paramname"><em>subTransform</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final Map&lt; Integer, double[]&gt;&#160;</td>
          <td class="paramname"><em>axisValues</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final int&#160;</td>
          <td class="paramname"><em>expectedTargetDimension</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check than all needed parameters to build appropriate <a class="el" href="">PassThroughTransform</a> are conform. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">firstBaseOrdinate</td><td>the first minimum ordinate of subtransform into the expected target dimension. </td></tr>
    <tr><td class="paramname">subTransform</td><td>the sub transformation which will be wrapped by other mathematical functions. </td></tr>
    <tr><td class="paramname">axisValues</td><td>the list of mathmatical function for each other dimensions than already present subtransform dimensions. </td></tr>
    <tr><td class="paramname">expectedTargetDimension</td><td>the expected target <a class="el" href="">PassThroughTransform</a> dimension. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><div class="fragment"><div class="line"><span class="keyword">true</span> </div></div><!-- fragment --> if all needed dimension are informed else<div class="fragment"><div class="line"><span class="keyword">false</span> </div></div><!-- fragment --> . </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">NullArgumentException</td><td>if subtransform or axisValues are<div class="fragment"><div class="line">null </div></div><!-- fragment --> . </td></tr>
    <tr><td class="paramname">MismatchedDimensionException</td><td>if expected targetDimension is lesser than subtransform dimension. </td></tr>
    <tr><td class="paramname"><a class="el" href="a13954.html">IllegalArgumentException</a></td><td>if firstBaseOrdinate is out of target dimension boundary [0 &mdash;&gt; targetDim - subtransform target dim] </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">Referenced by <a class="el" href="a07606.html#a313ac74b0be1c50a996d1c5cf0454a4b">ReferencingUtilities.toTransform()</a>.</p>
<div class="fragment"><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                                                                                                                       {</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        ArgumentChecks.ensureNonNull(<span class="stringliteral">&quot;subTransform&quot;</span>, subTransform);</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        ArgumentChecks.ensureNonNull(<span class="stringliteral">&quot;axisValues&quot;</span>, axisValues);</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">int</span> subTransformDimensionNumber = subTransform.getTargetDimensions();</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        <span class="keywordflow">if</span> (expectedTargetDimension &lt; subTransformDimensionNumber)</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> MismatchedDimensionException(<span class="stringliteral">&quot;expectedTargetDimension should be &quot;</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                    + <span class="stringliteral">&quot;upper than subtransform target dimension. Expected upper than : &quot;</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                    +subTransformDimensionNumber+<span class="stringliteral">&quot; found : &quot;</span>+expectedTargetDimension);</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        ArgumentChecks.ensureBetween(<span class="stringliteral">&quot;firstBaseOrdinate&quot;</span>, 0, expectedTargetDimension - subTransformDimensionNumber, firstBaseOrdinate);</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <span class="keywordflow">if</span> (expectedTargetDimension &gt; 64)</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="a13954.html">IllegalArgumentException</a>(<span class="stringliteral">&quot;targetDimension &gt; 64 not supported&quot;</span>);</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <span class="comment">//-- create a long where the bits ordinate are at 1 in relation with subtransform ordinate.</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        <span class="keywordtype">long</span> isOrdinateChecked = ((1 &lt;&lt; (subTransformDimensionNumber)) -1) &lt;&lt; (expectedTargetDimension - firstBaseOrdinate - subTransformDimensionNumber);</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">final</span> Integer dim : axisValues.keySet()) {</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;            isOrdinateChecked = isOrdinateChecked | (1 &lt;&lt; (expectedTargetDimension - dim - 1));</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        }</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <span class="keywordflow">if</span> (isOrdinateChecked != ((1 &lt;&lt; expectedTargetDimension) - 1)) {</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;            <span class="keyword">final</span> StringBuilder strB = <span class="keyword">new</span> StringBuilder(<span class="stringliteral">&quot;The following dimension must be informed : &quot;</span>);</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> d = 0; d &lt; expectedTargetDimension; d++) {</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                <span class="keywordtype">long</span> currentDim = 1 &lt;&lt; d;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                <span class="keywordflow">if</span> ((isOrdinateChecked &amp; currentDim) != currentDim){</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                    strB.append(d);</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                    <span class="keywordflow">if</span> (d != (expectedTargetDimension - 1)) strB.append(<span class="stringliteral">&quot;,&quot;</span>);</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                }</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            }</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="a13954.html">IllegalArgumentException</a>(strB.toString());</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        }</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    }</div><div class="ttc" id="a13954_html"><div class="ttname"><a href="a13954.html">IllegalArgumentException</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a538b4a37cbf2e0c607da732f2a3d63a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a538b4a37cbf2e0c607da732f2a3d63a0">&#9670;&nbsp;</a></span>combine() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static GeneralEnvelope combine </td>
          <td>(</td>
          <td class="paramtype">final Envelope&#160;</td>
          <td class="paramname"><em>bounds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final Date []&#160;</td>
          <td class="paramname"><em>temporal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final Double []&#160;</td>
          <td class="paramname"><em>elevation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws TransformException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Make a new envelope with vertical and temporal dimensions. </p>
<div class="fragment"><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                                                                                                                                           {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        CoordinateReferenceSystem crs = bounds.getCoordinateReferenceSystem();</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        Rectangle2D rect = <span class="keyword">new</span> Rectangle2D.Double(</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                bounds.getMinimum(0),</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                bounds.getMinimum(1),</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                bounds.getSpan(0),</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                bounds.getSpan(1));</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="a07606.html#a538b4a37cbf2e0c607da732f2a3d63a0">combine</a>(crs, rect, temporal, elevation);</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    }</div><div class="ttc" id="a07606_html_a538b4a37cbf2e0c607da732f2a3d63a0"><div class="ttname"><a href="a07606.html#a538b4a37cbf2e0c607da732f2a3d63a0">org.geotoolkit.referencing.ReferencingUtilities.combine</a></div><div class="ttdeci">static GeneralEnvelope combine(final Envelope bounds, final Date[] temporal, final Double[] elevation)</div><div class="ttdoc">Make a new envelope with vertical and temporal dimensions. </div><div class="ttdef"><b>Definition:</b> ReferencingUtilities.java:416</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac9f6ad075bba489c515494705775aa07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9f6ad075bba489c515494705775aa07">&#9670;&nbsp;</a></span>combine() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static GeneralEnvelope combine </td>
          <td>(</td>
          <td class="paramtype">CoordinateReferenceSystem&#160;</td>
          <td class="paramname"><em>crs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final Rectangle2D&#160;</td>
          <td class="paramname"><em>bounds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final Date []&#160;</td>
          <td class="paramname"><em>temporal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final Double []&#160;</td>
          <td class="paramname"><em>elevation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws TransformException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Make a new envelope with vertical and temporal dimensions. </p>

<p class="reference">References <a class="el" href="a07606.html#a651d44a2215c71055677573aede9eecc">ReferencingUtilities.findDimensionIndexes()</a>, and <a class="el" href="a06998.html#a24f732e942e49a935b7f43a1f5e5daf8">CRSUtilities.getCRS2D()</a>.</p>
<div class="fragment"><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                                                                                      {</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <span class="keyword">final</span> CoordinateReferenceSystem crs2D = CRSUtilities.getCRS2D(crs);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        TemporalCRS temporalDim = null;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        VerticalCRS verticalDim = null;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="keywordflow">if</span>(temporal != null &amp;&amp; (temporal[0] != null || temporal[1] != null)){</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            temporalDim = getTemporalComponent(crs);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            <span class="keywordflow">if</span>(temporalDim == null){</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                temporalDim = CommonCRS.Temporal.JAVA.crs();</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            }</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        }</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="keywordflow">if</span>(elevation != null &amp;&amp; (elevation[0] != null || elevation[1] != null)){</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            verticalDim = getVerticalComponent(crs, <span class="keyword">true</span>);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            <span class="keywordflow">if</span>(verticalDim == null){</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                verticalDim = CommonCRS.Vertical.ELLIPSOIDAL.crs();</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            }</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        }</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="keyword">final</span> GeneralEnvelope env;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="keywordflow">if</span> (temporalDim != null &amp;&amp; verticalDim != null) {</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            <span class="keywordflow">try</span> {</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                crs = CRS.compound(crs2D, verticalDim, temporalDim);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            } <span class="keywordflow">catch</span> (FactoryException ex) {</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> TransformException(ex.getMessage(), ex);      <span class="comment">// TODO: not appropriate.</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            }</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            env = <span class="keyword">new</span> GeneralEnvelope(crs);</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            <span class="keywordtype">int</span>[] indexes = <a class="code" href="a07606.html#a651d44a2215c71055677573aede9eecc">findDimensionIndexes</a>(crs);</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            env.setRange(indexes[0], bounds.getMinX(), bounds.getMaxX());</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            env.setRange(indexes[1], bounds.getMinY(), bounds.getMaxY());</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            <span class="keywordflow">try</span> {</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                <span class="keyword">final</span> CoordinateReferenceSystem realTemporal = CommonCRS.Temporal.JAVA.crs();</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                <span class="keyword">final</span> MathTransform trs = CRS.findOperation(realTemporal, temporalDim, null).getMathTransform();</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                <span class="keyword">final</span> <span class="keywordtype">double</span>[] coords = <span class="keyword">new</span> <span class="keywordtype">double</span>[2];</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                coords[0] = (temporal[0] != null) ? temporal[0].getTime() : Double.NEGATIVE_INFINITY;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                coords[1] = (temporal[1] != null) ? temporal[1].getTime() : Double.POSITIVE_INFINITY;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                trs.transform(coords, 0, coords, 0, 2);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                env.setRange(indexes[3],coords[0],coords[1]);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            } <span class="keywordflow">catch</span> (FactoryException ex) {</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> TransformException(ex.getMessage(),ex);</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            }</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            <span class="keywordflow">try</span> {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                <span class="keyword">final</span> CoordinateReferenceSystem realElevation = CommonCRS.Vertical.ELLIPSOIDAL.crs();</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                <span class="keyword">final</span> MathTransform trs = CRS.findOperation(realElevation, verticalDim, null).getMathTransform();</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                <span class="keyword">final</span> <span class="keywordtype">double</span>[] coords = <span class="keyword">new</span> <span class="keywordtype">double</span>[2];</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                coords[0] = (elevation[0] != null) ? elevation[0] : Double.NEGATIVE_INFINITY;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                coords[1] = (elevation[1] != null) ? elevation[1] : Double.POSITIVE_INFINITY;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                trs.transform(coords, 0, coords, 0, 2);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                env.setRange(indexes[2],coords[0],coords[1]);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            } <span class="keywordflow">catch</span> (FactoryException ex) {</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> TransformException(ex.getMessage(),ex);</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            }</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (temporalDim != null) {</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            <span class="keywordflow">try</span> {</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                crs = CRS.compound(crs2D,  temporalDim);</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            } <span class="keywordflow">catch</span> (FactoryException ex) {</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> TransformException(ex.getMessage(), ex);      <span class="comment">// TODO: not appropriate.</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            }</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            env = <span class="keyword">new</span> GeneralEnvelope(crs);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            <span class="keywordtype">int</span>[] indexes = <a class="code" href="a07606.html#a651d44a2215c71055677573aede9eecc">findDimensionIndexes</a>(crs);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            env.setRange(indexes[0], bounds.getMinX(), bounds.getMaxX());</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            env.setRange(indexes[1], bounds.getMinY(), bounds.getMaxY());</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            <span class="keywordflow">try</span> {</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                <span class="keyword">final</span> CoordinateReferenceSystem realTemporal = CommonCRS.Temporal.JAVA.crs();</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                <span class="keyword">final</span> MathTransform trs = CRS.findOperation(realTemporal, temporalDim, null).getMathTransform();</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                <span class="keyword">final</span> <span class="keywordtype">double</span>[] coords = <span class="keyword">new</span> <span class="keywordtype">double</span>[2];</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                coords[0] = (temporal[0] != null) ? temporal[0].getTime() : Double.NEGATIVE_INFINITY;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                coords[1] = (temporal[1] != null) ? temporal[1].getTime() : Double.POSITIVE_INFINITY;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                trs.transform(coords, 0, coords, 0, 2);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                env.setRange(indexes[3],coords[0],coords[1]);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            } <span class="keywordflow">catch</span> (FactoryException ex) {</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> TransformException(ex.getMessage(),ex);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (verticalDim != null) {</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            <span class="keywordflow">try</span> {</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                crs = CRS.compound(crs2D, verticalDim);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            } <span class="keywordflow">catch</span> (FactoryException ex) {</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> TransformException(ex.getMessage(), ex);      <span class="comment">// TODO: not appropriate.</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            }</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            env = <span class="keyword">new</span> GeneralEnvelope(crs);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            <span class="keywordtype">int</span>[] indexes = <a class="code" href="a07606.html#a651d44a2215c71055677573aede9eecc">findDimensionIndexes</a>(crs);</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            env.setRange(indexes[0], bounds.getMinX(), bounds.getMaxX());</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            env.setRange(indexes[1], bounds.getMinY(), bounds.getMaxY());</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            <span class="keywordflow">try</span> {</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                <span class="keyword">final</span> CoordinateReferenceSystem realElevation = CommonCRS.Vertical.ELLIPSOIDAL.crs();</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                <span class="keyword">final</span> MathTransform trs = CRS.findOperation(realElevation, verticalDim, null).getMathTransform();</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                <span class="keyword">final</span> <span class="keywordtype">double</span>[] coords = <span class="keyword">new</span> <span class="keywordtype">double</span>[2];</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                coords[0] = (elevation[0] != null) ? elevation[0] : Double.NEGATIVE_INFINITY;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                coords[1] = (elevation[1] != null) ? elevation[1] : Double.POSITIVE_INFINITY;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                trs.transform(coords, 0, coords, 0, 2);</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                env.setRange(indexes[2],coords[0],coords[1]);</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            } <span class="keywordflow">catch</span> (FactoryException ex) {</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> TransformException(ex.getMessage(),ex);</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            }</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        }<span class="keywordflow">else</span>{</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            crs = crs2D;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            env = <span class="keyword">new</span> GeneralEnvelope(crs);</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            env.setRange(0, bounds.getMinX(), bounds.getMaxX());</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            env.setRange(1, bounds.getMinY(), bounds.getMaxY());</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        }</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="keywordflow">return</span> env;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    }</div><div class="ttc" id="a07606_html_a651d44a2215c71055677573aede9eecc"><div class="ttname"><a href="a07606.html#a651d44a2215c71055677573aede9eecc">org.geotoolkit.referencing.ReferencingUtilities.findDimensionIndexes</a></div><div class="ttdeci">static int [] findDimensionIndexes(CoordinateReferenceSystem crs)</div><div class="ttdoc">Return array of dimensions indexes with [0, 1] : geographic [2] : elevation [3] : temporal...</div><div class="ttdef"><b>Definition:</b> ReferencingUtilities.java:389</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6874dd2f1cd0fa6d5210c6d9c289fd82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6874dd2f1cd0fa6d5210c6d9c289fd82">&#9670;&nbsp;</a></span>convertResolution()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static double [] convertResolution </td>
          <td>(</td>
          <td class="paramtype">final Envelope&#160;</td>
          <td class="paramname"><em>srcEnvelope</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final double []&#160;</td>
          <td class="paramname"><em>oldResolution</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final CoordinateReferenceSystem&#160;</td>
          <td class="paramname"><em>targetCrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double...&#160;</td>
          <td class="paramname"><em>newResolution</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws TransformException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert resolution from old resolution and  Envelope::getCoordinateReferenceSystem() source <a class="el" href="a07378.html" title="Utility class for making use of the  CoordinateReferenceSystem Coordinate Reference System} and assoc...">CRS</a>} within srcEnvelope, and store result into destination array newResolution. </p>
<p><br />
<br />
</p>
<p><b> Note 1 : newResolution array may be</p><div class="fragment"><div class="line">null </div></div><!-- fragment --><p> , in this case a new array result will be created, where its length will be equals to targetCRS dimensions number.<br />
 Note 2 : the resolution convertion will be compute from  <a class="el" href="a06998.html#a24f732e942e49a935b7f43a1f5e5daf8" title="Returns a two-dimensional coordinate reference system representing the two first dimensions of the sp...">CRSUtilities::getCRS2D</a>(org.opengis.referencing.crs.CoordinateReferenceSystem) 2D <a class="el" href="a07378.html" title="Utility class for making use of the  CoordinateReferenceSystem Coordinate Reference System} and assoc...">CRS</a> horizontal part} of source <a class="el" href="a07378.html" title="Utility class for making use of the  CoordinateReferenceSystem Coordinate Reference System} and assoc...">CRS</a> from <a class="el" href="">Envelope</a> and 2D targetCRS horizontal part.<br />
 Note 3 : if destination resolution array is not</p><div class="fragment"><div class="line">null </div></div><!-- fragment --><p> the resolution values about other dimensions than 2D horizontal targetCRS part are unchanged, else (if new resolution array is</p><div class="fragment"><div class="line">null </div></div><!-- fragment --><p> ) the resolution values on other dimensions are setted to</p><div class="fragment"><div class="line">1 </div></div><!-- fragment --><p> .<br />
 Note 4 : oldResolution array length may not be mandatory equal to  Envelope::getDimension() source Envelope dimension number}. The resolution convertion will be computed on horizontal <a class="el" href="a07378.html" title="Utility class for making use of the  CoordinateReferenceSystem Coordinate Reference System} and assoc...">CRS</a> 2D part. </b></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">srcEnvelope</td><td>source envelope in relation with the source resolution. </td></tr>
    <tr><td class="paramname">oldResolution</td><td>the old resolution which will be convert. </td></tr>
    <tr><td class="paramname">targetCrs</td><td>destination <a class="el" href="">CoordinateReferenceSystem</a> where the new resolution will be exprimate. </td></tr>
    <tr><td class="paramname">newResolution</td><td>the result array of the transformed resolution. You may pass the same array than oldResolution if you want to store result in the same array.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a new resolution array compute from oldResolution exprimate into targetCRS. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">TransformException</td><td>if problem during Envelope transformation into targetCrs. </td></tr>
    <tr><td class="paramname">NullArgumentException</td><td>if one of these parameter is<div class="fragment"><div class="line">null </div></div><!-- fragment --> : srcEnvelope, oldResolution or targetCRS. </td></tr>
    <tr><td class="paramname">MismatchedDimensionException</td><td>if oldResolution array have length different than 2. </td></tr>
    <tr><td class="paramname">MismatchedDimensionException</td><td>if newResolution array length and target <a class="el" href="a07378.html" title="Utility class for making use of the  CoordinateReferenceSystem Coordinate Reference System} and assoc...">CRS</a> dimension are differents. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="a06998.html#ad9fccc5aeb3991f7029a5829556606ca">CRSUtilities.firstHorizontalAxis()</a>, and <a class="el" href="a06998.html#a24f732e942e49a935b7f43a1f5e5daf8">CRSUtilities.getCRS2D()</a>.</p>
<div class="fragment"><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                                                                                                                                           {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        ArgumentChecks.ensureNonNull(<span class="stringliteral">&quot;srcEnvelope&quot;</span>,   srcEnvelope);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        ArgumentChecks.ensureNonNull(<span class="stringliteral">&quot;oldResolution&quot;</span>, oldResolution);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        ArgumentChecks.ensureNonNull(<span class="stringliteral">&quot;targetCRS&quot;</span>,     targetCrs);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <span class="comment">//-- initialize destination array if it is null.</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordflow">if</span> (newResolution == null || newResolution.length == 0) {</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            newResolution = <span class="keyword">new</span> <span class="keywordtype">double</span>[targetCrs.getCoordinateSystem().getDimension()];</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            Arrays.fill(newResolution, 1);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            <span class="keywordflow">if</span> (targetCrs.getCoordinateSystem().getDimension() != newResolution.length)</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> MismatchedDimensionException(<span class="stringliteral">&quot;Destination resolution array length should be equals than target CRS dimension number.&quot;</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                    + <span class="stringliteral">&quot;Destination resolution array length = &quot;</span>+newResolution.length+<span class="stringliteral">&quot;, CRS dimension number = &quot;</span>+targetCrs.getCoordinateSystem().getDimension());</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        }</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keyword">final</span> CoordinateReferenceSystem srcCRS = srcEnvelope.getCoordinateReferenceSystem();</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="keywordflow">if</span> (oldResolution.length != 2)</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="a13954.html">IllegalArgumentException</a>(<span class="stringliteral">&quot;Resolution array length should be equals to 2. Founded array length : &quot;</span> + oldResolution.length);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">int</span> targetMinOrdi = CRSUtilities.firstHorizontalAxis(targetCrs);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keywordflow">if</span> (Utilities.equalsIgnoreMetadata(srcCRS, targetCrs)) {</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            assert targetMinOrdi + oldResolution.length &lt;= newResolution.length : <span class="stringliteral">&quot;First horizontal index from target CRS + old resolution array length &quot;</span> +</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                    <span class="stringliteral">&quot;should be lesser than new resolution array length.&quot;</span>;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            System.arraycopy(oldResolution, 0, newResolution, targetMinOrdi, oldResolution.length);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            <span class="keyword">final</span> <span class="keywordtype">int</span> srcMinOrdi = CRSUtilities.firstHorizontalAxis(srcCRS);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <span class="keyword">final</span> CoordinateReferenceSystem srcCRS2D    = CRSUtilities.getCRS2D(srcCRS);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <span class="keyword">final</span> CoordinateReferenceSystem targetCRS2D = CRSUtilities.getCRS2D(targetCrs);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="keyword">final</span> DirectPosition center = <span class="keyword">new</span> GeneralDirectPosition(srcCRS2D);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            center.setOrdinate(0, srcEnvelope.getMedian(srcMinOrdi));</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            center.setOrdinate(1, srcEnvelope.getMedian(srcMinOrdi+1));</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            <span class="keywordflow">try</span> {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                <span class="keyword">final</span> MathTransform trs = CRS.findOperation(srcCRS2D, targetCRS2D, null).getMathTransform();</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                <span class="keyword">final</span> Matrix derivative = trs.derivative(center);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                <span class="keywordtype">double</span>[] res2d = MatrixSIS.castOrCopy(derivative).multiply(oldResolution);</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                <span class="comment">//array sizes may differ, copy only the 2D resolution.</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                newResolution[0] = res2d[0];</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                newResolution[1] = res2d[1];</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            } <span class="keywordflow">catch</span> (FactoryException | ProjectionException ex) {</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                <span class="comment">//uncorrect fallback solution, better then nothing</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                <span class="comment">//-- grid envelope</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                <span class="keyword">final</span> <span class="keywordtype">int</span> displayWidth  = (int) StrictMath.ceil(srcEnvelope.getSpan(srcMinOrdi)     / oldResolution[0]);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                <span class="keyword">final</span> <span class="keywordtype">int</span> displayHeight = (int) StrictMath.ceil(srcEnvelope.getSpan(srcMinOrdi + 1) / oldResolution[1]);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                <span class="keyword">final</span> GeneralEnvelope srcEnvelope2D = <span class="keyword">new</span> GeneralEnvelope(srcCRS2D);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                srcEnvelope2D.setRange(0, srcEnvelope.getMinimum(srcMinOrdi),     srcEnvelope.getMaximum(srcMinOrdi));</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                srcEnvelope2D.setRange(1, srcEnvelope.getMinimum(srcMinOrdi + 1), srcEnvelope.getMaximum(srcMinOrdi + 1));</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                <span class="comment">//-- target image into target CRS 2D</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                <span class="keyword">final</span> Envelope targetEnvelope2D = Envelopes.transform(srcEnvelope2D, targetCRS2D);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                newResolution[targetMinOrdi]     = targetEnvelope2D.getSpan(0) / displayWidth;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                newResolution[targetMinOrdi + 1] = targetEnvelope2D.getSpan(1) / displayHeight;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            }</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        }</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="comment">//at current step, resolution may have negative values du to derivate.</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;newResolution.length; i++) {</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            newResolution[i] = abs(newResolution[i]);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <span class="keywordflow">if</span> (Double.isNaN(newResolution[i]) &amp;&amp; (i == targetMinOrdi || i == targetMinOrdi+1)) {</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                <span class="comment">//if a value is NaN, peek resolution of the other horizontal axis</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                newResolution[i] = newResolution[i == targetMinOrdi ? i+1 : i-1];</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            }</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            <span class="keywordflow">if</span> (Double.isNaN(newResolution[i])) {</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                <span class="comment">//if a value is still NaN, use original resolution</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                newResolution[i] = oldResolution[i];</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            }</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        }</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="keywordflow">return</span> newResolution;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    }</div><div class="ttc" id="a13954_html"><div class="ttname"><a href="a13954.html">IllegalArgumentException</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a651d44a2215c71055677573aede9eecc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a651d44a2215c71055677573aede9eecc">&#9670;&nbsp;</a></span>findDimensionIndexes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int [] findDimensionIndexes </td>
          <td>(</td>
          <td class="paramtype">CoordinateReferenceSystem&#160;</td>
          <td class="paramname"><em>crs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return array of dimensions indexes with [0, 1] : geographic [2] : elevation [3] : temporal. </p>
<dl class="deprecated"><dt><b><a class="el" href="a03636.html#_deprecated000077">Deprecated:</a></b></dt><dd>dimension not found have their index left to 0, which is probably not appropriate (they will be taken as longitude or easting). </dd></dl>

<p class="reference">Referenced by <a class="el" href="a07606.html#ac9f6ad075bba489c515494705775aa07">ReferencingUtilities.combine()</a>.</p>
<div class="fragment"><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                                                                             {</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="keyword">final</span> CoordinateSystem cs = crs.getCoordinateSystem();</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        assert (cs.getDimension() &lt;= 4);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <span class="keywordtype">int</span>[] indexes = <span class="keyword">new</span> <span class="keywordtype">int</span>[4];</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="keywordtype">int</span> d = 0;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="keywordflow">for</span> (SingleCRS crs2 : getSingleComponents(crs)) {</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <span class="keyword">final</span> <span class="keywordtype">int</span> dim = crs2.getCoordinateSystem().getDimension();</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            <span class="keywordflow">if</span> (crs2 instanceof GeographicCRS || crs2 instanceof ProjectedCRS) {</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;dim; i++) {      <span class="comment">// May be 2 or 3 dimensional.</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                    indexes[i] = d++;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                }</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (crs2 instanceof VerticalCRS) {</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                assert dim == 1;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                indexes[2] = d++;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (crs2 instanceof TemporalCRS) {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                assert dim == 1;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                indexes[3] = d++;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="a13954.html">IllegalArgumentException</a>(<span class="stringliteral">&quot;Unsupported CRS: &quot;</span> + crs2);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            }</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        }</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="keywordflow">return</span> indexes;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    }</div><div class="ttc" id="a13954_html"><div class="ttname"><a href="a13954.html">IllegalArgumentException</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab8e2d18cb095efdf0d073950e739fb76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8e2d18cb095efdf0d073950e739fb76">&#9670;&nbsp;</a></span>findGeographicBBox()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Optional&lt;? extends GeographicBoundingBox&gt; findGeographicBBox </td>
          <td>(</td>
          <td class="paramtype">final Resource&#160;</td>
          <td class="paramname"><em>r</em></td><td>)</td>
          <td> throws DataStoreException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Try to extract a geographic bounding box from given resource. </p>
<p>: We'll try to acquire metadata from the resource, and making an union of all available geographic boxes found in it. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">r</td><td>The resource to analyze. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A geographic envelope if we've found any in the resource metadata. Nothing otherwise.</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">DataStoreException</td><td>If accessing the resource metadata failed. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;                                                                                                                           {</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        <span class="keywordflow">return</span> r.getMetadata().getIdentificationInfo().stream()</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;                .flatMap(i -&gt; i.getExtents().stream())</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;                .map(Extents::getGeographicBoundingBox)</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                .map(DefaultGeographicBoundingBox::new )</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;                .reduce((b1, b2) -&gt; {b1.add(b2); <span class="keywordflow">return</span> b1;});</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="a11d08d2c96f1252142b152f79d4c125f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11d08d2c96f1252142b152f79d4c125f">&#9670;&nbsp;</a></span>findWrapAround()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static DirectPosition [] findWrapAround </td>
          <td>(</td>
          <td class="paramtype">CoordinateReferenceSystem&#160;</td>
          <td class="paramname"><em>crs</em></td><td>)</td>
          <td> throws TransformException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Test if the Coordinate Reference System has a wrap around axis. </p>
<p>This method checks if the <a class="el" href="a07378.html" title="Utility class for making use of the  CoordinateReferenceSystem Coordinate Reference System} and assoc...">CRS</a> is geographic or projected with a compatible transformation (only linear or Mercator).</p>
<p>Example, for EPSG:4326 the result is : [0] = Position(0,-180) [1] = Position(0,+180)</p>
<p>Example, for EPSG:3395 (mercator) the result is : [0] = Position(-2M,0) [1] = Position(+2M,0)</p>
<p>Example, for EPSG:27582 (conic) the result is : null since there is no possible wrap around.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">crs</td><td>to test </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DirectPosition[] size 2 : [0] : start wrap around position in given <a class="el" href="a07378.html" title="Utility class for making use of the  CoordinateReferenceSystem Coordinate Reference System} and assoc...">CRS</a>. [1] : end wrap around position in given <a class="el" href="a07378.html" title="Utility class for making use of the  CoordinateReferenceSystem Coordinate Reference System} and assoc...">CRS</a>. null if crs does not have a wrap around axis </dd></dl>

<p class="reference">References <a class="el" href="a07606.html#aa64d5279157a0f7502f60f99c1b614bd">ReferencingUtilities.isWrapAroundCompatible()</a>.</p>
<div class="fragment"><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                                                                                                          {</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keywordflow">if</span>(crs instanceof GeographicCRS){</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            <span class="keyword">final</span> EllipsoidalCS cs = ((GeographicCRS)crs).getCoordinateSystem();</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0,n=cs.getDimension();i&lt;n;i++){</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                <span class="keyword">final</span> CoordinateSystemAxis axis = cs.getAxis(i);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                <span class="keywordflow">if</span>(RangeMeaning.WRAPAROUND.equals(axis.getRangeMeaning())){</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                    <span class="keyword">final</span> DirectPosition start = <span class="keyword">new</span> GeneralDirectPosition(crs);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                    start.setOrdinate(i, axis.getMinimumValue());</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                    <span class="keyword">final</span> DirectPosition end = <span class="keyword">new</span> DirectPosition2D(crs);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                    end.setOrdinate(i, axis.getMaximumValue());</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">new</span> DirectPosition[]{start,end};</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                }</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            }</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(crs instanceof ProjectedCRS){</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            <span class="keyword">final</span> ProjectedCRS projectedCRS = (ProjectedCRS) crs;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="keyword">final</span> MathTransform trs = projectedCRS.getConversionFromBase().getMathTransform();</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            <span class="comment">//test if the transform can contain a wrap axis</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="a07606.html#aa64d5279157a0f7502f60f99c1b614bd">isWrapAroundCompatible</a>(trs)){</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                <span class="keyword">final</span> CoordinateReferenceSystem baseCrs = projectedCRS.getBaseCRS();</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                <span class="keyword">final</span> DirectPosition[] info = <a class="code" href="a07606.html#a11d08d2c96f1252142b152f79d4c125f">findWrapAround</a>(baseCrs);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                info[0] = trs.transform(info[0], null);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                info[1] = trs.transform(info[1], null);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                <span class="keywordflow">return</span> info;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            }</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        }</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="keywordflow">return</span> null;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    }</div><div class="ttc" id="a07606_html_a11d08d2c96f1252142b152f79d4c125f"><div class="ttname"><a href="a07606.html#a11d08d2c96f1252142b152f79d4c125f">org.geotoolkit.referencing.ReferencingUtilities.findWrapAround</a></div><div class="ttdeci">static DirectPosition [] findWrapAround(CoordinateReferenceSystem crs)</div><div class="ttdoc">Test if the Coordinate Reference System has a wrap around axis. </div><div class="ttdef"><b>Definition:</b> ReferencingUtilities.java:114</div></div>
<div class="ttc" id="a07606_html_aa64d5279157a0f7502f60f99c1b614bd"><div class="ttname"><a href="a07606.html#aa64d5279157a0f7502f60f99c1b614bd">org.geotoolkit.referencing.ReferencingUtilities.isWrapAroundCompatible</a></div><div class="ttdeci">static boolean isWrapAroundCompatible(MathTransform trs)</div><div class="ttdef"><b>Definition:</b> ReferencingUtilities.java:144</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acba1560a61e7c390b94272446d93738b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acba1560a61e7c390b94272446d93738b">&#9670;&nbsp;</a></span>indexedDecompose()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Map&lt;Integer, CoordinateReferenceSystem&gt; indexedDecompose </td>
          <td>(</td>
          <td class="paramtype">CoordinateReferenceSystem&#160;</td>
          <td class="paramname"><em>crs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decompose <a class="el" href="a07378.html" title="Utility class for making use of the  CoordinateReferenceSystem Coordinate Reference System} and assoc...">CRS</a> and return each sub-crs along with their dimension index. </p>
<dl class="section return"><dt>Returns</dt><dd>Map of index and sub-crs </dd></dl>
<div class="fragment"><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                                                                                                          {</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        <span class="keyword">final</span> TreeMap&lt;Integer, CoordinateReferenceSystem&gt; result = <span class="keyword">new</span> TreeMap&lt;&gt;();</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        <span class="keywordtype">int</span> index = 0;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        CoordinateReferenceSystem crsPart;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        CoordinateSystem csPart;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        <span class="keyword">final</span> List&lt;SingleCRS&gt; crsParts = getSingleComponents(crs);</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; crsParts.size(); j++) {</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;            crsPart = crsParts.get(j);</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;            csPart = crsPart.getCoordinateSystem();</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;            result.put(index, crsPart);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;            index += csPart.getDimension();</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        }</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="aaa29bcaf178beef73f92b78601a1ecab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa29bcaf178beef73f92b78601a1ecab">&#9670;&nbsp;</a></span>intersectEnvelopes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static GeneralEnvelope intersectEnvelopes </td>
          <td>(</td>
          <td class="paramtype">final Envelope&#160;</td>
          <td class="paramname"><em>layerEnvelope</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final Envelope&#160;</td>
          <td class="paramname"><em>filterEnvelope</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws TransformException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Build an envelope which is the intersection between both of the parameters. </p>
<p>The <a class="el" href="a07378.html" title="Utility class for making use of the  CoordinateReferenceSystem Coordinate Reference System} and assoc...">CRS</a> of the two input envelopes can be different, with different number of dimension.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">layerEnvelope</td><td>The envelope of the source layer. Result envelope will keep this object <a class="el" href="a07378.html" title="Utility class for making use of the  CoordinateReferenceSystem Coordinate Reference System} and assoc...">CRS</a>. </td></tr>
    <tr><td class="paramname">filterEnvelope</td><td>the envelope used as filter. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An envelope which is the found intersection between the two inputs. The <a class="el" href="a07378.html" title="Utility class for making use of the  CoordinateReferenceSystem Coordinate Reference System} and assoc...">CRS</a> of the result will be the same as the first input. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">TransformException</td><td>if an incompatibility between CRSs is found. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="a07378.html#ad101ec8b550a2f61c67caba0e16b272b">CRS.getCompoundCRS()</a>.</p>
<div class="fragment"><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                                      {</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        ArgumentChecks.ensureNonNull(<span class="stringliteral">&quot;source envelope&quot;</span>, layerEnvelope);</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        GeneralEnvelope resultEnvelope = <span class="keyword">new</span> GeneralEnvelope(layerEnvelope);</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        <span class="keywordflow">if</span> (filterEnvelope == null) {</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;            <span class="keywordflow">return</span> resultEnvelope;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        }</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        <span class="keyword">final</span> CoordinateReferenceSystem inputCRS = layerEnvelope.getCoordinateReferenceSystem();</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;        <span class="keyword">final</span> CoordinateReferenceSystem filterCRS = filterEnvelope.getCoordinateReferenceSystem();</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        <span class="keywordflow">if</span> (resultEnvelope.getDimension() &lt;= filterEnvelope.getDimension()) {</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;            resultEnvelope.intersect(Envelopes.transform(filterEnvelope, inputCRS));</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;            <span class="comment">/* If source CRS got more dimensions than the one given as filter,</span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment">             * we need to isolate each component of the filter to insert them</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="comment">             * into an envelope of the source CRS.</span></div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;            <span class="keywordflow">if</span> (inputCRS instanceof CompoundCRS) {</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                <span class="keyword">final</span> ArrayList&lt;SingleCRS&gt; toFind = <span class="keyword">new</span> ArrayList&lt;&gt;(3);</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                <span class="keyword">final</span> TemporalCRS inputTemporal = getTemporalComponent(inputCRS);</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                <span class="keyword">final</span> TemporalCRS filterTemporal = getTemporalComponent(filterCRS);</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                <span class="keyword">final</span> SingleCRS inputHorizontal = getHorizontalComponent(inputCRS);</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                <span class="keyword">final</span> SingleCRS filterHorizontal = getHorizontalComponent(filterCRS);</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                <span class="keyword">final</span> VerticalCRS inputVertical = getVerticalComponent(inputCRS, <span class="keyword">true</span>);</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                <span class="keyword">final</span> VerticalCRS filterVertical = getVerticalComponent(filterCRS, <span class="keyword">true</span>);</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                <span class="keywordflow">if</span> (inputHorizontal != null &amp;&amp; filterHorizontal != null) {</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                    toFind.add(inputHorizontal);</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                }</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                <span class="keywordflow">if</span> (inputTemporal != null &amp;&amp; filterTemporal != null) {</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                    toFind.add(inputTemporal);</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                }</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                <span class="keywordflow">if</span> (inputVertical != null &amp;&amp; filterVertical != null) {</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                    toFind.add(inputVertical);</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                }</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                <span class="comment">/* build a sub-CRS, containing all the input components which can</span></div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="comment">                 * be compared with current filter.</span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="comment">                 */</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                <span class="keyword">final</span> CoordinateReferenceSystem tmpCRS;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                <span class="keywordflow">if</span> (toFind.size() &lt;= 0) {</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> TransformException(<span class="stringliteral">&quot;An error occured while applying filter : input layer CRS and filter CRS aren&#39;t compatible.&quot;</span>);</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (toFind.size() == 1) {</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                    tmpCRS = toFind.get(0);</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;                    tmpCRS = <a class="code" href="a03713.html">org</a>.<a class="code" href="a03722.html">geotoolkit</a>.<a class="code" href="a03760.html">referencing</a>.<a class="code" href="a07378.html">CRS</a>.<a class="code" href="a07378.html#ad101ec8b550a2f61c67caba0e16b272b">getCompoundCRS</a>((CompoundCRS) inputCRS, toFind.toArray(<span class="keyword">new</span> SingleCRS[toFind.size()]));</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                }</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                <span class="keyword">final</span> GeneralEnvelope tmpFilter = <span class="keyword">new</span> GeneralEnvelope(Envelopes.transform(filterEnvelope, tmpCRS));</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;                <span class="keyword">final</span> GeneralEnvelope tmpResult = <span class="keyword">new</span> GeneralEnvelope(Envelopes.transform(resultEnvelope, tmpCRS));</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;                tmpResult.intersect(tmpFilter);</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;                <span class="comment">/* Re-injection pass. For each component crs of the above computed</span></div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="comment">                 * intersection, we try to find the same in input envelope, to</span></div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="comment">                 * replace its values.</span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="comment">                 */</span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                <span class="keywordtype">int</span> tmpOffset = 0;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                <span class="keywordflow">for</span> (CoordinateReferenceSystem tmpSubCRS : toFind) {</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                    <span class="keyword">final</span> <span class="keywordtype">int</span> srcOffset = <a class="code" href="a03713.html">org</a>.<a class="code" href="a03714.html">apache</a>.<a class="code" href="a03715.html">sis</a>.<a class="code" href="a03719.html">internal</a>.referencing.AxisDirections.indexOfColinear(</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                            inputCRS.getCoordinateSystem(), tmpSubCRS.getCoordinateSystem());</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                    <span class="keywordflow">if</span>(srcOffset&gt;=0){</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                        <span class="keywordtype">int</span> tmpDimNumber = tmpSubCRS.getCoordinateSystem().getDimension();</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                        <span class="keyword">final</span> GeneralEnvelope subTmp = tmpResult.subEnvelope(tmpOffset, tmpOffset + tmpDimNumber);</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;                        resultEnvelope.subEnvelope(srcOffset, srcOffset+tmpResult.getDimension()).setEnvelope(subTmp);</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                    }</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;                }</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> TransformException(<span class="stringliteral">&quot;An error occured while applying filter : input layer CRS and filter CRS aren&#39;t compatible.&quot;</span>);</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;            }</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        }</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        <span class="keywordflow">return</span> resultEnvelope;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    }</div><div class="ttc" id="a03719_html"><div class="ttname"><a href="a03719.html">org.apache.sis.internal</a></div></div>
<div class="ttc" id="a03722_html"><div class="ttname"><a href="a03722.html">org.geotoolkit</a></div></div>
<div class="ttc" id="a07378_html_ad101ec8b550a2f61c67caba0e16b272b"><div class="ttname"><a href="a07378.html#ad101ec8b550a2f61c67caba0e16b272b">org.geotoolkit.referencing.CRS.getCompoundCRS</a></div><div class="ttdeci">static CompoundCRS getCompoundCRS(final CompoundCRS crs, final SingleCRS... components)</div><div class="ttdoc">Returns the first compound CRS which contains only the given components, in any order. </div><div class="ttdef"><b>Definition:</b> CRS.java:166</div></div>
<div class="ttc" id="a03715_html"><div class="ttname"><a href="a03715.html">org.apache.sis</a></div></div>
<div class="ttc" id="a07378_html"><div class="ttname"><a href="a07378.html">org.geotoolkit.referencing.CRS</a></div><div class="ttdoc">Utility class for making use of the  CoordinateReferenceSystem Coordinate Reference System} and assoc...</div><div class="ttdef"><b>Definition:</b> CRS.java:70</div></div>
<div class="ttc" id="a03714_html"><div class="ttname"><a href="a03714.html">org.apache</a></div></div>
<div class="ttc" id="a03713_html"><div class="ttname"><a href="a03713.html">org</a></div></div>
<div class="ttc" id="a03760_html"><div class="ttname"><a href="a03760.html">org.geotoolkit.referencing</a></div><div class="ttdoc">Miscellaneous utilities related to CRS objects. </div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a60ae902cf2b11666485076d2acd30eaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60ae902cf2b11666485076d2acd30eaf">&#9670;&nbsp;</a></span>intersects()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static boolean intersects </td>
          <td>(</td>
          <td class="paramtype">Envelope&#160;</td>
          <td class="paramname"><em>env1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Envelope&#160;</td>
          <td class="paramname"><em>env2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Test if two envelopes intersects. </p>
<p>This method will transform envelopes if needed.</p>
<dl class="section return"><dt>Returns</dt><dd>true if envelopes intersect </dd></dl>
<div class="fragment"><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;                                                                   {</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        <span class="keyword">final</span> CoordinateReferenceSystem crs1 = env1.getCoordinateReferenceSystem();</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        <span class="keyword">final</span> CoordinateReferenceSystem crs2 = env2.getCoordinateReferenceSystem();</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;        <span class="comment">//try to find a compatible crs</span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        <span class="keyword">final</span> CoordinateReferenceSystem crs = CRS.suggestCommonTarget(null, crs1,crs2);</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        <span class="keywordflow">if</span> (crs!=null) {</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;            <span class="keywordflow">try</span> {</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;                <span class="keyword">final</span> Envelope penv1 = Envelopes.transform(env1, crs);</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                <span class="keyword">final</span> Envelope penv2 = Envelopes.transform(env2, crs);</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;                <span class="keywordflow">return</span> GeneralEnvelope.castOrCopy(penv1).intersects(penv2);</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;            } <span class="keywordflow">catch</span>(<a class="code" href="a13890.html">Exception</a> ex) {<span class="comment">/*do nothing*/</span>}</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        }</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        <span class="comment">//try both way intersection</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        cas1:</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        <span class="keywordflow">try</span> {</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;            <span class="keyword">final</span> Envelope penv2 = Envelopes.transform(env2, crs1);</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;            <span class="keywordflow">if</span> (GeneralEnvelope.castOrCopy(penv2).isEmpty()) <span class="keywordflow">break</span> cas1;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;            <span class="keywordflow">return</span> GeneralEnvelope.castOrCopy(env1).intersects(penv2);</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;        } <span class="keywordflow">catch</span>(<a class="code" href="a13890.html">Exception</a> ex) {<span class="comment">/*do nothing*/</span>}</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        cas2:</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        <span class="keywordflow">try</span> {</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;            <span class="keyword">final</span> Envelope penv1 = Envelopes.transform(env1, crs2);</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;            <span class="keywordflow">if</span> (GeneralEnvelope.castOrCopy(penv1).isEmpty()) <span class="keywordflow">break</span> cas2;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;            <span class="keywordflow">return</span> GeneralEnvelope.castOrCopy(penv1).intersects(env2);</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        } <span class="keywordflow">catch</span>(<a class="code" href="a13890.html">Exception</a> ex) {<span class="comment">/*do nothing*/</span>}</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="comment">         * TODO: an exception means that a value exist, but can not be computed because the calculation</span></div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="comment">         *       do not converge. The value that we have not been able to calculate could be inside the</span></div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;<span class="comment">         *       other envelope. Concequently returning &#39;false&#39; is not okay - we should propagate the</span></div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<span class="comment">         *       exception instead.</span></div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    }</div><div class="ttc" id="a13890_html"><div class="ttname"><a href="a13890.html">Exception</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa64d5279157a0f7502f60f99c1b614bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa64d5279157a0f7502f60f99c1b614bd">&#9670;&nbsp;</a></span>isWrapAroundCompatible()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static boolean isWrapAroundCompatible </td>
          <td>(</td>
          <td class="paramtype">MathTransform&#160;</td>
          <td class="paramname"><em>trs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="a07606.html#a11d08d2c96f1252142b152f79d4c125f">ReferencingUtilities.findWrapAround()</a>.</p>
<div class="fragment"><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                                                                     {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">final</span> MathTransform step : MathTransforms.getSteps(trs)) {</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            <span class="keywordflow">if</span> (!(step instanceof LinearTransform || step instanceof Mercator)) {</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            }</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        }</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="a78fda5176e656c2d253dcb79b77608a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78fda5176e656c2d253dcb79b77608a5">&#9670;&nbsp;</a></span>lookupIdentifier()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static String lookupIdentifier </td>
          <td>(</td>
          <td class="paramtype">final IdentifiedObject&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final boolean&#160;</td>
          <td class="paramname"><em>fullScan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws FactoryException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Looks up an  Identifier identifier}, such as. </p>
<div class="fragment"><div class="line"><span class="stringliteral">&quot;EPSG:4326&quot;</span> </div></div><!-- fragment --><p> , of the specified object. This method searches in registered factories for an object  ComparisonMode::APPROXIMATE approximately equals} to the specified object. If such an object is found, then its first identifier is returned. Otherwise this method returns</p><div class="fragment"><div class="line">null </div></div><!-- fragment --><p> . </p>
<p><b>Note that this method checks the identifier validity</b>. If the given object declares explicitly an identifier, then this method will instantiate an object from the authority factory using that identifier and compare it with the given object. If the comparison fails, then this method returns</p><div class="fragment"><div class="line">null </div></div><!-- fragment --><p> . Consequently this method may returns</p><div class="fragment"><div class="line">null </div></div><!-- fragment --><p> even if the given object declares explicitly its identifier. If the declared identifier is wanted unconditionally, use <a class="el" href="">getIdentifier(IdentifiedObject)</a> instead.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object</td><td>The object (usually a  CoordinateReferenceSystem coordinate reference system}) whose identifier is to be found, or<div class="fragment"><div class="line">null </div></div><!-- fragment --> . </td></tr>
    <tr><td class="paramname">fullScan</td><td>If<div class="fragment"><div class="line"><span class="keyword">true</span> </div></div><!-- fragment --> , an exhaustive full scan against all registered objects should be performed (may be slow). Otherwise only a fast lookup based on embedded identifiers and names will be performed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The identifier, or<div class="fragment"><div class="line">null </div></div><!-- fragment --> if none was found or if the given object was null. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">FactoryException</td><td>If an unexpected failure occurred during the search.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd>AbstractAuthorityFactory::getIdentifiedObjectFinder(Class) </dd>
<dd>
IdentifiedObjectFinder::findIdentifier(IdentifiedObject) </dd></dl>

<p class="reference">Referenced by <a class="el" href="a07606.html#a559d846b31a5df0d77554e4998ef86f4">ReferencingUtilities.setLongitudeFirst()</a>.</p>
<div class="fragment"><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                                    {</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        <span class="keywordflow">if</span> (<span class="keywordtype">object</span> == null) {</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;            <span class="keywordflow">return</span> null;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        }</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        <span class="keyword">final</span> IdentifiedObjectFinder f = <a class="code" href="a03713.html">org</a>.<a class="code" href="a03714.html">apache</a>.<a class="code" href="a03715.html">sis</a>.referencing.IdentifiedObjects.newFinder(null);</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        f.setSearchDomain(fullScan ? IdentifiedObjectFinder.Domain.ALL_DATASET : IdentifiedObjectFinder.Domain.DECLARATION);</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">final</span> IdentifiedObject o : f.find(<span class="keywordtype">object</span>)) {</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;            <span class="keyword">final</span> String i = <a class="code" href="a03713.html">org</a>.<a class="code" href="a03714.html">apache</a>.<a class="code" href="a03715.html">sis</a>.referencing.IdentifiedObjects.toString(</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                    <a class="code" href="a03713.html">org</a>.<a class="code" href="a03714.html">apache</a>.<a class="code" href="a03715.html">sis</a>.referencing.IdentifiedObjects.getIdentifier(o, null));</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;            <span class="keywordflow">if</span> (i != null) <span class="keywordflow">return</span> i;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;        }</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        <span class="keywordflow">return</span> null;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    }</div><div class="ttc" id="a03715_html"><div class="ttname"><a href="a03715.html">org.apache.sis</a></div></div>
<div class="ttc" id="a03714_html"><div class="ttname"><a href="a03714.html">org.apache</a></div></div>
<div class="ttc" id="a03713_html"><div class="ttname"><a href="a03713.html">org</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9e61d2ae168ec7e1bfbf4958a173a602"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e61d2ae168ec7e1bfbf4958a173a602">&#9670;&nbsp;</a></span>name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Map&lt;String,String&gt; name </td>
          <td>(</td>
          <td class="paramtype">final String&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                                                              {</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        <span class="keywordflow">return</span> Collections.singletonMap(IdentifiedObject.NAME_KEY, <a class="code" href="a07606.html#a9e61d2ae168ec7e1bfbf4958a173a602">name</a>);</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    }</div><div class="ttc" id="a07606_html_a9e61d2ae168ec7e1bfbf4958a173a602"><div class="ttname"><a href="a07606.html#a9e61d2ae168ec7e1bfbf4958a173a602">org.geotoolkit.referencing.ReferencingUtilities.name</a></div><div class="ttdeci">static Map&lt; String, String &gt; name(final String name)</div><div class="ttdef"><b>Definition:</b> ReferencingUtilities.java:1051</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4d9ec7ea5c46f16aa7327686d0a1c25a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d9ec7ea5c46f16aa7327686d0a1c25a">&#9670;&nbsp;</a></span>orthodromicDistance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static double orthodromicDistance </td>
          <td>(</td>
          <td class="paramtype">final double&#160;</td>
          <td class="paramname"><em>radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>λ1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>φ1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>λ2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>φ2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the orthodromic distance between two geographic coordinates. </p>
<p>The orthodromic distance is the shortest distance between two points on a sphere's surface. The orthodromic path is always on a great circle.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">λ1</td><td>longitude of first point (in decimal degrees). </td></tr>
    <tr><td class="paramname">φ1</td><td>latitude of first point (in decimal degrees). </td></tr>
    <tr><td class="paramname">λ2</td><td>longitude of second point (in decimal degrees). </td></tr>
    <tr><td class="paramname">φ2</td><td>latitude of second point (in decimal degrees). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the orthodromic distance (in the units of this ellipsoid's axis). </dd></dl>
<div class="fragment"><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                                                                                                                  {</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;        φ1 = toRadians(φ1);</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;        φ2 = toRadians(φ2);</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">double</span> dx = toRadians(abs(λ2-λ1) % 360);</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        <span class="keywordtype">double</span> rho = sin(φ1)*sin(φ2) + cos(φ1)*cos(φ2)*cos(dx);</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;        assert abs(rho) &lt; 1.0000001 : rho;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        <span class="keywordflow">if</span> (rho &gt; +1) rho = +1;                         <span class="comment">// Catch rounding error.</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        <span class="keywordflow">if</span> (rho &lt; -1) rho = -1;                         <span class="comment">// Catch rounding error.</span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;        <span class="keywordflow">return</span> acos(rho) * radius;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="a72a2b88bc02b67a236e8971548ee02b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72a2b88bc02b67a236e8971548ee02b3">&#9670;&nbsp;</a></span>readTransform()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static AffineTransform readTransform </td>
          <td>(</td>
          <td class="paramtype">Path&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td> throws IOException, NumberFormatException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read TFW file and return the content affine transform. </p>

<p class="reference">References <a class="el" href="a07266.html#a6bf0cd09ba3805f5aa341dc82c8d7604">IOUtilities.toString()</a>.</p>
<div class="fragment"><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                                                                                                  {</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        <span class="keyword">final</span> String str = IOUtilities.toString(f);</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        <span class="keyword">final</span> String[] parts = str.split(<span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">double</span>[] vals = <span class="keyword">new</span> <span class="keywordtype">double</span>[6];</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        <span class="keywordtype">int</span> idx=0;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;        <span class="keywordflow">for</span>(String line : parts){</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;            line = line.trim();</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;            <span class="keywordflow">if</span>(line.isEmpty() || line.startsWith(<span class="stringliteral">&quot;#&quot;</span>) || line.startsWith(<span class="stringliteral">&quot;//&quot;</span>)) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;            vals[idx] = Double.parseDouble(line);</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;            idx++;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        }</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> AffineTransform(vals);</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="a3a96336cbeba3c24b7970632a89a975c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a96336cbeba3c24b7970632a89a975c">&#9670;&nbsp;</a></span>setLongitudeFirst() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Envelope setLongitudeFirst </td>
          <td>(</td>
          <td class="paramtype">final Envelope&#160;</td>
          <td class="paramname"><em>env</em></td><td>)</td>
          <td> throws TransformException, FactoryException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Try to change a coordinate reference system axis order to place the east axis first. </p>
<p>Reproject the envelope. </p>

<p class="reference">Referenced by <a class="el" href="a07606.html#a559d846b31a5df0d77554e4998ef86f4">ReferencingUtilities.setLongitudeFirst()</a>.</p>
<div class="fragment"><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                                                                                                            {</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <span class="keywordflow">if</span>(env == null) <span class="keywordflow">return</span> env;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="keyword">final</span> CoordinateReferenceSystem crs = env.getCoordinateReferenceSystem();</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        <span class="keyword">final</span> CoordinateReferenceSystem flipped = <a class="code" href="a07606.html#a3a96336cbeba3c24b7970632a89a975c">setLongitudeFirst</a>(crs);</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        <span class="keywordflow">return</span> Envelopes.transform(env, flipped);</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    }</div><div class="ttc" id="a07606_html_a3a96336cbeba3c24b7970632a89a975c"><div class="ttname"><a href="a07606.html#a3a96336cbeba3c24b7970632a89a975c">org.geotoolkit.referencing.ReferencingUtilities.setLongitudeFirst</a></div><div class="ttdeci">static Envelope setLongitudeFirst(final Envelope env)</div><div class="ttdoc">Try to change a coordinate reference system axis order to place the east axis first. </div><div class="ttdef"><b>Definition:</b> ReferencingUtilities.java:600</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a559d846b31a5df0d77554e4998ef86f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a559d846b31a5df0d77554e4998ef86f4">&#9670;&nbsp;</a></span>setLongitudeFirst() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static CoordinateReferenceSystem setLongitudeFirst </td>
          <td>(</td>
          <td class="paramtype">final CoordinateReferenceSystem&#160;</td>
          <td class="paramname"><em>crs</em></td><td>)</td>
          <td> throws FactoryException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Try to change a coordinate reference system axis order to place the east axis first. </p>
<dl class="deprecated"><dt><b><a class="el" href="a03636.html#_deprecated000078">Deprecated:</a></b></dt><dd>Use <a class="el" href="">org.apache.sis.referencing.crs.AbstractCRS#forConvention</a> instead. </dd></dl>

<p class="reference">References <a class="el" href="a07606.html#a78fda5176e656c2d253dcb79b77608a5">ReferencingUtilities.lookupIdentifier()</a>, and <a class="el" href="a07606.html#a3a96336cbeba3c24b7970632a89a975c">ReferencingUtilities.setLongitudeFirst()</a>.</p>
<div class="fragment"><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                                                                                                                          {</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="keywordflow">if</span> (crs instanceof SingleCRS) {</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            <span class="keyword">final</span> SingleCRS singlecrs = (SingleCRS) crs;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            <span class="keyword">final</span> CoordinateSystem cs = singlecrs.getCoordinateSystem();</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            <span class="keyword">final</span> <span class="keywordtype">int</span> dimension = cs.getDimension();</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            <span class="keywordflow">if</span> (dimension &lt;= 1) {</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                <span class="comment">//can&#39;t change anything if it&#39;s only one axis</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                <span class="keywordflow">return</span> crs;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            }</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            <span class="comment">//find the east axis</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            <span class="keywordtype">int</span> eastAxis = -1;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;dimension; i++) {</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                <span class="keyword">final</span> AxisDirection firstAxis = cs.getAxis(i).getDirection();</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                <span class="keywordflow">if</span> (firstAxis == AxisDirection.EAST || firstAxis == AxisDirection.WEST) {</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                    eastAxis = i;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                }</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            }</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            <span class="keywordflow">if</span> (eastAxis == 0) {</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                <span class="comment">//the crs is already in the correct order or does not have any east axis</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                <span class="keywordflow">return</span> singlecrs;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            }</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            <span class="comment">//try to change the crs axis</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            <span class="keyword">final</span> String <span class="keywordtype">id</span> = <a class="code" href="a07606.html#a78fda5176e656c2d253dcb79b77608a5">lookupIdentifier</a>(singlecrs, <span class="keyword">true</span>);</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            <span class="keywordflow">if</span> (<span class="keywordtype">id</span> != null) {</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                <span class="keywordflow">return</span> AbstractCRS.castOrCopy(CRS.forCode(<span class="keywordtype">id</span>)).forConvention(AxesConvention.RIGHT_HANDED);</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                <span class="comment">//TODO how to manage custom crs ? might be a derivedCRS.</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> FactoryException(<span class="stringliteral">&quot;Failed to create flipped axis for crs : &quot;</span> + singlecrs);</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            }</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (crs instanceof CompoundCRS) {</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            <span class="keyword">final</span> CompoundCRS compoundcrs = (CompoundCRS) crs;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            <span class="keyword">final</span> List&lt;CoordinateReferenceSystem&gt; components = compoundcrs.getComponents();</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;            <span class="keyword">final</span> <span class="keywordtype">int</span> size = components.size();</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            <span class="keyword">final</span> CoordinateReferenceSystem[] parts = <span class="keyword">new</span> CoordinateReferenceSystem[size];</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            <span class="comment">//only recreate the crs if one element changed.</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            <span class="keywordtype">boolean</span> changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;size; i++) {</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                <span class="keyword">final</span> CoordinateReferenceSystem orig = components.get(i);</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                parts[i] = <a class="code" href="a07606.html#a3a96336cbeba3c24b7970632a89a975c">setLongitudeFirst</a>(orig);</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                <span class="keywordflow">if</span> (!parts[i].equals(orig)) changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            }</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            <span class="keywordflow">if</span> (changed) {</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                <span class="keywordflow">return</span> CRS.compound(parts);</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                <span class="keywordflow">return</span> crs;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            }</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        }</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        <span class="keywordflow">return</span> crs;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    }</div><div class="ttc" id="a07606_html_a3a96336cbeba3c24b7970632a89a975c"><div class="ttname"><a href="a07606.html#a3a96336cbeba3c24b7970632a89a975c">org.geotoolkit.referencing.ReferencingUtilities.setLongitudeFirst</a></div><div class="ttdeci">static Envelope setLongitudeFirst(final Envelope env)</div><div class="ttdoc">Try to change a coordinate reference system axis order to place the east axis first. </div><div class="ttdef"><b>Definition:</b> ReferencingUtilities.java:600</div></div>
<div class="ttc" id="a07606_html_a78fda5176e656c2d253dcb79b77608a5"><div class="ttname"><a href="a07606.html#a78fda5176e656c2d253dcb79b77608a5">org.geotoolkit.referencing.ReferencingUtilities.lookupIdentifier</a></div><div class="ttdeci">static String lookupIdentifier(final IdentifiedObject object, final boolean fullScan)</div><div class="ttdoc">Looks up an  Identifier identifier}, such as. </div><div class="ttdef"><b>Definition:</b> ReferencingUtilities.java:1081</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae448d8529bd8703cd27cd35b310aa0b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae448d8529bd8703cd27cd35b310aa0b4">&#9670;&nbsp;</a></span>toAffine()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static AffineTransform toAffine </td>
          <td>(</td>
          <td class="paramtype">final Dimension&#160;</td>
          <td class="paramname"><em>rect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final Envelope&#160;</td>
          <td class="paramname"><em>env</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create an affine transform object where (0,0) in the dimension match the top left corner of the envelope. </p>
<p>This method assumes that the Y axis of the rectangle is going down. This returns the display to objective transform (rect to env). </p>
<div class="fragment"><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                                                                                    {</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">double</span> minx = env.getMinimum(0);</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">double</span> maxy = env.getMaximum(1);</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">double</span> scaleX = env.getSpan(0)/rect.width;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">double</span> scaleY = - env.getSpan(1)/rect.height;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> AffineTransform(scaleX, 0, 0, scaleY, minx, maxy);</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="ae2f7916f16e89bfa17892961c46e4c3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2f7916f16e89bfa17892961c46e4c3e">&#9670;&nbsp;</a></span>toTransform() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static MathTransform toTransform </td>
          <td>(</td>
          <td class="paramtype">final MathTransform&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double ... []&#160;</td>
          <td class="paramname"><em>values</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="a03636.html#_deprecated000079">Deprecated:</a></b></dt><dd>replaced by <a class="el" href="">toTransform(int, org.opengis.referencing.operation.MathTransform, java.util.Map, int)</a></dd></dl>

<p class="reference">References <a class="el" href="a07594.html#a846a7b1176dec66db64e1e59bb093e44">LinearInterpolator1D.create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                                                                                          {</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        MathTransform result = MathTransforms.passThrough(0, base, values.length);</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        <span class="keyword">final</span> <span class="keywordtype">int</span> baseDim = base.getSourceDimensions();</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;values.length; i++){</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;            <span class="keyword">final</span> <span class="keywordtype">double</span>[] array = values[i];</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            <span class="keyword">final</span> MathTransform1D axistrs;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;            <span class="keywordflow">if</span>(array.length == 0){</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                axistrs = (MathTransform1D) MathTransforms.linear(1, 0);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(array.length == 1){</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                axistrs = (MathTransform1D) MathTransforms.linear(1, array[0]);</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            }<span class="keywordflow">else</span>{</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                axistrs = LinearInterpolator1D.create(array);</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;            }</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;            <span class="keyword">final</span> MathTransform mask = MathTransforms.passThrough(baseDim+i, axistrs, values.length-i-1);</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;            result = MathTransforms.concatenate(result, mask);</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        }</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="a313ac74b0be1c50a996d1c5cf0454a4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a313ac74b0be1c50a996d1c5cf0454a4b">&#9670;&nbsp;</a></span>toTransform() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static MathTransform toTransform </td>
          <td>(</td>
          <td class="paramtype">final int&#160;</td>
          <td class="paramname"><em>firstBaseOrdinate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final MathTransform&#160;</td>
          <td class="paramname"><em>subTransform</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final Map&lt; Integer, double[]&gt;&#160;</td>
          <td class="paramname"><em>axisValues</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final int&#160;</td>
          <td class="paramname"><em>expectedTargetDimension</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a <a class="el" href="">PassThroughTransform</a> with <b>expectedTargetDimension</b> number, from <b>subtransform</b> at dimension index <b>firstBaseOrdinate</b> and with <b>axisValues</b> infomation on each other dimensions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">firstBaseOrdinate</td><td>the first minimum ordinate of subtransform into the expected target dimension. </td></tr>
    <tr><td class="paramname">subTransform</td><td>the sub transformation which will be wrapped by other mathematical functions. </td></tr>
    <tr><td class="paramname">axisValues</td><td>the list of mathmatical function for each other dimensions than already present subtransform dimensions. </td></tr>
    <tr><td class="paramname">expectedTargetDimension</td><td>the expected target <a class="el" href="">PassThroughTransform</a> dimension. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>expected <a class="el" href="">PassThroughTransform</a>, created from given parameters. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="a07606.html#a0cebc116bcc50b78ef3ae4074a038182" title="Check than all needed parameters to build appropriate PassThroughTransform are conform. ">checkMTToTransform</a>(int, org.opengis.referencing.operation.MathTransform, java.util.Map, int) </dd></dl>

<p class="reference">References <a class="el" href="a07606.html#a0cebc116bcc50b78ef3ae4074a038182">ReferencingUtilities.checkMTToTransform()</a>, and <a class="el" href="a07594.html#a846a7b1176dec66db64e1e59bb093e44">LinearInterpolator1D.create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                                                                                                                        {</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        <a class="code" href="a07606.html#a0cebc116bcc50b78ef3ae4074a038182">checkMTToTransform</a>(firstBaseOrdinate, subTransform, axisValues, expectedTargetDimension);</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        MathTransform result = MathTransforms.passThrough(firstBaseOrdinate, subTransform, expectedTargetDimension - subTransform.getTargetDimensions() - firstBaseOrdinate);</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <span class="keywordflow">for</span> (Integer dim : axisValues.keySet()) {</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;            <span class="keyword">final</span> <span class="keywordtype">double</span>[] currentAxisValues = axisValues.get(dim);</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;            <span class="keyword">final</span> MathTransform1D axistrs;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;            <span class="keywordflow">if</span>(currentAxisValues.length &lt;= 1) {</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                axistrs = (MathTransform1D) MathTransforms.linear(1, (currentAxisValues.length == 0)</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                                                                     ? 0 : currentAxisValues[0]);</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                axistrs = LinearInterpolator1D.create(currentAxisValues);</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;            }</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;            <span class="keyword">final</span> MathTransform mask = MathTransforms.passThrough(dim, axistrs, expectedTargetDimension - dim - 1);</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;            result                   = MathTransforms.concatenate(result, mask);</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        }</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    }</div><div class="ttc" id="a07606_html_a0cebc116bcc50b78ef3ae4074a038182"><div class="ttname"><a href="a07606.html#a0cebc116bcc50b78ef3ae4074a038182">org.geotoolkit.referencing.ReferencingUtilities.checkMTToTransform</a></div><div class="ttdeci">static void checkMTToTransform(final int firstBaseOrdinate, final MathTransform subTransform, final Map&lt; Integer, double[]&gt; axisValues, final int expectedTargetDimension)</div><div class="ttdoc">Check than all needed parameters to build appropriate PassThroughTransform are conform. </div><div class="ttdef"><b>Definition:</b> ReferencingUtilities.java:754</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acc5b9175390515cc22627eb6425ec9c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc5b9175390515cc22627eb6425ec9c1">&#9670;&nbsp;</a></span>transform()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Envelope transform </td>
          <td>(</td>
          <td class="paramtype">Envelope&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CoordinateReferenceSystem&#160;</td>
          <td class="paramname"><em>targetCRS</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws TransformException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Transform the given envelope to the given crs. </p>
<p>Unlike Envelopes.transform this method handle growing number of dimensions by filling other axes with default values.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td>source Envelope </td></tr>
    <tr><td class="paramname">targetCRS</td><td>target CoordinateReferenceSystem </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>transformed envelope </dd></dl>
<div class="fragment"><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                                                                                                                 {</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keywordflow">try</span> {</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            <span class="keywordflow">return</span> Envelopes.transform(env, targetCRS);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        } <span class="keywordflow">catch</span> (TransformException ex) {</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            <span class="comment">//we tried...</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        }</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <span class="comment">//lazy transform</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="keyword">final</span> CoordinateReferenceSystem sourceCRS = env.getCoordinateReferenceSystem();</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="keyword">final</span> GeneralEnvelope result = <span class="keyword">new</span> GeneralEnvelope(targetCRS);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="comment">//decompose crs</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <span class="keyword">final</span> List&lt;SingleCRS&gt; sourceParts = getSingleComponents(sourceCRS);</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <span class="keyword">final</span> List&lt;SingleCRS&gt; targetParts = getSingleComponents(targetCRS);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <span class="keywordtype">int</span> sourceAxeIndex=0;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        sourceLoop:</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <span class="keywordflow">for</span>(CoordinateReferenceSystem sourcePart : sourceParts){</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            <span class="keyword">final</span> <span class="keywordtype">int</span> sourcePartDimension = sourcePart.getCoordinateSystem().getDimension();</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            <span class="keywordtype">int</span> targetAxeIndex=0;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            targetLoop:</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <span class="keywordflow">for</span>(CoordinateReferenceSystem targetPart : targetParts){</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                <span class="keyword">final</span> <span class="keywordtype">int</span> targetPartDimension = targetPart.getCoordinateSystem().getDimension();</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                <span class="comment">//try conversion</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                <span class="keywordflow">try</span> {</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                    <span class="keyword">final</span> MathTransform trs = CRS.findOperation(sourcePart, targetPart, null).getMathTransform();</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                    <span class="comment">//we could transform by using two coordinate, but envelope conversion allows to handle</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                    <span class="comment">//crs singularities more efficiently</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                    <span class="keyword">final</span> GeneralEnvelope partSource = <span class="keyword">new</span> GeneralEnvelope(sourcePart);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;sourcePartDimension;i++){</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                        partSource.setRange(i, env.getMinimum(sourceAxeIndex+i), env.getMaximum(sourceAxeIndex+i));</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                    }</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                    <span class="keyword">final</span> Envelope partResult = Envelopes.transform(trs, partSource);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;targetPartDimension;i++){</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                        result.setRange(targetAxeIndex+i, partResult.getMinimum(i), partResult.getMaximum(i));</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                    }</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                    <span class="keywordflow">break</span> targetLoop;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                } <span class="keywordflow">catch</span> (FactoryException ex) {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                    <span class="comment">//we tried...</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                }</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                targetAxeIndex += targetPartDimension;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            }</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            sourceAxeIndex += sourcePartDimension;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        }</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="a475c64291946090583d48f656b0891d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a475c64291946090583d48f656b0891d5">&#9670;&nbsp;</a></span>transform2DCRS()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Envelope transform2DCRS </td>
          <td>(</td>
          <td class="paramtype">final Envelope&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final CoordinateReferenceSystem&#160;</td>
          <td class="paramname"><em>crs2D</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws TransformException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Transform the <a class="el" href="a07378.html" title="Utility class for making use of the  CoordinateReferenceSystem Coordinate Reference System} and assoc...">CRS</a> 2D component of this envelope. </p>
<p>This preserve temporal/elevation or other axis. </p>

<p class="reference">References <a class="el" href="a07606.html#ae5e7580dac28bb7f6e791de6752313e7">ReferencingUtilities.change2DComponent()</a>.</p>
<div class="fragment"><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                                                                                                                              {</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="keyword">final</span> CoordinateReferenceSystem originalCRS = env.getCoordinateReferenceSystem();</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="keyword">final</span> CoordinateReferenceSystem targetCRS = <a class="code" href="a07606.html#ae5e7580dac28bb7f6e791de6752313e7">change2DComponent</a>(originalCRS, crs2D);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <span class="keywordflow">return</span> Envelopes.transform(env, targetCRS);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    }</div><div class="ttc" id="a07606_html_ae5e7580dac28bb7f6e791de6752313e7"><div class="ttname"><a href="a07606.html#ae5e7580dac28bb7f6e791de6752313e7">org.geotoolkit.referencing.ReferencingUtilities.change2DComponent</a></div><div class="ttdeci">static CoordinateReferenceSystem change2DComponent(final CoordinateReferenceSystem originalCRS, final CoordinateReferenceSystem crs2D)</div><div class="ttdoc">Change the 2D CRS part of the CRS. </div><div class="ttdef"><b>Definition:</b> ReferencingUtilities.java:551</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a838f65e03c42c9e161694aa741362d5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a838f65e03c42c9e161694aa741362d5b">&#9670;&nbsp;</a></span>transposeEnvelope()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static GeneralEnvelope transposeEnvelope </td>
          <td>(</td>
          <td class="paramtype">final GeneralEnvelope&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GeneralEnvelope&#160;</td>
          <td class="paramname"><em>destination</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For each axis value of the source envelope, we'll set corresponding one in destination envelope, if we find a valid transform. </p>
<p>For all the components of the destination that can't be filled, they're left as is.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>The envelope to take values from. </td></tr>
    <tr><td class="paramname">destination</td><td>The envelope to set values into. Will be modified. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The destination envelope that have been modified. </dd></dl>
<div class="fragment"><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                                                                                                               {</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        ArgumentChecks.ensureNonNull(<span class="stringliteral">&quot;source envelope&quot;</span>, source);</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        ArgumentChecks.ensureNonNull(<span class="stringliteral">&quot;destination envelope&quot;</span>, destination);</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        <span class="keyword">final</span> CoordinateReferenceSystem sourceCRS = source.getCoordinateReferenceSystem();</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        <span class="keyword">final</span> CoordinateReferenceSystem destCRS = destination.getCoordinateReferenceSystem();</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        <span class="comment">// If they&#39;re the same, we can return the source envelope.</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        <span class="keywordflow">if</span> (Utilities.equalsApproximately(sourceCRS, destCRS)) {</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;            destination = <span class="keyword">new</span> GeneralEnvelope(source);</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        }</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        <span class="comment">// Decompose source and destination CRSs</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        <span class="keyword">final</span> List&lt;SingleCRS&gt; sourceComponents = getSingleComponents(sourceCRS);</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        <span class="keyword">final</span> List&lt;SingleCRS&gt; destComponents = getSingleComponents(destCRS);</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        <span class="comment">// Store sub-CRSs of destination which have already been used for range transfer.</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        <span class="keyword">final</span> List&lt;CoordinateReferenceSystem&gt; usedCRS = <span class="keyword">new</span> ArrayList&lt;&gt;(destComponents.size());</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        <span class="keywordtype">boolean</span> searchHorizontal;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        <span class="keywordtype">boolean</span> searchTemporal;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <span class="keywordtype">boolean</span> searchVertical;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        <span class="keywordtype">boolean</span> compatible;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        <span class="keywordtype">int</span> srcLowerAxis = 0;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <span class="keywordtype">int</span> srcAxisCount = 0;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        <span class="keywordtype">int</span> destLowerAxis;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        <span class="keywordtype">int</span> destAxisCount;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        browseSource:</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> srcCptCounter = 0; srcCptCounter &lt; sourceComponents.size(); srcCptCounter++) {</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;            <span class="comment">// Prepare iteration.</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;            searchHorizontal = <span class="keyword">false</span>;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;            searchVertical = <span class="keyword">false</span>;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;            searchTemporal = <span class="keyword">false</span>;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;            srcLowerAxis += srcAxisCount;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;            destLowerAxis = 0;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;            destAxisCount = 0;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;            <span class="keyword">final</span> CoordinateReferenceSystem srcCurrent = sourceComponents.get(srcCptCounter);</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;            srcAxisCount = srcCurrent.getCoordinateSystem().getDimension();</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;             <span class="comment">// First, we must browse destination to check if we can find an equal CRS.</span></div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> destCptCounter = 0; destCptCounter &lt; destComponents.size(); destCptCounter++) {</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                destLowerAxis += destAxisCount;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                <span class="keyword">final</span> CoordinateReferenceSystem destCurrent = destComponents.get(destCptCounter);</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                destAxisCount = destCurrent.getCoordinateSystem().getDimension();</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                <span class="comment">// We already bind a dimension of the source envelope for this CRS, just keep going.</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                <span class="keywordflow">if</span> (usedCRS.contains(destCurrent)) {</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                    <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                }</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                <span class="keywordflow">if</span> (Utilities.equalsApproximately(srcCurrent, destCurrent)) {</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                    <span class="keyword">final</span> GeneralEnvelope srcSubEnvelope = source.subEnvelope(srcLowerAxis, srcLowerAxis + srcAxisCount);</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                    destination.subEnvelope(destLowerAxis, destLowerAxis+ srcSubEnvelope.getDimension()).setEnvelope(srcSubEnvelope);</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                    usedCRS.add(destCurrent);</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                    <span class="keywordflow">continue</span> browseSource;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                }</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;            }</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;            destLowerAxis = 0;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;            destAxisCount = 0;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">             * If equality failed, we&#39;ll try to get CRS whose meaning is</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="comment">             * compatible. To do so, we try to identify the CRS type (horizontal,</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="comment">             * vertical or temporal). If it&#39;s a fail, our last chance is to</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment">             * compare both CRS axis.</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;            <span class="keywordflow">if</span> (getHorizontalComponent(srcCurrent) != null) {</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                searchHorizontal = <span class="keyword">true</span>;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (getVerticalComponent(srcCurrent, <span class="keyword">true</span>) != null) {</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                searchVertical = <span class="keyword">true</span>;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (getTemporalComponent(srcCurrent) != null) {</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                searchTemporal = <span class="keyword">true</span>;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;            }</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> destCptCounter = 0; destCptCounter &lt; destComponents.size(); destCptCounter++) {</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                compatible = <span class="keyword">false</span>;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                destLowerAxis += destAxisCount;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                <span class="keyword">final</span> CoordinateReferenceSystem destCurrent = destComponents.get(destCptCounter);</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;                destAxisCount = destCurrent.getCoordinateSystem().getDimension();</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                <span class="comment">// We already bind a dimension of the source envelope for this CRS, just keep going.</span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                <span class="keywordflow">if</span> (usedCRS.contains(destCurrent)) {</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                    <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                }</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                <span class="keywordflow">if</span> (searchHorizontal) {</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                    <span class="keywordflow">if</span> (getHorizontalComponent(destCurrent) != null) {</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                        compatible = <span class="keyword">true</span>;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                    }</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (searchVertical) {</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                    <span class="keywordflow">if</span> (getVerticalComponent(destCurrent, <span class="keyword">true</span>) != null) {</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                        compatible = <span class="keyword">true</span>;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                    }</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (searchTemporal) {</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                    <span class="keywordflow">if</span> (getTemporalComponent(destCurrent) != null) {</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                        compatible = <span class="keyword">true</span>;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                    }</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                    <span class="comment">// Check both CRS axis.</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                    <span class="keyword">final</span> CoordinateSystem sourceCS = srcCurrent.getCoordinateSystem();</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                    <span class="keyword">final</span> CoordinateSystem destCS = destCurrent.getCoordinateSystem();</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                    <span class="keywordflow">if</span> (sourceCS.getDimension() == destCS.getDimension()) {</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                        <span class="keywordtype">boolean</span> sameAxis = <span class="keyword">true</span>;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> axisCount = 0; axisCount &lt; sourceCS.getDimension(); axisCount++) {</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                            <span class="keywordflow">if</span> (AxisDirections.indexOfColinear(destCS, sourceCS.getAxis(axisCount).getDirection()) &lt; 0) {</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                                sameAxis = <span class="keyword">false</span>;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                            }</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                        }</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                        compatible = sameAxis;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;                    }</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                }</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                <span class="comment">// We found matching CRS, Now we can transfer coordinates.</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                <span class="keywordflow">if</span> (compatible) {</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;                    <span class="keyword">final</span> GeneralEnvelope srcSubEnvelope = source.subEnvelope(srcLowerAxis, srcLowerAxis + srcAxisCount);</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                    srcSubEnvelope.setCoordinateReferenceSystem(srcCurrent);</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                    <span class="keywordflow">try</span> {</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                        <span class="keyword">final</span> Envelope tmp = Envelopes.transform(srcSubEnvelope, destCurrent);</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                        destination.subEnvelope(destLowerAxis, destLowerAxis + tmp.getDimension()).setEnvelope(tmp);</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                    } <span class="keywordflow">catch</span> (TransformException e) {</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                        <span class="comment">// If we can&#39;t transform it, we just have to go to the next iteration.</span></div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                    }</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;                    usedCRS.add(destCurrent);</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                }</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;            }</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        }</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        <span class="keywordflow">return</span> destination;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="af13d266fd46c44c933e5cb288a839990"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af13d266fd46c44c933e5cb288a839990">&#9670;&nbsp;</a></span>wrapNormalize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static Envelope wrapNormalize </td>
          <td>(</td>
          <td class="paramtype">Envelope&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DirectPosition []&#160;</td>
          <td class="paramname"><em>warp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                                                                              {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="keywordflow">if</span> (warp == null) <span class="keywordflow">return</span> env;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="comment">//TODO we assume the warp is on a along an axis of the coordinate system.</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="keyword">final</span> DirectPosition p0 = warp[0];</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="keyword">final</span> DirectPosition p1 = warp[1];</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0, n = p0.getDimension(); i &lt; n; i++) {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <span class="keyword">final</span> <span class="keywordtype">double</span> minimum = p0.getOrdinate(i);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <span class="keyword">final</span> <span class="keywordtype">double</span> maximum = p1.getOrdinate(i);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <span class="keywordflow">if</span>(minimum == maximum){</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                <span class="comment">//not the wrap axis</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            }</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            <span class="keyword">final</span> <span class="keywordtype">double</span> csSpan = maximum-minimum;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <span class="keywordtype">double</span> o1 = env.getMinimum(i);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <span class="keywordtype">double</span> o2 = env.getMaximum(i);</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            <span class="keyword">final</span> GeneralEnvelope res = <span class="keyword">new</span> GeneralEnvelope(env);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            <span class="keywordflow">if</span> (abs(o2-o1) &gt;= csSpan) {</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                <span class="comment">/*</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">                 * If the range exceed the CS span, then we have to replace it by the</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">                 * full span, otherwise the range computed by the &quot;else&quot; block is too</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">                 * small. The full range will typically be [-180 … 180]°.  However we</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">                 * make a special case if the two bounds are multiple of the CS span,</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">                 * typically [0 … 360]°. In this case the [0 … -0]° range matches the</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">                 * original values and is understood by GeneralEnvelope as a range</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">                 * spanning all the world.</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">                 */</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                <span class="keywordflow">if</span> (o1 != minimum || o2 != maximum) {</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                    <span class="keywordflow">if</span> ((o1 % csSpan) == 0 &amp;&amp; (o2 % csSpan) == 0) {</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                        res.setRange(i, +0.0, -0.0);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                        res.setRange(i, minimum, maximum);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                    }</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                }</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                <span class="keywordflow">if</span>(o1&lt;minimum || o2&gt;maximum){</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                    <span class="comment">//envelope cross the anti-méridian</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                    res.setRange(i, minimum, maximum);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                }</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">//                o1 = floor((o1 - minimum) / csSpan) * csSpan;</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">//                o2 = floor((o2 - minimum) / csSpan) * csSpan;</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">//                if (o1 != 0){</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">//                    res.setRange(i, res.getMinimum(i)-o1, res.getMaximum(i));</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">//                }</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">//                if (o2 != 0){</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">//                    res.setRange(i, res.getMinimum(i), res.getMaximum(i)-o2);</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">//                }</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            }</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="keywordflow">return</span> env;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a4869b9536b37862eb4d0f03f750c55d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4869b9536b37862eb4d0f03f750c55d0">&#9670;&nbsp;</a></span>EARTH_RADIUS</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final double EARTH_RADIUS = 6371007</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Authalic sphere radius in metres. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a03713.html">org</a></li><li class="navelem"><a class="el" href="a03722.html">geotoolkit</a></li><li class="navelem"><a class="el" href="a03760.html">referencing</a></li><li class="navelem"><a class="el" href="a07606.html">ReferencingUtilities</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
